2022-08-01 09:47:05.297 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 09:47:05.430 +04:00 [DBG] Hosting starting
2022-08-01 09:47:05.451 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 09:47:05.456 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 09:47:05.471 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 09:47:05.481 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 09:47:05.488 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 09:47:05.498 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 09:47:05.501 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 09:47:05.505 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 09:47:05.508 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 09:47:05.514 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 09:47:05.518 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 09:47:05.523 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 09:47:05.525 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 09:47:05.651 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 09:47:05.698 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 09:47:05.700 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 09:47:05.702 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 09:47:05.703 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 09:47:05.704 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 09:47:05.706 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 09:47:05.707 +04:00 [INF] Hosting environment: Development
2022-08-01 09:47:05.708 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 09:47:05.709 +04:00 [DBG] Hosting started
2022-08-01 09:47:05.877 +04:00 [DBG] Connection id "0HMJJG523DUHF" received FIN.
2022-08-01 09:47:05.889 +04:00 [DBG] Connection id "0HMJJG523DUHF" accepted.
2022-08-01 09:47:05.892 +04:00 [DBG] Connection id "0HMJJG523DUHF" started.
2022-08-01 09:47:05.913 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 09:47:05.980 +04:00 [DBG] Connection id "0HMJJG523DUHF" stopped.
2022-08-01 09:47:05.984 +04:00 [DBG] Connection id "0HMJJG523DUHF" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 09:47:07.245 +04:00 [DBG] Connection id "0HMJJG523DUHG" accepted.
2022-08-01 09:47:07.247 +04:00 [DBG] Connection id "0HMJJG523DUHG" started.
2022-08-01 09:47:07.309 +04:00 [DBG] Connection 0HMJJG523DUHG established using the following protocol: "Tls12"
2022-08-01 09:47:07.388 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 09:47:07.427 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 09:47:07.565 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 09:47:07.859 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 09:47:07.863 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 09:47:07.868 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 7.7865ms
2022-08-01 09:47:07.868 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 485.6977ms
2022-08-01 09:47:07.943 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 09:47:08.057 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 113.4337ms
2022-08-01 09:47:08.132 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 09:47:08.304 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 171.1775ms
2022-08-01 09:47:18.647 +04:00 [DBG] Connection id "0HMJJG523DUHH" accepted.
2022-08-01 09:47:18.648 +04:00 [DBG] Connection id "0HMJJG523DUHH" received FIN.
2022-08-01 09:47:18.648 +04:00 [DBG] Connection id "0HMJJG523DUHH" started.
2022-08-01 09:47:18.649 +04:00 [DBG] Connection id "0HMJJG523DUHI" accepted.
2022-08-01 09:47:18.652 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 09:47:18.653 +04:00 [DBG] Connection id "0HMJJG523DUHI" started.
2022-08-01 09:47:18.656 +04:00 [DBG] Connection id "0HMJJG523DUHH" stopped.
2022-08-01 09:47:18.658 +04:00 [DBG] Connection id "0HMJJG523DUHH" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 09:47:18.663 +04:00 [DBG] Connection 0HMJJG523DUHI established using the following protocol: "Tls12"
2022-08-01 09:47:18.673 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Register application/json 104
2022-08-01 09:47:18.678 +04:00 [DBG] POST requests are not supported
2022-08-01 09:47:18.679 +04:00 [DBG] POST requests are not supported
2022-08-01 09:47:18.709 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Register'
2022-08-01 09:47:18.715 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)' with route pattern 'Account/Register' is valid for the request path '/Account/Register'
2022-08-01 09:47:18.719 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 09:47:18.765 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 09:47:18.770 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 09:47:18.806 +04:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BookingApi.Models.Request.AccountRegisterRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 09:47:18.810 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 09:47:18.812 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 09:47:18.814 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 09:47:18.816 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 09:47:18.819 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 09:47:18.822 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 09:47:18.991 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 09:47:19.903 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 09:47:19.907 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 09:47:19.920 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 09:47:19.925 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' using the name '' in request data ...
2022-08-01 09:47:19.927 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 09:47:19.931 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000002": started reading request body.
2022-08-01 09:47:19.933 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000002": done reading request body.
2022-08-01 09:47:19.939 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountRegisterRequest'
2022-08-01 09:47:19.942 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 09:47:19.944 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 09:47:19.946 +04:00 [DBG] Attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 09:47:19.978 +04:00 [DBG] Done attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 09:47:20.140 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'UserId.Profile'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:47:20.206 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:47:20.213 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 09:47:20.220 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 09:47:20.231 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 09:47:20.326 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:47:20.627 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:47:20.632 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 09:47:20.647 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 09:47:20.715 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 09:47:20.726 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2022-08-01 09:47:20.751 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 09:47:20.811 +04:00 [INF] Executed DbCommand (64ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 09:47:20.844 +04:00 [DBG] The foreign key property 'Profile.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 09:47:20.861 +04:00 [DBG] A data reader was disposed.
2022-08-01 09:47:20.868 +04:00 [DBG] Committing transaction.
2022-08-01 09:47:20.873 +04:00 [DBG] Committed transaction.
2022-08-01 09:47:20.878 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:47:20.885 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:47:20.888 +04:00 [DBG] Disposing transaction.
2022-08-01 09:47:20.901 +04:00 [DBG] An entity of type 'Profile' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:47:20.906 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 09:47:20.914 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 09:47:20.922 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Register (BookingApi) in 2095.3909ms
2022-08-01 09:47:20.925 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 09:47:20.929 +04:00 [DBG] Connection id "0HMJJG523DUHI" completed keep alive response.
2022-08-01 09:47:20.931 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 09:47:20.936 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Register application/json 104 - 200 0 - 2263.5320ms
2022-08-01 09:47:30.575 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59
2022-08-01 09:47:30.576 +04:00 [DBG] POST requests are not supported
2022-08-01 09:47:30.577 +04:00 [DBG] POST requests are not supported
2022-08-01 09:47:30.580 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 09:47:30.582 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 09:47:30.584 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 09:47:30.587 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 09:47:30.588 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 09:47:30.593 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 09:47:30.596 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 09:47:30.598 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 09:47:30.599 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 09:47:30.601 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 09:47:30.603 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 09:47:30.605 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 09:47:30.655 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 09:47:30.659 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 09:47:30.660 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 09:47:30.662 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 09:47:30.665 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 09:47:30.668 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000003": started reading request body.
2022-08-01 09:47:30.670 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000003": done reading request body.
2022-08-01 09:47:30.672 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 09:47:30.674 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 09:47:30.675 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 09:47:30.676 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 09:47:30.679 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 09:47:30.786 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __password_1)'
2022-08-01 09:47:31.005 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__password_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 09:47:31.062 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 09:47:31.064 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-08-01 09:47:31.066 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:47:31.070 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:47:31.071 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 09:47:31.078 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 09:47:31.102 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:47:31.107 +04:00 [DBG] A data reader was disposed.
2022-08-01 09:47:31.108 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:47:31.110 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:47:31.261 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 09:47:31.266 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 09:47:31.267 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 09:47:31.269 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 09:47:31.271 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 09:47:31.273 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 09:47:31.276 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 671.4596ms
2022-08-01 09:47:31.278 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 09:47:31.279 +04:00 [DBG] Connection id "0HMJJG523DUHI" completed keep alive response.
2022-08-01 09:47:31.281 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 09:47:31.282 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59 - 200 - application/json;+charset=utf-8 707.4663ms
2022-08-01 09:47:59.540 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 216
2022-08-01 09:47:59.542 +04:00 [DBG] POST requests are not supported
2022-08-01 09:47:59.544 +04:00 [DBG] POST requests are not supported
2022-08-01 09:47:59.545 +04:00 [DBG] 1 candidate(s) found for the request path '/Search/Booking'
2022-08-01 09:47:59.546 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)' with route pattern 'Search/Booking' is valid for the request path '/Search/Booking'
2022-08-01 09:47:59.548 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 09:47:59.626 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '7/22/2022 3:58:56 PM', Current time: '8/1/2022 5:47:59 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-01 09:47:59.648 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '7/22/2022 3:58:56 PM', Current time: '8/1/2022 5:47:59 AM'.
2022-08-01 09:47:59.656 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-08-01 09:47:59.665 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-08-01 09:47:59.666 +04:00 [DBG] Connection id "0HMJJG523DUHI" completed keep alive response.
2022-08-01 09:47:59.669 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 216 - 401 0 - 129.0427ms
2022-08-01 09:47:59.671 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000004": started reading request body.
2022-08-01 09:47:59.672 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000004": done reading request body.
2022-08-01 09:48:24.229 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 216
2022-08-01 09:48:24.231 +04:00 [DBG] POST requests are not supported
2022-08-01 09:48:24.231 +04:00 [DBG] POST requests are not supported
2022-08-01 09:48:24.233 +04:00 [DBG] 1 candidate(s) found for the request path '/Search/Booking'
2022-08-01 09:48:24.234 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)' with route pattern 'Search/Booking' is valid for the request path '/Search/Booking'
2022-08-01 09:48:24.237 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 09:48:24.255 +04:00 [DBG] Successfully validated the token.
2022-08-01 09:48:24.258 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 09:48:24.260 +04:00 [DBG] Authorization was successful.
2022-08-01 09:48:24.261 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 09:48:24.265 +04:00 [INF] Route matched with {action = "Booking", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Booking(BookingApi.Models.Request.OrderRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 09:48:24.270 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 09:48:24.271 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 09:48:24.273 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 09:48:24.275 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 09:48:24.276 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 09:48:24.278 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 09:48:24.291 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 09:48:24.294 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 09:48:24.296 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 09:48:24.297 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' using the name '' in request data ...
2022-08-01 09:48:24.299 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 09:48:24.302 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000005": started reading request body.
2022-08-01 09:48:24.304 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000005": done reading request body.
2022-08-01 09:48:24.308 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.OrderRequest'
2022-08-01 09:48:24.309 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 09:48:24.312 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 09:48:24.314 +04:00 [DBG] Attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 09:48:24.383 +04:00 [DBG] Done attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 09:48:24.399 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Order'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:48:24.423 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:48:24.425 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 09:48:24.428 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 09:48:24.434 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 09:48:24.436 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:48:24.438 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:48:24.439 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 09:48:24.440 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 09:48:24.443 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 09:48:24.444 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 09:48:24.447 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 09:48:24.466 +04:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 09:48:24.472 +04:00 [DBG] The foreign key property 'Order.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 09:48:24.475 +04:00 [DBG] A data reader was disposed.
2022-08-01 09:48:24.476 +04:00 [DBG] Committing transaction.
2022-08-01 09:48:24.478 +04:00 [DBG] Committed transaction.
2022-08-01 09:48:24.478 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:48:24.480 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:48:24.481 +04:00 [DBG] Disposing transaction.
2022-08-01 09:48:24.482 +04:00 [DBG] An entity of type 'Order' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:48:24.485 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 09:48:24.487 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 09:48:24.488 +04:00 [INF] Executed action BookingApi.Controllers.SearchController.Booking (BookingApi) in 210.2367ms
2022-08-01 09:48:24.489 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 09:48:24.491 +04:00 [DBG] Connection id "0HMJJG523DUHI" completed keep alive response.
2022-08-01 09:48:24.492 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 09:48:24.493 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 216 - 200 0 - 263.6001ms
2022-08-01 09:48:43.721 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Profile/AddApartment application/json 258
2022-08-01 09:48:43.723 +04:00 [DBG] POST requests are not supported
2022-08-01 09:48:43.724 +04:00 [DBG] POST requests are not supported
2022-08-01 09:48:43.726 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 09:48:43.728 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 09:48:43.730 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 09:48:43.732 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '7/22/2022 3:41:12 PM', Current time: '8/1/2022 5:48:43 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-01 09:48:43.740 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '7/22/2022 3:41:12 PM', Current time: '8/1/2022 5:48:43 AM'.
2022-08-01 09:48:43.743 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-08-01 09:48:43.745 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-08-01 09:48:43.746 +04:00 [DBG] Connection id "0HMJJG523DUHI" completed keep alive response.
2022-08-01 09:48:43.747 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Profile/AddApartment application/json 258 - 401 0 - 25.9267ms
2022-08-01 09:48:43.748 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000006": started reading request body.
2022-08-01 09:48:43.749 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000006": done reading request body.
2022-08-01 09:48:50.555 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Profile/AddApartment application/json 258
2022-08-01 09:48:50.557 +04:00 [DBG] POST requests are not supported
2022-08-01 09:48:50.558 +04:00 [DBG] POST requests are not supported
2022-08-01 09:48:50.561 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 09:48:50.562 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 09:48:50.565 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 09:48:50.566 +04:00 [DBG] Successfully validated the token.
2022-08-01 09:48:50.568 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 09:48:50.572 +04:00 [DBG] Authorization was successful.
2022-08-01 09:48:50.574 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 09:48:50.580 +04:00 [INF] Route matched with {action = "AddApartment", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddApartment(BookingApi.Models.Request.ApartmentRequest) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 09:48:50.583 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 09:48:50.585 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 09:48:50.587 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 09:48:50.591 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 09:48:50.592 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 09:48:50.594 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 09:48:50.600 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 09:48:50.608 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 09:48:50.610 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 09:48:50.612 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' using the name '' in request data ...
2022-08-01 09:48:50.613 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 09:48:50.615 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000007": started reading request body.
2022-08-01 09:48:50.617 +04:00 [DBG] Connection id "0HMJJG523DUHI", Request id "0HMJJG523DUHI:00000007": done reading request body.
2022-08-01 09:48:50.622 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.ApartmentRequest'
2022-08-01 09:48:50.623 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 09:48:50.625 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 09:48:50.627 +04:00 [DBG] Attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 09:48:50.633 +04:00 [DBG] Done attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 09:48:50.650 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Apartment'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:48:50.673 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:48:50.675 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 09:48:50.677 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 09:48:50.682 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 09:48:50.683 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:48:50.685 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:48:50.687 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 09:48:50.689 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 09:48:50.690 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 09:48:50.691 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-08-01 09:48:50.693 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 09:48:50.701 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 09:48:50.706 +04:00 [DBG] The foreign key property 'Apartment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 09:48:50.708 +04:00 [DBG] A data reader was disposed.
2022-08-01 09:48:50.708 +04:00 [DBG] Committing transaction.
2022-08-01 09:48:50.710 +04:00 [DBG] Committed transaction.
2022-08-01 09:48:50.711 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:48:50.712 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:48:50.713 +04:00 [DBG] Disposing transaction.
2022-08-01 09:48:50.715 +04:00 [DBG] An entity of type 'Apartment' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:48:50.717 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 09:48:50.718 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 09:48:50.720 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.AddApartment (BookingApi) in 126.1903ms
2022-08-01 09:48:50.721 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 09:48:50.723 +04:00 [DBG] Connection id "0HMJJG523DUHI" completed keep alive response.
2022-08-01 09:48:50.724 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 09:48:50.725 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Profile/AddApartment application/json 258 - 200 0 - 170.4500ms
2022-08-01 09:49:06.724 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7058/Profile/1 - -
2022-08-01 09:49:06.726 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 09:49:06.729 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 09:49:06.731 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 09:49:06.732 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 09:49:06.734 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 09:49:06.738 +04:00 [DBG] Successfully validated the token.
2022-08-01 09:49:06.739 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 09:49:06.740 +04:00 [DBG] Authorization was successful.
2022-08-01 09:49:06.741 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 09:49:06.751 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 09:49:06.754 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 09:49:06.756 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 09:49:06.757 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 09:49:06.760 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 09:49:06.761 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 09:49:06.762 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 09:49:06.765 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 09:49:06.767 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 09:49:06.768 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 09:49:06.771 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 09:49:06.773 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 09:49:06.774 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 09:49:06.776 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 09:49:06.778 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 09:49:06.798 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Where(x => x.UserId == __userId_0)
    .Include(x => x.Apartment)
    .Include(x => x.Order)'
2022-08-01 09:49:06.819 +04:00 [DBG] Including navigation: 'Profile.Apartment'.
2022-08-01 09:49:06.823 +04:00 [DBG] Including navigation: 'Profile.Order'.
2022-08-01 09:49:06.933 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Profile>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            1 -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Apartment.Address (string) Required, 8], [Property: Apartment.City (string), 9], [Property: Apartment.Description (string), 10], [Property: Apartment.DistanceToCenter (int) Required, 11], [Property: Apartment.From (DateTime) Required, 12], [Property: Apartment.HostId (int) Required FK Index, 13], [Property: Apartment.IsAvailable (bool) Required, 14], [Property: Apartment.NumbOfBeds (int) Required, 15], [Property: Apartment.Photo (string), 16], [Property: Apartment.To (DateTime) Required, 17] }
            2 -> 0
            3 -> 7
            4 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Order.City (string) Required, 19], [Property: Order.CustomerId (int) Required, 20], [Property: Order.FirstName (string) Required, 21], [Property: Order.From (DateTime) Required, 22], [Property: Order.HostId (int) Required FK Index, 23], [Property: Order.LastName (string) Required, 24], [Property: Order.Status (int?), 25], [Property: Order.To (DateTime) Required, 26] }
            5 -> 18
        SELECT p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo, a.Id, a.Address, a.City, a.Description, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo, a.To, o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
        FROM Profile AS p
        LEFT JOIN Apartments AS a ON p.UserId == a.HostId
        LEFT JOIN Orders AS o ON p.UserId == o.HostId
        WHERE p.UserId == @__userId_0
        ORDER BY p.UserId ASC, a.Id ASC), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 09:49:06.940 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 09:49:06.941 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 09:49:06.943 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:49:06.944 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:49:06.945 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Profile] AS [p]
LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
LEFT JOIN [Orders] AS [o] ON [p].[UserId] = [o].[HostId]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[UserId], [a].[Id]
2022-08-01 09:49:06.953 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Profile] AS [p]
LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
LEFT JOIN [Orders] AS [o] ON [p].[UserId] = [o].[HostId]
WHERE [p].[UserId] = @__userId_0
ORDER BY [p].[UserId], [a].[Id]
2022-08-01 09:49:06.960 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:49:06.964 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:49:06.976 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 09:49:06.983 +04:00 [DBG] A data reader was disposed.
2022-08-01 09:49:06.984 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:49:06.986 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 09:49:07.032 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 09:49:07.035 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 09:49:07.037 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 09:49:07.038 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 09:49:07.040 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 09:49:07.041 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookingApi.Models.DTO.ProfileDTO, BookingApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-01 09:49:07.061 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 298.697ms
2022-08-01 09:49:07.063 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 09:49:07.065 +04:00 [DBG] Connection id "0HMJJG523DUHI" completed keep alive response.
2022-08-01 09:49:07.066 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 09:49:07.067 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7058/Profile/1 - - - 200 - application/json;+charset=utf-8 343.3467ms
2022-08-01 09:49:19.876 +04:00 [DBG] Connection id "0HMJJG523DUHG" is closing.
2022-08-01 09:49:19.878 +04:00 [DBG] Connection id "0HMJJG523DUHG" is closed. The last processed stream ID was 7.
2022-08-01 09:49:19.880 +04:00 [DBG] Connection id "0HMJJG523DUHG" received FIN.
2022-08-01 09:49:19.881 +04:00 [DBG] Connection id "0HMJJG523DUHG" sending FIN because: "The client closed the connection."
2022-08-01 09:49:19.884 +04:00 [DBG] Connection id "0HMJJG523DUHG" stopped.
2022-08-01 09:51:17.754 +04:00 [DBG] Connection id "0HMJJG523DUHI" disconnecting.
2022-08-01 09:51:17.755 +04:00 [DBG] Connection id "0HMJJG523DUHI" stopped.
2022-08-01 09:51:17.757 +04:00 [DBG] Connection id "0HMJJG523DUHI" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:07:04.247 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 10:07:04.342 +04:00 [DBG] Hosting starting
2022-08-01 10:07:04.362 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 10:07:04.367 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 10:07:04.373 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 10:07:04.380 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 10:07:04.386 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 10:07:04.395 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 10:07:04.399 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:07:04.403 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 10:07:04.406 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:07:04.412 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 10:07:04.418 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 10:07:04.424 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 10:07:04.426 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 10:07:04.513 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 10:07:04.550 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 10:07:04.551 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 10:07:04.552 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 10:07:04.553 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 10:07:04.554 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 10:07:04.555 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 10:07:04.556 +04:00 [INF] Hosting environment: Development
2022-08-01 10:07:04.557 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 10:07:04.558 +04:00 [DBG] Hosting started
2022-08-01 10:07:04.602 +04:00 [DBG] Connection id "0HMJJGG7BB84F" accepted.
2022-08-01 10:07:04.606 +04:00 [DBG] Connection id "0HMJJGG7BB84F" started.
2022-08-01 10:07:04.660 +04:00 [DBG] Connection 0HMJJGG7BB84F established using the following protocol: "Tls12"
2022-08-01 10:07:04.707 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 10:07:04.733 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 10:07:04.826 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 10:07:04.840 +04:00 [DBG] Connection id "0HMJJGG7BB84G" accepted.
2022-08-01 10:07:04.842 +04:00 [DBG] Connection id "0HMJJGG7BB84G" started.
2022-08-01 10:07:04.847 +04:00 [DBG] Connection 0HMJJGG7BB84G established using the following protocol: "Tls12"
2022-08-01 10:07:04.916 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 10:07:04.923 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 219.4083ms
2022-08-01 10:07:04.965 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 10:07:04.970 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 5.4274ms
2022-08-01 10:07:04.973 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 10:07:04.993 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 20.4543ms
2022-08-01 10:07:05.292 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 10:07:05.421 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 128.5996ms
2022-08-01 10:07:07.034 +04:00 [DBG] Connection id "0HMJJGG7BB84H" accepted.
2022-08-01 10:07:07.035 +04:00 [DBG] Connection id "0HMJJGG7BB84H" received FIN.
2022-08-01 10:07:07.036 +04:00 [DBG] Connection id "0HMJJGG7BB84H" started.
2022-08-01 10:07:07.036 +04:00 [DBG] Connection id "0HMJJGG7BB84I" accepted.
2022-08-01 10:07:07.041 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:07:07.041 +04:00 [DBG] Connection id "0HMJJGG7BB84I" started.
2022-08-01 10:07:07.061 +04:00 [DBG] Connection id "0HMJJGG7BB84H" stopped.
2022-08-01 10:07:07.062 +04:00 [DBG] Connection id "0HMJJGG7BB84H" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:07:07.065 +04:00 [DBG] Connection 0HMJJGG7BB84I established using the following protocol: "Tls12"
2022-08-01 10:07:07.077 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7058/Profile/1 - -
2022-08-01 10:07:07.079 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 10:07:07.081 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 10:07:07.106 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 10:07:07.112 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 10:07:07.116 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:07:07.283 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '8/1/2022 5:57:31 AM', Current time: '8/1/2022 6:07:07 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-01 10:07:07.297 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '8/1/2022 5:57:31 AM', Current time: '8/1/2022 6:07:07 AM'.
2022-08-01 10:07:07.303 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-08-01 10:07:07.313 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-08-01 10:07:07.317 +04:00 [DBG] Connection id "0HMJJGG7BB84I" completed keep alive response.
2022-08-01 10:07:07.318 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7058/Profile/1 - - - 401 0 - 241.7258ms
2022-08-01 10:07:12.669 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59
2022-08-01 10:07:12.670 +04:00 [DBG] POST requests are not supported
2022-08-01 10:07:12.671 +04:00 [DBG] POST requests are not supported
2022-08-01 10:07:12.673 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 10:07:12.675 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 10:07:12.677 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:07:12.680 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 10:07:12.682 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:07:12.716 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 10:07:12.719 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:07:12.721 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:07:12.724 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:07:12.726 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:07:12.728 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:07:12.730 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 10:07:12.840 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 10:07:13.766 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:07:13.772 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 10:07:13.779 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 10:07:13.782 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 10:07:13.785 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 10:07:13.789 +04:00 [DBG] Connection id "0HMJJGG7BB84I", Request id "0HMJJGG7BB84I:00000003": started reading request body.
2022-08-01 10:07:13.792 +04:00 [DBG] Connection id "0HMJJGG7BB84I", Request id "0HMJJGG7BB84I:00000003": done reading request body.
2022-08-01 10:07:13.797 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 10:07:13.800 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:07:13.801 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:07:13.803 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 10:07:13.821 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:07:13.916 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __password_1)'
2022-08-01 10:07:14.136 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__password_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 10:07:14.196 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:07:14.229 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (28ms).
2022-08-01 10:07:14.246 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:14.465 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:14.480 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 10:07:14.545 +04:00 [INF] Executed DbCommand (69ms) [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 10:07:14.603 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:07:14.646 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:07:14.650 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:14.659 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:14.709 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:07:14.713 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:07:14.714 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:07:14.715 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:07:14.717 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:07:14.718 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 10:07:14.728 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 1992.4964ms
2022-08-01 10:07:14.730 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:07:14.732 +04:00 [DBG] Connection id "0HMJJGG7BB84I" completed keep alive response.
2022-08-01 10:07:14.735 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:07:14.738 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59 - 200 - application/json;+charset=utf-8 2069.4741ms
2022-08-01 10:07:39.739 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7058/Profile/1 - -
2022-08-01 10:07:39.747 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 10:07:39.748 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 10:07:39.752 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 10:07:39.754 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 10:07:39.756 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:07:39.777 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:07:39.779 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:07:39.782 +04:00 [DBG] Authorization was successful.
2022-08-01 10:07:39.783 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:07:39.788 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 10:07:39.791 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:07:39.793 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:07:39.795 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:07:39.797 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:07:39.798 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:07:39.800 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:07:39.852 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:07:39.856 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:07:39.859 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:07:39.861 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 10:07:39.863 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:07:39.864 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:07:39.865 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:07:39.867 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 10:07:39.879 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Where(x => x.UserId == __userId_0)
    .Include(x => x.Apartment)
    .Include(x => x.Order)
    .SingleOrDefault()'
2022-08-01 10:07:39.900 +04:00 [DBG] Including navigation: 'Profile.Apartment'.
2022-08-01 10:07:39.904 +04:00 [DBG] Including navigation: 'Profile.Order'.
2022-08-01 10:07:40.026 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
                1 -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Apartment.Address (string) Required, 8], [Property: Apartment.City (string), 9], [Property: Apartment.Description (string), 10], [Property: Apartment.DistanceToCenter (int) Required, 11], [Property: Apartment.From (DateTime) Required, 12], [Property: Apartment.HostId (int) Required FK Index, 13], [Property: Apartment.IsAvailable (bool) Required, 14], [Property: Apartment.NumbOfBeds (int) Required, 15], [Property: Apartment.Photo (string), 16], [Property: Apartment.To (DateTime) Required, 17] }
                2 -> 0
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Order.City (string) Required, 19], [Property: Order.CustomerId (int) Required, 20], [Property: Order.FirstName (string) Required, 21], [Property: Order.From (DateTime) Required, 22], [Property: Order.HostId (int) Required FK Index, 23], [Property: Order.LastName (string) Required, 24], [Property: Order.Status (int?), 25], [Property: Order.To (DateTime) Required, 26] }
                5 -> 18
            SELECT t.UserId, t.Description, t.Email, t.FirstName, t.LastName, t.Password, t.Photo, t.Id, t.Address, t.City, t.Description0, t.DistanceToCenter, t.From, t.HostId, t.IsAvailable, t.NumbOfBeds, t.Photo0, t.To, o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
            FROM 
            (
                SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo, a.Id, a.Address, a.City, a.Description AS Description0, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo AS Photo0, a.To
                FROM Profile AS p
                LEFT JOIN Apartments AS a ON p.UserId == a.HostId
                WHERE p.UserId == @__userId_0
            ) AS t
            LEFT JOIN Orders AS o ON t.UserId == o.HostId
            ORDER BY t.UserId ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 10:07:40.034 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:07:40.036 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:07:40.038 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:40.040 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:40.043 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:07:40.054 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:07:40.062 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:07:40.068 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:07:40.113 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:07:40.133 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:07:40.135 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:40.136 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:40.145 +04:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Where(x => x.CustomerId == __customerId_0)'
2022-08-01 10:07:40.152 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.City (string) Required, 1], [Property: Order.CustomerId (int) Required, 2], [Property: Order.FirstName (string) Required, 3], [Property: Order.From (DateTime) Required, 4], [Property: Order.HostId (int) Required FK Index, 5], [Property: Order.LastName (string) Required, 6], [Property: Order.Status (int?), 7], [Property: Order.To (DateTime) Required, 8] }
        SELECT o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
        FROM Orders AS o
        WHERE o.CustomerId == @__customerId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 10:07:40.159 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:07:40.160 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:07:40.161 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:40.163 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:40.164 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:07:40.183 +04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:07:40.188 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:07:40.188 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:40.190 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:07:40.319 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:07:40.323 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:07:40.324 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:07:40.326 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:07:40.327 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:07:40.328 +04:00 [INF] Executing OkObjectResult, writing value of type 'BookingApi.Models.DTO.ProfileDTO'.
2022-08-01 10:07:40.347 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 547.5528ms
2022-08-01 10:07:40.349 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:07:40.351 +04:00 [DBG] Connection id "0HMJJGG7BB84I" completed keep alive response.
2022-08-01 10:07:40.353 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:07:40.354 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7058/Profile/1 - - - 200 - application/json;+charset=utf-8 614.6585ms
2022-08-01 10:08:10.482 +04:00 [DBG] Connection id "0HMJJGG7BB84G" received FIN.
2022-08-01 10:08:10.486 +04:00 [DBG] Connection id "0HMJJGG7BB84G" is closed. The last processed stream ID was 0.
2022-08-01 10:08:10.490 +04:00 [DBG] Connection id "0HMJJGG7BB84G" sending FIN because: "The client closed the connection."
2022-08-01 10:08:10.504 +04:00 [DBG] Connection id "0HMJJGG7BB84G" stopped.
2022-08-01 10:08:51.743 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 10:08:51.848 +04:00 [DBG] Hosting starting
2022-08-01 10:08:51.867 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 10:08:51.872 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 10:08:51.878 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 10:08:51.885 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 10:08:51.890 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 10:08:51.899 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 10:08:51.902 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:08:51.906 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 10:08:51.909 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:08:51.915 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 10:08:51.919 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 10:08:51.924 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 10:08:51.927 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 10:08:52.008 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 10:08:52.046 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 10:08:52.048 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 10:08:52.050 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 10:08:52.051 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 10:08:52.052 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 10:08:52.053 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 10:08:52.054 +04:00 [INF] Hosting environment: Development
2022-08-01 10:08:52.055 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 10:08:52.056 +04:00 [DBG] Hosting started
2022-08-01 10:08:52.295 +04:00 [DBG] Connection id "0HMJJGH7ECQKI" received FIN.
2022-08-01 10:08:52.296 +04:00 [DBG] Connection id "0HMJJGH7ECQKJ" reset.
2022-08-01 10:08:52.305 +04:00 [DBG] Connection id "0HMJJGH7ECQKJ" accepted.
2022-08-01 10:08:52.305 +04:00 [DBG] Connection id "0HMJJGH7ECQKI" accepted.
2022-08-01 10:08:52.306 +04:00 [DBG] Connection id "0HMJJGH7ECQKJ" started.
2022-08-01 10:08:52.307 +04:00 [DBG] Connection id "0HMJJGH7ECQKI" started.
2022-08-01 10:08:52.309 +04:00 [DBG] Connection id "0HMJJGH7ECQKK" accepted.
2022-08-01 10:08:52.311 +04:00 [DBG] Connection id "0HMJJGH7ECQKK" started.
2022-08-01 10:08:52.323 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:08:52.332 +04:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException: An existing connection was forcibly closed by the remote host.
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.ReadAsync(CancellationToken token)
   at System.IO.Pipelines.Pipe.DefaultPipeReader.ReadAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:08:52.352 +04:00 [DBG] Connection id "0HMJJGH7ECQKI" stopped.
2022-08-01 10:08:52.365 +04:00 [DBG] Connection id "0HMJJGH7ECQKJ" stopped.
2022-08-01 10:08:52.367 +04:00 [DBG] Connection id "0HMJJGH7ECQKI" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:08:52.368 +04:00 [DBG] Connection id "0HMJJGH7ECQKJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:08:52.370 +04:00 [DBG] Connection 0HMJJGH7ECQKK established using the following protocol: "Tls12"
2022-08-01 10:08:52.425 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 10:08:52.454 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 10:08:52.557 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 10:08:52.660 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 10:08:52.662 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 10:08:52.662 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 10:08:52.666 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 244.6689ms
2022-08-01 10:08:52.669 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 6.5223ms
2022-08-01 10:08:52.688 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 26.2005ms
2022-08-01 10:08:53.087 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 10:08:53.195 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 108.0776ms
2022-08-01 10:08:56.113 +04:00 [DBG] Connection id "0HMJJGH7ECQKL" accepted.
2022-08-01 10:08:56.114 +04:00 [DBG] Connection id "0HMJJGH7ECQKL" received FIN.
2022-08-01 10:08:56.114 +04:00 [DBG] Connection id "0HMJJGH7ECQKL" started.
2022-08-01 10:08:56.115 +04:00 [DBG] Connection id "0HMJJGH7ECQKM" accepted.
2022-08-01 10:08:56.117 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:08:56.118 +04:00 [DBG] Connection id "0HMJJGH7ECQKM" started.
2022-08-01 10:08:56.121 +04:00 [DBG] Connection id "0HMJJGH7ECQKL" stopped.
2022-08-01 10:08:56.123 +04:00 [DBG] Connection id "0HMJJGH7ECQKL" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:08:56.128 +04:00 [DBG] Connection 0HMJJGH7ECQKM established using the following protocol: "Tls12"
2022-08-01 10:08:56.139 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7058/Profile/1 - -
2022-08-01 10:08:56.142 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 10:08:56.144 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 10:08:56.171 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 10:08:56.177 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 10:08:56.179 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:08:56.385 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:08:56.388 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:08:56.395 +04:00 [DBG] Authorization was successful.
2022-08-01 10:08:56.398 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:08:56.430 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 10:08:56.435 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:08:56.436 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:08:56.438 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:08:56.440 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:08:56.441 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:08:56.444 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:08:56.550 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 10:08:57.445 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:08:57.450 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:08:57.455 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:08:57.460 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 10:08:57.462 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:08:57.463 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:08:57.464 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:08:57.482 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 10:08:57.584 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Where(x => x.UserId == __userId_0)
    .Include(x => x.Apartment)
    .Include(x => x.Order)
    .SingleOrDefault()'
2022-08-01 10:08:57.672 +04:00 [DBG] Including navigation: 'Profile.Apartment'.
2022-08-01 10:08:57.677 +04:00 [DBG] Including navigation: 'Profile.Order'.
2022-08-01 10:08:57.954 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
                1 -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Apartment.Address (string) Required, 8], [Property: Apartment.City (string), 9], [Property: Apartment.Description (string), 10], [Property: Apartment.DistanceToCenter (int) Required, 11], [Property: Apartment.From (DateTime) Required, 12], [Property: Apartment.HostId (int) Required FK Index, 13], [Property: Apartment.IsAvailable (bool) Required, 14], [Property: Apartment.NumbOfBeds (int) Required, 15], [Property: Apartment.Photo (string), 16], [Property: Apartment.To (DateTime) Required, 17] }
                2 -> 0
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Order.City (string) Required, 19], [Property: Order.CustomerId (int) Required, 20], [Property: Order.FirstName (string) Required, 21], [Property: Order.From (DateTime) Required, 22], [Property: Order.HostId (int) Required FK Index, 23], [Property: Order.LastName (string) Required, 24], [Property: Order.Status (int?), 25], [Property: Order.To (DateTime) Required, 26] }
                5 -> 18
            SELECT t.UserId, t.Description, t.Email, t.FirstName, t.LastName, t.Password, t.Photo, t.Id, t.Address, t.City, t.Description0, t.DistanceToCenter, t.From, t.HostId, t.IsAvailable, t.NumbOfBeds, t.Photo0, t.To, o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
            FROM 
            (
                SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo, a.Id, a.Address, a.City, a.Description AS Description0, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo AS Photo0, a.To
                FROM Profile AS p
                LEFT JOIN Apartments AS a ON p.UserId == a.HostId
                WHERE p.UserId == @__userId_0
            ) AS t
            LEFT JOIN Orders AS o ON t.UserId == o.HostId
            ORDER BY t.UserId ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 10:08:58.006 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:08:58.043 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (31ms).
2022-08-01 10:08:58.058 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:08:58.315 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:08:58.330 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:08:58.403 +04:00 [INF] Executed DbCommand (76ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:08:58.473 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:08:58.514 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:08:58.557 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:08:58.587 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:08:58.591 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:08:58.598 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:08:58.607 +04:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Where(x => x.CustomerId == __customerId_0)'
2022-08-01 10:08:58.613 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.City (string) Required, 1], [Property: Order.CustomerId (int) Required, 2], [Property: Order.FirstName (string) Required, 3], [Property: Order.From (DateTime) Required, 4], [Property: Order.HostId (int) Required FK Index, 5], [Property: Order.LastName (string) Required, 6], [Property: Order.Status (int?), 7], [Property: Order.To (DateTime) Required, 8] }
        SELECT o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
        FROM Orders AS o
        WHERE o.CustomerId == @__customerId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 10:08:58.617 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:08:58.619 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:08:58.620 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:08:58.623 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:08:58.624 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:08:58.632 +04:00 [INF] Executed DbCommand (9ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:08:58.637 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:08:58.638 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:08:58.639 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:08:58.795 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:08:58.801 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:08:58.802 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:08:58.803 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:08:58.805 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:08:58.806 +04:00 [INF] Executing OkObjectResult, writing value of type 'BookingApi.Models.DTO.ProfileDTO'.
2022-08-01 10:08:58.827 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 2377.7357ms
2022-08-01 10:08:58.830 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:08:58.832 +04:00 [DBG] Connection id "0HMJJGH7ECQKM" completed keep alive response.
2022-08-01 10:08:58.835 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:08:58.839 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7058/Profile/1 - - - 200 - application/json;+charset=utf-8 2700.3836ms
2022-08-01 10:11:05.880 +04:00 [DBG] Connection id "0HMJJGH7ECQKK" is closing.
2022-08-01 10:11:05.882 +04:00 [DBG] Connection id "0HMJJGH7ECQKK" is closed. The last processed stream ID was 7.
2022-08-01 10:11:05.884 +04:00 [DBG] Connection id "0HMJJGH7ECQKK" received FIN.
2022-08-01 10:11:05.886 +04:00 [DBG] Connection id "0HMJJGH7ECQKK" stopped.
2022-08-01 10:11:05.887 +04:00 [DBG] Connection id "0HMJJGH7ECQKK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:11:09.905 +04:00 [DBG] Connection id "0HMJJGH7ECQKM" disconnecting.
2022-08-01 10:11:09.906 +04:00 [DBG] Connection id "0HMJJGH7ECQKM" stopped.
2022-08-01 10:11:09.907 +04:00 [DBG] Connection id "0HMJJGH7ECQKM" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:13:31.065 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 10:13:31.178 +04:00 [DBG] Hosting starting
2022-08-01 10:13:31.199 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 10:13:31.203 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 10:13:31.209 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 10:13:31.218 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 10:13:31.224 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 10:13:31.234 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 10:13:31.237 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:13:31.243 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 10:13:31.245 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:13:31.252 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 10:13:31.256 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 10:13:31.262 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 10:13:31.266 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 10:13:31.349 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 10:13:31.390 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 10:13:31.392 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 10:13:31.394 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 10:13:31.395 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 10:13:31.396 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 10:13:31.397 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 10:13:31.398 +04:00 [INF] Hosting environment: Development
2022-08-01 10:13:31.399 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 10:13:31.401 +04:00 [DBG] Hosting started
2022-08-01 10:13:31.622 +04:00 [DBG] Connection id "0HMJJGJQM893Q" accepted.
2022-08-01 10:13:31.622 +04:00 [DBG] Connection id "0HMJJGJQM893R" accepted.
2022-08-01 10:13:31.625 +04:00 [DBG] Connection id "0HMJJGJQM893Q" started.
2022-08-01 10:13:31.625 +04:00 [DBG] Connection id "0HMJJGJQM893R" started.
2022-08-01 10:13:31.628 +04:00 [DBG] Connection id "0HMJJGJQM893R" received FIN.
2022-08-01 10:13:31.628 +04:00 [DBG] Connection id "0HMJJGJQM893Q" received FIN.
2022-08-01 10:13:31.633 +04:00 [DBG] Connection id "0HMJJGJQM893S" accepted.
2022-08-01 10:13:31.637 +04:00 [DBG] Connection id "0HMJJGJQM893S" started.
2022-08-01 10:13:31.644 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:13:31.644 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:13:31.671 +04:00 [DBG] Connection id "0HMJJGJQM893Q" stopped.
2022-08-01 10:13:31.672 +04:00 [DBG] Connection id "0HMJJGJQM893R" stopped.
2022-08-01 10:13:31.675 +04:00 [DBG] Connection id "0HMJJGJQM893Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:13:31.676 +04:00 [DBG] Connection id "0HMJJGJQM893R" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:13:31.693 +04:00 [DBG] Connection 0HMJJGJQM893S established using the following protocol: "Tls12"
2022-08-01 10:13:31.750 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 10:13:31.778 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 10:13:31.883 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 10:13:31.972 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 10:13:31.975 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 10:13:31.975 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 10:13:31.977 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 231.1522ms
2022-08-01 10:13:31.982 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 7.6173ms
2022-08-01 10:13:31.994 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 18.9569ms
2022-08-01 10:13:32.382 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 10:13:32.545 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.3831ms
2022-08-01 10:13:35.348 +04:00 [DBG] Connection id "0HMJJGJQM893T" accepted.
2022-08-01 10:13:35.350 +04:00 [DBG] Connection id "0HMJJGJQM893T" started.
2022-08-01 10:13:35.350 +04:00 [DBG] Connection id "0HMJJGJQM893U" accepted.
2022-08-01 10:13:35.351 +04:00 [DBG] Connection id "0HMJJGJQM893T" received FIN.
2022-08-01 10:13:35.353 +04:00 [DBG] Connection id "0HMJJGJQM893U" started.
2022-08-01 10:13:35.355 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:13:35.360 +04:00 [DBG] Connection id "0HMJJGJQM893T" stopped.
2022-08-01 10:13:35.361 +04:00 [DBG] Connection 0HMJJGJQM893U established using the following protocol: "Tls12"
2022-08-01 10:13:35.361 +04:00 [DBG] Connection id "0HMJJGJQM893T" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:13:35.375 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7058/Profile/1 - -
2022-08-01 10:13:35.379 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 10:13:35.382 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 10:13:35.411 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 10:13:35.417 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 10:13:35.420 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:13:35.628 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:13:35.631 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:13:35.638 +04:00 [DBG] Authorization was successful.
2022-08-01 10:13:35.641 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:13:35.676 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 10:13:35.681 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:13:35.683 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:13:35.685 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:13:35.687 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:13:35.688 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:13:35.691 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:13:35.801 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 10:13:36.706 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:13:36.713 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:13:36.721 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:13:36.725 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 10:13:36.727 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:13:36.729 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:13:36.732 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:13:36.748 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 10:13:36.847 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Where(x => x.UserId == __userId_0)
    .Include(x => x.Apartment)
    .Include(x => x.Order)
    .SingleOrDefault()'
2022-08-01 10:13:36.933 +04:00 [DBG] Including navigation: 'Profile.Apartment'.
2022-08-01 10:13:36.935 +04:00 [DBG] Including navigation: 'Profile.Order'.
2022-08-01 10:13:37.206 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
                1 -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Apartment.Address (string) Required, 8], [Property: Apartment.City (string), 9], [Property: Apartment.Description (string), 10], [Property: Apartment.DistanceToCenter (int) Required, 11], [Property: Apartment.From (DateTime) Required, 12], [Property: Apartment.HostId (int) Required FK Index, 13], [Property: Apartment.IsAvailable (bool) Required, 14], [Property: Apartment.NumbOfBeds (int) Required, 15], [Property: Apartment.Photo (string), 16], [Property: Apartment.To (DateTime) Required, 17] }
                2 -> 0
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Order.City (string) Required, 19], [Property: Order.CustomerId (int) Required, 20], [Property: Order.FirstName (string) Required, 21], [Property: Order.From (DateTime) Required, 22], [Property: Order.HostId (int) Required FK Index, 23], [Property: Order.LastName (string) Required, 24], [Property: Order.Status (int?), 25], [Property: Order.To (DateTime) Required, 26] }
                5 -> 18
            SELECT t.UserId, t.Description, t.Email, t.FirstName, t.LastName, t.Password, t.Photo, t.Id, t.Address, t.City, t.Description0, t.DistanceToCenter, t.From, t.HostId, t.IsAvailable, t.NumbOfBeds, t.Photo0, t.To, o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
            FROM 
            (
                SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo, a.Id, a.Address, a.City, a.Description AS Description0, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo AS Photo0, a.To
                FROM Profile AS p
                LEFT JOIN Apartments AS a ON p.UserId == a.HostId
                WHERE p.UserId == @__userId_0
            ) AS t
            LEFT JOIN Orders AS o ON t.UserId == o.HostId
            ORDER BY t.UserId ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 10:13:37.259 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:13:37.292 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (28ms).
2022-08-01 10:13:37.308 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:13:37.533 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:13:37.548 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:13:37.618 +04:00 [INF] Executed DbCommand (73ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:13:37.675 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:13:37.713 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:13:37.757 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:13:37.785 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:13:37.791 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:13:37.797 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:13:37.807 +04:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Where(x => x.CustomerId == __customerId_0)'
2022-08-01 10:13:37.813 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.City (string) Required, 1], [Property: Order.CustomerId (int) Required, 2], [Property: Order.FirstName (string) Required, 3], [Property: Order.From (DateTime) Required, 4], [Property: Order.HostId (int) Required FK Index, 5], [Property: Order.LastName (string) Required, 6], [Property: Order.Status (int?), 7], [Property: Order.To (DateTime) Required, 8] }
        SELECT o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
        FROM Orders AS o
        WHERE o.CustomerId == @__customerId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 10:13:37.818 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:13:37.819 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:13:37.820 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:13:37.823 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:13:37.824 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:13:37.829 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:13:37.834 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:13:37.835 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:13:37.837 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:13:37.967 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:13:37.973 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:13:37.974 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:13:37.976 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:13:37.978 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:13:37.980 +04:00 [INF] Executing OkObjectResult, writing value of type 'BookingApi.Models.DTO.ProfileDTO'.
2022-08-01 10:13:38.000 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 2304.9015ms
2022-08-01 10:13:38.003 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:13:38.005 +04:00 [DBG] Connection id "0HMJJGJQM893U" completed keep alive response.
2022-08-01 10:13:38.008 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:13:38.011 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7058/Profile/1 - - - 200 - application/json;+charset=utf-8 2636.2481ms
2022-08-01 10:14:23.418 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 216
2022-08-01 10:14:23.420 +04:00 [DBG] POST requests are not supported
2022-08-01 10:14:23.420 +04:00 [DBG] POST requests are not supported
2022-08-01 10:14:23.423 +04:00 [DBG] 1 candidate(s) found for the request path '/Search/Booking'
2022-08-01 10:14:23.424 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)' with route pattern 'Search/Booking' is valid for the request path '/Search/Booking'
2022-08-01 10:14:23.426 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:14:23.434 +04:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '8/1/2022 5:57:31 AM', Current time: '8/1/2022 6:14:23 AM'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2022-08-01 10:14:23.447 +04:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '8/1/2022 5:57:31 AM', Current time: '8/1/2022 6:14:23 AM'.
2022-08-01 10:14:23.450 +04:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2022-08-01 10:14:23.460 +04:00 [INF] AuthenticationScheme: Bearer was challenged.
2022-08-01 10:14:23.461 +04:00 [DBG] Connection id "0HMJJGJQM893U" completed keep alive response.
2022-08-01 10:14:23.463 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 216 - 401 0 - 44.7881ms
2022-08-01 10:14:23.465 +04:00 [DBG] Connection id "0HMJJGJQM893U", Request id "0HMJJGJQM893U:00000003": started reading request body.
2022-08-01 10:14:23.468 +04:00 [DBG] Connection id "0HMJJGJQM893U", Request id "0HMJJGJQM893U:00000003": done reading request body.
2022-08-01 10:14:44.597 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 216
2022-08-01 10:14:44.598 +04:00 [DBG] POST requests are not supported
2022-08-01 10:14:44.600 +04:00 [DBG] POST requests are not supported
2022-08-01 10:14:44.602 +04:00 [DBG] 1 candidate(s) found for the request path '/Search/Booking'
2022-08-01 10:14:44.603 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)' with route pattern 'Search/Booking' is valid for the request path '/Search/Booking'
2022-08-01 10:14:44.605 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:14:44.609 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:14:44.610 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:14:44.613 +04:00 [DBG] Authorization was successful.
2022-08-01 10:14:44.614 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:14:44.622 +04:00 [INF] Route matched with {action = "Booking", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Booking(BookingApi.Models.Request.OrderRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 10:14:44.625 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:14:44.626 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:14:44.628 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:14:44.630 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:14:44.631 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:14:44.634 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:14:44.683 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:14:44.687 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:14:44.688 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:14:44.691 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' using the name '' in request data ...
2022-08-01 10:14:44.694 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 10:14:44.698 +04:00 [DBG] Connection id "0HMJJGJQM893U", Request id "0HMJJGJQM893U:00000004": started reading request body.
2022-08-01 10:14:44.701 +04:00 [DBG] Connection id "0HMJJGJQM893U", Request id "0HMJJGJQM893U:00000004": done reading request body.
2022-08-01 10:14:44.708 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.OrderRequest'
2022-08-01 10:14:44.710 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:14:44.712 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:14:44.713 +04:00 [DBG] Attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:14:44.784 +04:00 [DBG] Done attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:14:44.829 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Order'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:14:44.841 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:14:44.847 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 10:14:44.852 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 10:14:44.865 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 10:14:44.886 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:44.889 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:44.892 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 10:14:44.900 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 10:14:44.965 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:14:44.967 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:14:44.970 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:14:44.978 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:14:45.004 +04:00 [DBG] The foreign key property 'Order.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 10:14:45.014 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:14:45.020 +04:00 [DBG] Committing transaction.
2022-08-01 10:14:45.024 +04:00 [DBG] Committed transaction.
2022-08-01 10:14:45.027 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:45.029 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:45.033 +04:00 [DBG] Disposing transaction.
2022-08-01 10:14:45.046 +04:00 [DBG] An entity of type 'Order' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:14:45.052 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 10:14:45.058 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 10:14:45.060 +04:00 [INF] Executed action BookingApi.Controllers.SearchController.Booking (BookingApi) in 425.484ms
2022-08-01 10:14:45.062 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:14:45.063 +04:00 [DBG] Connection id "0HMJJGJQM893U" completed keep alive response.
2022-08-01 10:14:45.065 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:14:45.067 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 216 - 200 0 - 470.0092ms
2022-08-01 10:14:49.839 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7058/Profile/1 - -
2022-08-01 10:14:49.846 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 10:14:49.852 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 10:14:49.856 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 10:14:49.859 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 10:14:49.861 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:14:49.863 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:14:49.864 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:14:49.865 +04:00 [DBG] Authorization was successful.
2022-08-01 10:14:49.868 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:14:49.869 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 10:14:49.873 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:14:49.875 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:14:49.877 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:14:49.880 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:14:49.881 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:14:49.884 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:14:49.895 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:14:49.898 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:14:49.900 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:14:49.902 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 10:14:49.903 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:14:49.904 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:14:49.906 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:14:49.908 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 10:14:49.915 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:14:49.917 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-08-01 10:14:49.919 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:49.920 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:49.921 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:14:49.929 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:14:49.936 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:14:49.938 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:14:49.940 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:14:49.941 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:14:49.943 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:49.944 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:49.946 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:14:49.947 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:14:49.949 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:49.951 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:49.953 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:14:49.957 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:14:49.961 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:14:49.962 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:14:49.964 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:49.965 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:14:49.968 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:14:49.971 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:14:49.972 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:14:49.974 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:14:49.975 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:14:49.976 +04:00 [INF] Executing OkObjectResult, writing value of type 'BookingApi.Models.DTO.ProfileDTO'.
2022-08-01 10:14:49.982 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 98.1341ms
2022-08-01 10:14:49.984 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:14:49.986 +04:00 [DBG] Connection id "0HMJJGJQM893U" completed keep alive response.
2022-08-01 10:14:49.989 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:14:50.075 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7058/Profile/1 - - - 200 - application/json;+charset=utf-8 236.1287ms
2022-08-01 10:15:44.393 +04:00 [DBG] Connection id "0HMJJGJQM893S" is closing.
2022-08-01 10:15:44.399 +04:00 [DBG] Connection id "0HMJJGJQM893S" is closed. The last processed stream ID was 7.
2022-08-01 10:15:44.405 +04:00 [DBG] Connection id "0HMJJGJQM893S" received FIN.
2022-08-01 10:15:44.408 +04:00 [DBG] Connection id "0HMJJGJQM893S" sending FIN because: "The client closed the connection."
2022-08-01 10:15:44.424 +04:00 [DBG] Connection id "0HMJJGJQM893S" stopped.
2022-08-01 10:17:01.152 +04:00 [DBG] Connection id "0HMJJGJQM893U" disconnecting.
2022-08-01 10:17:01.154 +04:00 [DBG] Connection id "0HMJJGJQM893U" stopped.
2022-08-01 10:17:01.155 +04:00 [DBG] Connection id "0HMJJGJQM893U" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:19:01.155 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 10:19:01.229 +04:00 [DBG] Hosting starting
2022-08-01 10:19:01.244 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 10:19:01.247 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 10:19:01.252 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 10:19:01.257 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 10:19:01.261 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 10:19:01.270 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 10:19:01.272 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:19:01.275 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 10:19:01.277 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:19:01.282 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 10:19:01.286 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 10:19:01.290 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 10:19:01.292 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 10:19:01.359 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 10:19:01.397 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 10:19:01.398 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 10:19:01.400 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 10:19:01.400 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 10:19:01.401 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 10:19:01.402 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 10:19:01.403 +04:00 [INF] Hosting environment: Development
2022-08-01 10:19:01.404 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 10:19:01.405 +04:00 [DBG] Hosting started
2022-08-01 10:19:01.733 +04:00 [DBG] Connection id "0HMJJGMT2EOU4" received FIN.
2022-08-01 10:19:01.733 +04:00 [DBG] Connection id "0HMJJGMT2EOU5" received FIN.
2022-08-01 10:19:01.741 +04:00 [DBG] Connection id "0HMJJGMT2EOU5" accepted.
2022-08-01 10:19:01.741 +04:00 [DBG] Connection id "0HMJJGMT2EOU4" accepted.
2022-08-01 10:19:01.742 +04:00 [DBG] Connection id "0HMJJGMT2EOU5" started.
2022-08-01 10:19:01.743 +04:00 [DBG] Connection id "0HMJJGMT2EOU4" started.
2022-08-01 10:19:01.757 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:19:01.757 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:19:01.779 +04:00 [DBG] Connection id "0HMJJGMT2EOU4" stopped.
2022-08-01 10:19:01.779 +04:00 [DBG] Connection id "0HMJJGMT2EOU5" stopped.
2022-08-01 10:19:01.783 +04:00 [DBG] Connection id "0HMJJGMT2EOU5" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:19:01.783 +04:00 [DBG] Connection id "0HMJJGMT2EOU4" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:19:01.960 +04:00 [DBG] Connection id "0HMJJGMT2EOU6" accepted.
2022-08-01 10:19:01.985 +04:00 [DBG] Connection id "0HMJJGMT2EOU6" started.
2022-08-01 10:19:02.059 +04:00 [DBG] Connection 0HMJJGMT2EOU6 established using the following protocol: "Tls12"
2022-08-01 10:19:02.130 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 10:19:02.159 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 10:19:02.257 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 10:19:02.494 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 10:19:02.495 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 10:19:02.501 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 375.1529ms
2022-08-01 10:19:02.503 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 7.5746ms
2022-08-01 10:19:02.568 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 10:19:02.650 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 81.7064ms
2022-08-01 10:19:02.866 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 10:19:03.011 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 144.3972ms
2022-08-01 10:19:09.351 +04:00 [DBG] Connection id "0HMJJGMT2EOU7" accepted.
2022-08-01 10:19:09.353 +04:00 [DBG] Connection id "0HMJJGMT2EOU7" started.
2022-08-01 10:19:09.354 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" accepted.
2022-08-01 10:19:09.355 +04:00 [DBG] Connection id "0HMJJGMT2EOU7" received FIN.
2022-08-01 10:19:09.356 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" started.
2022-08-01 10:19:09.357 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:19:09.362 +04:00 [DBG] Connection id "0HMJJGMT2EOU7" stopped.
2022-08-01 10:19:09.362 +04:00 [DBG] Connection 0HMJJGMT2EOU8 established using the following protocol: "Tls12"
2022-08-01 10:19:09.363 +04:00 [DBG] Connection id "0HMJJGMT2EOU7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:19:09.370 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59
2022-08-01 10:19:09.373 +04:00 [DBG] POST requests are not supported
2022-08-01 10:19:09.374 +04:00 [DBG] POST requests are not supported
2022-08-01 10:19:09.394 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 10:19:09.399 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 10:19:09.401 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:19:09.428 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 10:19:09.432 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:19:09.461 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 10:19:09.465 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:19:09.466 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:19:09.467 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:19:09.469 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:19:09.471 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:19:09.473 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 10:19:09.557 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 10:19:10.307 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:19:10.311 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 10:19:10.316 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 10:19:10.319 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 10:19:10.322 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 10:19:10.325 +04:00 [DBG] Connection id "0HMJJGMT2EOU8", Request id "0HMJJGMT2EOU8:00000002": started reading request body.
2022-08-01 10:19:10.326 +04:00 [DBG] Connection id "0HMJJGMT2EOU8", Request id "0HMJJGMT2EOU8:00000002": done reading request body.
2022-08-01 10:19:10.330 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 10:19:10.332 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:19:10.334 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:19:10.336 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 10:19:10.352 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:19:10.428 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __password_1)'
2022-08-01 10:19:10.596 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__password_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 10:19:10.649 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:19:10.675 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (22ms).
2022-08-01 10:19:10.689 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:10.862 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:10.873 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 10:19:10.922 +04:00 [INF] Executed DbCommand (51ms) [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 10:19:10.969 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:10.999 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:19:11.004 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:11.009 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:11.098 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:19:11.102 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:19:11.102 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:19:11.104 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:19:11.105 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:19:11.107 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 10:19:11.122 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 1643.0797ms
2022-08-01 10:19:11.124 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:19:11.125 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" completed keep alive response.
2022-08-01 10:19:11.129 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:19:11.132 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59 - 200 - application/json;+charset=utf-8 1762.1742ms
2022-08-01 10:19:43.412 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 218
2022-08-01 10:19:43.414 +04:00 [DBG] POST requests are not supported
2022-08-01 10:19:43.416 +04:00 [DBG] POST requests are not supported
2022-08-01 10:19:43.418 +04:00 [DBG] 1 candidate(s) found for the request path '/Search/Booking'
2022-08-01 10:19:43.420 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)' with route pattern 'Search/Booking' is valid for the request path '/Search/Booking'
2022-08-01 10:19:43.423 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:19:43.489 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:19:43.491 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:19:43.496 +04:00 [DBG] Authorization was successful.
2022-08-01 10:19:43.498 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:19:43.503 +04:00 [INF] Route matched with {action = "Booking", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Booking(BookingApi.Models.Request.OrderRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 10:19:43.507 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:19:43.508 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:19:43.510 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:19:43.512 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:19:43.513 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:19:43.515 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:19:43.567 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:19:43.570 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:19:43.572 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:19:43.574 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' using the name '' in request data ...
2022-08-01 10:19:43.575 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 10:19:43.579 +04:00 [DBG] Connection id "0HMJJGMT2EOU8", Request id "0HMJJGMT2EOU8:00000003": started reading request body.
2022-08-01 10:19:43.580 +04:00 [DBG] Connection id "0HMJJGMT2EOU8", Request id "0HMJJGMT2EOU8:00000003": done reading request body.
2022-08-01 10:19:43.584 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.OrderRequest'
2022-08-01 10:19:43.585 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:19:43.587 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:19:43.588 +04:00 [DBG] Attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:19:43.651 +04:00 [DBG] Done attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:19:43.791 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Order'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:43.824 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:43.831 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 10:19:43.836 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 10:19:43.855 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 10:19:43.879 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:43.881 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:43.884 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 10:19:43.894 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 10:19:43.954 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:19:43.956 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:19:43.960 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:19:43.968 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:19:43.990 +04:00 [DBG] The foreign key property 'Order.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 10:19:43.999 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:19:44.003 +04:00 [DBG] Committing transaction.
2022-08-01 10:19:44.018 +04:00 [DBG] Committed transaction.
2022-08-01 10:19:44.024 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:44.025 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:44.028 +04:00 [DBG] Disposing transaction.
2022-08-01 10:19:44.042 +04:00 [DBG] An entity of type 'Order' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:44.047 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 10:19:44.054 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 10:19:44.056 +04:00 [INF] Executed action BookingApi.Controllers.SearchController.Booking (BookingApi) in 540.671ms
2022-08-01 10:19:44.057 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:19:44.059 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" completed keep alive response.
2022-08-01 10:19:44.060 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:19:44.062 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 218 - 200 0 - 649.4008ms
2022-08-01 10:19:51.847 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7058/Profile/1 - -
2022-08-01 10:19:51.848 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 10:19:51.849 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 10:19:51.850 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 10:19:51.851 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 10:19:51.853 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:19:51.858 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:19:51.859 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:19:51.861 +04:00 [DBG] Authorization was successful.
2022-08-01 10:19:51.862 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:19:51.866 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 10:19:51.869 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:19:51.871 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:19:51.873 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:19:51.875 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:19:51.876 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:19:51.878 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:19:51.890 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:19:51.894 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:19:51.896 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:19:51.898 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 10:19:51.900 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:19:51.901 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:19:51.902 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:19:51.906 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 10:19:51.919 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Where(x => x.UserId == __userId_0)
    .Include(x => x.Apartment)
    .Include(x => x.Order)
    .SingleOrDefault()'
2022-08-01 10:19:51.946 +04:00 [DBG] Including navigation: 'Profile.Apartment'.
2022-08-01 10:19:51.949 +04:00 [DBG] Including navigation: 'Profile.Order'.
2022-08-01 10:19:52.077 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
                1 -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Apartment.Address (string) Required, 8], [Property: Apartment.City (string), 9], [Property: Apartment.Description (string), 10], [Property: Apartment.DistanceToCenter (int) Required, 11], [Property: Apartment.From (DateTime) Required, 12], [Property: Apartment.HostId (int) Required FK Index, 13], [Property: Apartment.IsAvailable (bool) Required, 14], [Property: Apartment.NumbOfBeds (int) Required, 15], [Property: Apartment.Photo (string), 16], [Property: Apartment.To (DateTime) Required, 17] }
                2 -> 0
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Order.City (string) Required, 19], [Property: Order.CustomerId (int) Required, 20], [Property: Order.FirstName (string) Required, 21], [Property: Order.From (DateTime) Required, 22], [Property: Order.HostId (int) Required FK Index, 23], [Property: Order.LastName (string) Required, 24], [Property: Order.Status (int?), 25], [Property: Order.To (DateTime) Required, 26] }
                5 -> 18
            SELECT t.UserId, t.Description, t.Email, t.FirstName, t.LastName, t.Password, t.Photo, t.Id, t.Address, t.City, t.Description0, t.DistanceToCenter, t.From, t.HostId, t.IsAvailable, t.NumbOfBeds, t.Photo0, t.To, o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
            FROM 
            (
                SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo, a.Id, a.Address, a.City, a.Description AS Description0, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo AS Photo0, a.To
                FROM Profile AS p
                LEFT JOIN Apartments AS a ON p.UserId == a.HostId
                WHERE p.UserId == @__userId_0
            ) AS t
            LEFT JOIN Orders AS o ON t.UserId == o.HostId
            ORDER BY t.UserId ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 10:19:52.085 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:19:52.087 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:19:52.090 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:52.092 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:52.093 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:19:52.100 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:19:52.108 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:52.114 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:52.153 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:52.163 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:52.165 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:19:52.166 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:52.167 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:52.179 +04:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Where(x => x.CustomerId == __customerId_0)'
2022-08-01 10:19:52.185 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.City (string) Required, 1], [Property: Order.CustomerId (int) Required, 2], [Property: Order.FirstName (string) Required, 3], [Property: Order.From (DateTime) Required, 4], [Property: Order.HostId (int) Required FK Index, 5], [Property: Order.LastName (string) Required, 6], [Property: Order.Status (int?), 7], [Property: Order.To (DateTime) Required, 8] }
        SELECT o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
        FROM Orders AS o
        WHERE o.CustomerId == @__customerId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 10:19:52.190 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:19:52.192 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:19:52.193 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:52.194 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:52.195 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:19:52.200 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:19:52.203 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:19:52.207 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:19:52.208 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:52.209 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:19:52.257 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:19:52.260 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:19:52.261 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:19:52.262 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:19:52.263 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:19:52.265 +04:00 [INF] Executing OkObjectResult, writing value of type 'BookingApi.Models.DTO.ProfileDTO'.
2022-08-01 10:19:52.278 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 399.5055ms
2022-08-01 10:19:52.279 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:19:52.281 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" completed keep alive response.
2022-08-01 10:19:52.282 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:19:52.284 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7058/Profile/1 - - - 200 - application/json;+charset=utf-8 436.9544ms
2022-08-01 10:20:53.784 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 215
2022-08-01 10:20:53.785 +04:00 [DBG] POST requests are not supported
2022-08-01 10:20:53.786 +04:00 [DBG] POST requests are not supported
2022-08-01 10:20:53.787 +04:00 [DBG] 1 candidate(s) found for the request path '/Search/Booking'
2022-08-01 10:20:53.788 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)' with route pattern 'Search/Booking' is valid for the request path '/Search/Booking'
2022-08-01 10:20:53.790 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:20:53.792 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:20:53.793 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:20:53.795 +04:00 [DBG] Authorization was successful.
2022-08-01 10:20:53.796 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:20:53.797 +04:00 [INF] Route matched with {action = "Booking", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Booking(BookingApi.Models.Request.OrderRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 10:20:53.800 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:20:53.801 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:20:53.802 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:20:53.805 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:20:53.807 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:20:53.809 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:20:53.811 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:20:53.813 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:20:53.815 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:20:53.816 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' using the name '' in request data ...
2022-08-01 10:20:53.818 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 10:20:53.820 +04:00 [DBG] Connection id "0HMJJGMT2EOU8", Request id "0HMJJGMT2EOU8:00000005": started reading request body.
2022-08-01 10:20:53.821 +04:00 [DBG] Connection id "0HMJJGMT2EOU8", Request id "0HMJJGMT2EOU8:00000005": done reading request body.
2022-08-01 10:20:53.822 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.OrderRequest'
2022-08-01 10:20:53.824 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:20:53.825 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:20:53.827 +04:00 [DBG] Attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:20:53.830 +04:00 [DBG] Done attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:20:53.832 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Order'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:20:53.834 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:20:53.836 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 10:20:53.837 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 10:20:53.838 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 10:20:53.839 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:20:53.841 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:20:53.842 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 10:20:53.844 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 10:20:53.845 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:20:53.847 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:20:53.848 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:20:53.859 +04:00 [ERR] Failed executing DbCommand (13ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:20:53.868 +04:00 [DBG] Disposing transaction.
2022-08-01 10:20:53.869 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:20:53.870 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:20:53.883 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Booking.PersistanceDB.Context.BookingContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Profile_HostId". The conflict occurred in database "Booking", table "dbo.Profile", column 'UserId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:918195bc-9aca-4f6c-b070-e1f4fa98d53e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Profile_HostId". The conflict occurred in database "Booking", table "dbo.Profile", column 'UserId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:918195bc-9aca-4f6c-b070-e1f4fa98d53e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-08-01 10:20:53.909 +04:00 [ERR] An error occurred while saving the entity changes. See the inner exception for details.
2022-08-01 10:20:53.922 +04:00 [INF] Executed action BookingApi.Controllers.SearchController.Booking (BookingApi) in 113.1548ms
2022-08-01 10:20:53.925 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:20:53.928 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Exception of type 'System.Exception' was thrown.
   at BookingApi.Controllers.SearchController.Booking(OrderRequest orderRequest) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\SearchController.cs:line 63
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 10:20:53.965 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" completed keep alive response.
2022-08-01 10:20:53.967 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:20:53.968 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 215 - 500 - text/plain;+charset=utf-8 184.2985ms
2022-08-01 10:21:14.458 +04:00 [DBG] Connection id "0HMJJGMT2EOU6" is closing.
2022-08-01 10:21:14.459 +04:00 [DBG] Connection id "0HMJJGMT2EOU6" is closed. The last processed stream ID was 7.
2022-08-01 10:21:14.462 +04:00 [DBG] Connection id "0HMJJGMT2EOU6" received FIN.
2022-08-01 10:21:14.463 +04:00 [DBG] Connection id "0HMJJGMT2EOU6" sending FIN because: "The client closed the connection."
2022-08-01 10:21:14.474 +04:00 [DBG] Connection id "0HMJJGMT2EOU6" stopped.
2022-08-01 10:21:18.879 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 215
2022-08-01 10:21:18.886 +04:00 [DBG] POST requests are not supported
2022-08-01 10:21:18.887 +04:00 [DBG] POST requests are not supported
2022-08-01 10:21:18.892 +04:00 [DBG] 1 candidate(s) found for the request path '/Search/Booking'
2022-08-01 10:21:18.893 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)' with route pattern 'Search/Booking' is valid for the request path '/Search/Booking'
2022-08-01 10:21:18.896 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:21:18.897 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:21:18.898 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:21:18.901 +04:00 [DBG] Authorization was successful.
2022-08-01 10:21:18.902 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:21:18.904 +04:00 [INF] Route matched with {action = "Booking", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Booking(BookingApi.Models.Request.OrderRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 10:21:18.909 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:21:18.910 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:21:18.912 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:21:18.914 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:21:18.916 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:21:18.918 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:21:18.924 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:21:18.928 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:21:18.930 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:21:18.932 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' using the name '' in request data ...
2022-08-01 10:21:18.934 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 10:21:18.935 +04:00 [DBG] Connection id "0HMJJGMT2EOU8", Request id "0HMJJGMT2EOU8:00000006": started reading request body.
2022-08-01 10:21:18.936 +04:00 [DBG] Connection id "0HMJJGMT2EOU8", Request id "0HMJJGMT2EOU8:00000006": done reading request body.
2022-08-01 10:21:18.937 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.OrderRequest'
2022-08-01 10:21:18.938 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:21:18.941 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:21:18.942 +04:00 [DBG] Attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:21:18.945 +04:00 [DBG] Done attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:21:18.947 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Order'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:18.949 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:18.950 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 10:21:18.952 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 10:21:18.953 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 10:21:18.954 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:18.956 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:18.958 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 10:21:18.959 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 10:21:18.961 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:21:18.962 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-08-01 10:21:18.964 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:21:18.970 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:21:18.976 +04:00 [DBG] The foreign key property 'Order.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 10:21:18.977 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:21:18.979 +04:00 [DBG] Committing transaction.
2022-08-01 10:21:18.991 +04:00 [DBG] Committed transaction.
2022-08-01 10:21:18.992 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:18.994 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:18.995 +04:00 [DBG] Disposing transaction.
2022-08-01 10:21:18.996 +04:00 [DBG] An entity of type 'Order' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:18.998 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 10:21:18.999 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 10:21:19.000 +04:00 [INF] Executed action BookingApi.Controllers.SearchController.Booking (BookingApi) in 82.3198ms
2022-08-01 10:21:19.001 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:21:19.003 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" completed keep alive response.
2022-08-01 10:21:19.004 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:21:19.005 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 215 - 200 0 - 125.9043ms
2022-08-01 10:21:36.983 +04:00 [INF] Request starting HTTP/1.1 GET https://localhost:7058/Profile/1 - -
2022-08-01 10:21:36.984 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 10:21:36.985 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 10:21:36.987 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 10:21:36.988 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 10:21:36.991 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:21:36.993 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:21:36.993 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:21:36.994 +04:00 [DBG] Authorization was successful.
2022-08-01 10:21:36.995 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:21:36.997 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 10:21:36.999 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:21:37.000 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:21:37.001 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:21:37.004 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:21:37.005 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:21:37.007 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:21:37.011 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:21:37.015 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 10:21:37.017 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:21:37.018 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 10:21:37.020 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:21:37.021 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 10:21:37.022 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 10:21:37.024 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 10:21:37.029 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:21:37.031 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:21:37.032 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:37.033 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:37.035 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:21:37.043 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 10:21:37.048 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:37.050 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:37.052 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:37.056 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:37.059 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:21:37.060 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:37.061 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:37.063 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:21:37.064 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:21:37.065 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:37.067 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:37.068 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:21:37.072 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 10:21:37.077 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:37.078 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:21:37.080 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:21:37.080 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:37.082 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:21:37.083 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:21:37.086 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:21:37.086 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:21:37.088 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:21:37.088 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:21:37.092 +04:00 [INF] Executing OkObjectResult, writing value of type 'BookingApi.Models.DTO.ProfileDTO'.
2022-08-01 10:21:37.096 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 89.1558ms
2022-08-01 10:21:37.098 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 10:21:37.099 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" completed keep alive response.
2022-08-01 10:21:37.100 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:21:37.101 +04:00 [INF] Request finished HTTP/1.1 GET https://localhost:7058/Profile/1 - - - 200 - application/json;+charset=utf-8 118.5662ms
2022-08-01 10:23:48.025 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" disconnecting.
2022-08-01 10:23:48.027 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" stopped.
2022-08-01 10:23:48.029 +04:00 [DBG] Connection id "0HMJJGMT2EOU8" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:44:14.932 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 10:44:15.054 +04:00 [DBG] Hosting starting
2022-08-01 10:44:15.078 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 10:44:15.083 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 10:44:15.091 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 10:44:15.099 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 10:44:15.105 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 10:44:15.115 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 10:44:15.120 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:44:15.126 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 10:44:15.129 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:44:15.138 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 10:44:15.142 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 10:44:15.148 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 10:44:15.151 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 10:44:15.263 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 10:44:15.313 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 10:44:15.314 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 10:44:15.316 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 10:44:15.317 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 10:44:15.318 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 10:44:15.320 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 10:44:15.321 +04:00 [INF] Hosting environment: Development
2022-08-01 10:44:15.322 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 10:44:15.324 +04:00 [DBG] Hosting started
2022-08-01 10:44:15.567 +04:00 [DBG] Connection id "0HMJJH507G65R" received FIN.
2022-08-01 10:44:15.568 +04:00 [DBG] Connection id "0HMJJH507G65S" reset.
2022-08-01 10:44:15.578 +04:00 [DBG] Connection id "0HMJJH507G65S" accepted.
2022-08-01 10:44:15.578 +04:00 [DBG] Connection id "0HMJJH507G65R" accepted.
2022-08-01 10:44:15.580 +04:00 [DBG] Connection id "0HMJJH507G65S" started.
2022-08-01 10:44:15.581 +04:00 [DBG] Connection id "0HMJJH507G65R" started.
2022-08-01 10:44:15.583 +04:00 [DBG] Connection id "0HMJJH507G65T" accepted.
2022-08-01 10:44:15.584 +04:00 [DBG] Connection id "0HMJJH507G65T" started.
2022-08-01 10:44:15.597 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:44:15.597 +04:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException: An existing connection was forcibly closed by the remote host.
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.ReadAsync(CancellationToken token)
   at System.IO.Pipelines.Pipe.DefaultPipeReader.ReadAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:44:15.624 +04:00 [DBG] Connection id "0HMJJH507G65R" stopped.
2022-08-01 10:44:15.642 +04:00 [DBG] Connection id "0HMJJH507G65S" stopped.
2022-08-01 10:44:15.643 +04:00 [DBG] Connection id "0HMJJH507G65R" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:44:15.643 +04:00 [DBG] Connection id "0HMJJH507G65S" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:44:15.644 +04:00 [DBG] Connection 0HMJJH507G65T established using the following protocol: "Tls12"
2022-08-01 10:44:15.702 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 10:44:15.733 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 10:44:15.834 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 10:44:15.937 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 10:44:15.942 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 10:44:15.942 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 10:44:15.944 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 245.9844ms
2022-08-01 10:44:15.949 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 7.0708ms
2022-08-01 10:44:15.964 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 21.3065ms
2022-08-01 10:44:16.410 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 10:44:16.543 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 133.4518ms
2022-08-01 10:44:37.469 +04:00 [DBG] Connection id "0HMJJH507G65U" accepted.
2022-08-01 10:44:37.472 +04:00 [DBG] Connection id "0HMJJH507G65U" received FIN.
2022-08-01 10:44:37.473 +04:00 [DBG] Connection id "0HMJJH507G65U" started.
2022-08-01 10:44:37.473 +04:00 [DBG] Connection id "0HMJJH507G65V" accepted.
2022-08-01 10:44:37.477 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:44:37.477 +04:00 [DBG] Connection id "0HMJJH507G65V" started.
2022-08-01 10:44:37.481 +04:00 [DBG] Connection id "0HMJJH507G65U" stopped.
2022-08-01 10:44:37.486 +04:00 [DBG] Connection id "0HMJJH507G65U" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:44:37.490 +04:00 [DBG] Connection 0HMJJH507G65V established using the following protocol: "Tls12"
2022-08-01 10:44:37.500 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59
2022-08-01 10:44:37.504 +04:00 [DBG] POST requests are not supported
2022-08-01 10:44:37.506 +04:00 [DBG] POST requests are not supported
2022-08-01 10:44:37.541 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 10:44:37.546 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 10:44:37.550 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:44:37.584 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 10:44:37.588 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:44:37.624 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 10:44:37.628 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:44:37.630 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:44:37.631 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:44:37.635 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:44:37.636 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:44:37.639 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 10:44:37.754 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 10:44:38.658 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:44:38.665 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 10:44:38.672 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 10:44:38.676 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 10:44:38.679 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 10:44:38.683 +04:00 [DBG] Connection id "0HMJJH507G65V", Request id "0HMJJH507G65V:00000002": started reading request body.
2022-08-01 10:44:38.685 +04:00 [DBG] Connection id "0HMJJH507G65V", Request id "0HMJJH507G65V:00000002": done reading request body.
2022-08-01 10:44:38.691 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 10:44:38.692 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:44:38.693 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:44:38.695 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 10:44:38.713 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 10:44:38.808 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __password_1)'
2022-08-01 10:44:39.029 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__password_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 10:44:39.088 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:44:39.121 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (28ms).
2022-08-01 10:44:39.137 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:44:39.354 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:44:39.369 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 10:44:39.434 +04:00 [INF] Executed DbCommand (68ms) [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 10:44:39.491 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:44:39.530 +04:00 [DBG] A data reader was disposed.
2022-08-01 10:44:39.537 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:44:39.544 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:44:39.664 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 10:44:39.670 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 10:44:39.671 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 10:44:39.672 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 10:44:39.674 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 10:44:39.675 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 10:44:39.688 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 2042.3054ms
2022-08-01 10:44:39.691 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 10:44:39.693 +04:00 [DBG] Connection id "0HMJJH507G65V" completed keep alive response.
2022-08-01 10:44:39.696 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:44:39.703 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59 - 200 - application/json;+charset=utf-8 2203.1578ms
2022-08-01 10:44:53.776 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 215
2022-08-01 10:44:53.777 +04:00 [DBG] POST requests are not supported
2022-08-01 10:44:53.777 +04:00 [DBG] POST requests are not supported
2022-08-01 10:44:53.780 +04:00 [DBG] 1 candidate(s) found for the request path '/Search/Booking'
2022-08-01 10:44:53.782 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)' with route pattern 'Search/Booking' is valid for the request path '/Search/Booking'
2022-08-01 10:44:53.784 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:44:53.862 +04:00 [DBG] Successfully validated the token.
2022-08-01 10:44:53.865 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 10:44:53.872 +04:00 [DBG] Authorization was successful.
2022-08-01 10:44:53.875 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:44:53.880 +04:00 [INF] Route matched with {action = "Booking", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Booking(BookingApi.Models.Request.OrderRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 10:44:53.884 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 10:44:53.886 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 10:44:53.888 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 10:44:53.892 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 10:44:53.894 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 10:44:53.895 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:44:53.948 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 10:44:53.952 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 10:44:53.955 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:44:53.958 +04:00 [DBG] Attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' using the name '' in request data ...
2022-08-01 10:44:53.960 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 10:44:53.963 +04:00 [DBG] Connection id "0HMJJH507G65V", Request id "0HMJJH507G65V:00000003": started reading request body.
2022-08-01 10:44:53.965 +04:00 [DBG] Connection id "0HMJJH507G65V", Request id "0HMJJH507G65V:00000003": done reading request body.
2022-08-01 10:44:53.970 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.OrderRequest'
2022-08-01 10:44:53.972 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:44:53.973 +04:00 [DBG] Done attempting to bind parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:44:53.974 +04:00 [DBG] Attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest' ...
2022-08-01 10:44:54.048 +04:00 [DBG] Done attempting to validate the bound parameter 'orderRequest' of type 'BookingApi.Models.Request.OrderRequest'.
2022-08-01 10:44:54.193 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Order'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:44:54.234 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 10:44:54.241 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 10:44:54.245 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 10:44:54.261 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 10:44:54.285 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:44:54.288 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:44:54.291 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 10:44:54.303 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 10:44:54.371 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 10:44:54.373 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 10:44:54.376 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:44:54.389 +04:00 [ERR] Failed executing DbCommand (17ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Orders] ([City], [CustomerId], [FirstName], [From], [HostId], [LastName], [Status], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
SELECT [Id]
FROM [Orders]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 10:44:54.401 +04:00 [DBG] Disposing transaction.
2022-08-01 10:44:54.405 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:44:54.407 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 10:44:54.432 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Booking.PersistanceDB.Context.BookingContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Profile_HostId". The conflict occurred in database "Booking", table "dbo.Profile", column 'UserId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0461975b-3def-4986-804d-2a7645107513
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Orders_Profile_HostId". The conflict occurred in database "Booking", table "dbo.Profile", column 'UserId'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0461975b-3def-4986-804d-2a7645107513
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-08-01 10:44:54.455 +04:00 [INF] Executed action BookingApi.Controllers.SearchController.Booking (BookingApi) in 559.9672ms
2022-08-01 10:44:54.458 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.SearchController.Booking (BookingApi)'
2022-08-01 10:44:54.548 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: The best overloaded method match for 'BookingApi.ApiError.HandleException(Booking.Services.Exceptions.ObjectNotFoundException)' has some invalid arguments
   at CallSite.Target(Closure , CallSite , ApiError , Object )
   at System.Dynamic.UpdateDelegates.UpdateAndExecuteVoid2[T0,T1](CallSite site, T0 arg0, T1 arg1)
   at BookingApi.ApiError..ctor(HttpContext context, Exception exception) in D:\Albert\AltexProject\BookingApi\BookingApi\ApiError.cs:line 41
   at BookingApi.Infastructure.MyMiddlewares.GlobalExceptionHandlerMiddleware.HandleException(HttpContext context, Exception ex) in D:\Albert\AltexProject\BookingApi\BookingApi\Infastructure\MyMiddlewares\GlobalExceptionHandlerMiddleware.cs:line 31
   at BookingApi.Infastructure.MyMiddlewares.GlobalExceptionHandlerMiddleware.Invoke(HttpContext context) in D:\Albert\AltexProject\BookingApi\BookingApi\Infastructure\MyMiddlewares\GlobalExceptionHandlerMiddleware.cs:line 24
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 10:44:54.571 +04:00 [DBG] Connection id "0HMJJH507G65V" completed keep alive response.
2022-08-01 10:44:54.572 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 10:44:54.574 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Search/Booking application/json 215 - 500 - text/plain;+charset=utf-8 798.2312ms
2022-08-01 10:46:28.401 +04:00 [DBG] Connection id "0HMJJH507G65T" is closing.
2022-08-01 10:46:28.403 +04:00 [DBG] Connection id "0HMJJH507G65T" is closed. The last processed stream ID was 7.
2022-08-01 10:46:28.405 +04:00 [DBG] Connection id "0HMJJH507G65T" received FIN.
2022-08-01 10:46:28.407 +04:00 [DBG] Connection id "0HMJJH507G65T" stopped.
2022-08-01 10:46:28.408 +04:00 [DBG] Connection id "0HMJJH507G65T" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:47:05.756 +04:00 [DBG] Connection id "0HMJJH507G65V" disconnecting.
2022-08-01 10:47:05.758 +04:00 [DBG] Connection id "0HMJJH507G65V" stopped.
2022-08-01 10:47:05.760 +04:00 [DBG] Connection id "0HMJJH507G65V" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:54:20.819 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 10:54:20.901 +04:00 [DBG] Hosting starting
2022-08-01 10:54:20.917 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 10:54:20.920 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 10:54:20.924 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 10:54:20.930 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 10:54:20.934 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 10:54:20.941 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 10:54:20.944 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:54:20.948 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 10:54:20.950 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 10:54:20.955 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 10:54:20.959 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 10:54:20.963 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 10:54:20.965 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 10:54:21.039 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 10:54:21.076 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 10:54:21.078 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 10:54:21.080 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 10:54:21.081 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 10:54:21.082 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 10:54:21.084 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 10:54:21.085 +04:00 [INF] Hosting environment: Development
2022-08-01 10:54:21.086 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 10:54:21.087 +04:00 [DBG] Hosting started
2022-08-01 10:54:21.288 +04:00 [DBG] Connection id "0HMJJHAKO3K8O" received FIN.
2022-08-01 10:54:21.288 +04:00 [DBG] Connection id "0HMJJHAKO3K8N" received FIN.
2022-08-01 10:54:21.296 +04:00 [DBG] Connection id "0HMJJHAKO3K8O" accepted.
2022-08-01 10:54:21.296 +04:00 [DBG] Connection id "0HMJJHAKO3K8N" accepted.
2022-08-01 10:54:21.298 +04:00 [DBG] Connection id "0HMJJHAKO3K8O" started.
2022-08-01 10:54:21.299 +04:00 [DBG] Connection id "0HMJJHAKO3K8N" started.
2022-08-01 10:54:21.313 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:54:21.313 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 10:54:21.337 +04:00 [DBG] Connection id "0HMJJHAKO3K8N" stopped.
2022-08-01 10:54:21.337 +04:00 [DBG] Connection id "0HMJJHAKO3K8O" stopped.
2022-08-01 10:54:21.341 +04:00 [DBG] Connection id "0HMJJHAKO3K8O" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:54:21.341 +04:00 [DBG] Connection id "0HMJJHAKO3K8N" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 10:54:21.593 +04:00 [DBG] Connection id "0HMJJHAKO3K8P" accepted.
2022-08-01 10:54:21.595 +04:00 [DBG] Connection id "0HMJJHAKO3K8P" started.
2022-08-01 10:54:21.651 +04:00 [DBG] Connection 0HMJJHAKO3K8P established using the following protocol: "Tls12"
2022-08-01 10:54:21.693 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 10:54:21.721 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 10:54:21.798 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 10:54:21.998 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 10:54:22.003 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 10:54:22.006 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 316.6312ms
2022-08-01 10:54:22.008 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 4.5114ms
2022-08-01 10:54:22.064 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 10:54:22.159 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 95.4435ms
2022-08-01 10:54:22.358 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 10:54:22.461 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 102.4584ms
2022-08-01 10:54:33.420 +04:00 [DBG] Connection id "0HMJJHAKO3K8P" received FIN.
2022-08-01 10:54:33.430 +04:00 [DBG] Connection id "0HMJJHAKO3K8P" is closed. The last processed stream ID was 7.
2022-08-01 10:54:33.432 +04:00 [DBG] Connection id "0HMJJHAKO3K8P" sending FIN because: "The client closed the connection."
2022-08-01 10:54:33.439 +04:00 [DBG] Connection id "0HMJJHAKO3K8P" stopped.
2022-08-01 16:23:51.129 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 16:23:51.278 +04:00 [DBG] Hosting starting
2022-08-01 16:23:51.310 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 16:23:51.315 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 16:23:51.330 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 16:23:51.339 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 16:23:51.345 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 16:23:51.353 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 16:23:51.356 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 16:23:51.359 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 16:23:51.360 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 16:23:51.365 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 16:23:51.368 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 16:23:51.373 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 16:23:51.375 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 16:23:51.489 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 16:23:51.525 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 16:23:51.526 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 16:23:51.528 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 16:23:51.529 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 16:23:51.530 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 16:23:51.531 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 16:23:51.531 +04:00 [INF] Hosting environment: Development
2022-08-01 16:23:51.532 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 16:23:51.533 +04:00 [DBG] Hosting started
2022-08-01 16:23:52.013 +04:00 [DBG] Connection id "0HMJJN2OSDGUN" accepted.
2022-08-01 16:23:52.015 +04:00 [DBG] Connection id "0HMJJN2OSDGUN" started.
2022-08-01 16:23:52.021 +04:00 [DBG] Connection id "0HMJJN2OSDGUO" accepted.
2022-08-01 16:23:52.022 +04:00 [DBG] Connection id "0HMJJN2OSDGUO" started.
2022-08-01 16:23:52.039 +04:00 [DBG] Connection id "0HMJJN2OSDGUN" received FIN.
2022-08-01 16:23:52.039 +04:00 [DBG] Connection id "0HMJJN2OSDGUO" received FIN.
2022-08-01 16:23:52.046 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 16:23:52.046 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 16:23:52.096 +04:00 [DBG] Connection id "0HMJJN2OSDGUN" stopped.
2022-08-01 16:23:52.096 +04:00 [DBG] Connection id "0HMJJN2OSDGUO" stopped.
2022-08-01 16:23:52.097 +04:00 [DBG] Connection id "0HMJJN2OSDGUN" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 16:23:52.098 +04:00 [DBG] Connection id "0HMJJN2OSDGUO" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 16:23:53.178 +04:00 [DBG] Connection id "0HMJJN2OSDGUP" accepted.
2022-08-01 16:23:53.179 +04:00 [DBG] Connection id "0HMJJN2OSDGUP" started.
2022-08-01 16:23:53.215 +04:00 [DBG] Connection 0HMJJN2OSDGUP established using the following protocol: "Tls12"
2022-08-01 16:23:53.256 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 16:23:53.279 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 16:23:53.366 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 16:23:53.452 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 16:23:53.457 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 203.8348ms
2022-08-01 16:23:53.459 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 16:23:53.464 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 4.2795ms
2022-08-01 16:23:53.513 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 16:23:53.530 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 16.0783ms
2022-08-01 16:23:53.613 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 16:23:53.706 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 92.9457ms
2022-08-01 16:23:54.225 +04:00 [DBG] Connection id "0HMJJN2OSDGUP" received FIN.
2022-08-01 16:23:54.244 +04:00 [DBG] Connection id "0HMJJN2OSDGUP" is closed. The last processed stream ID was 7.
2022-08-01 16:23:54.246 +04:00 [DBG] Connection id "0HMJJN2OSDGUP" sending FIN because: "The client closed the connection."
2022-08-01 16:23:54.252 +04:00 [DBG] Connection id "0HMJJN2OSDGUP" stopped.
2022-08-01 16:24:02.283 +04:00 [DBG] Connection id "0HMJJN2OSDGUQ" accepted.
2022-08-01 16:24:02.284 +04:00 [DBG] Connection id "0HMJJN2OSDGUQ" started.
2022-08-01 16:24:02.286 +04:00 [DBG] Connection id "0HMJJN2OSDGUR" accepted.
2022-08-01 16:24:02.286 +04:00 [DBG] Connection id "0HMJJN2OSDGUQ" received FIN.
2022-08-01 16:24:02.287 +04:00 [DBG] Connection id "0HMJJN2OSDGUR" started.
2022-08-01 16:24:02.288 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 16:24:02.292 +04:00 [DBG] Connection id "0HMJJN2OSDGUQ" stopped.
2022-08-01 16:24:02.292 +04:00 [DBG] Connection id "0HMJJN2OSDGUQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 16:24:02.295 +04:00 [DBG] Connection 0HMJJN2OSDGUR established using the following protocol: "Tls12"
2022-08-01 16:24:02.302 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59
2022-08-01 16:24:02.306 +04:00 [DBG] POST requests are not supported
2022-08-01 16:24:02.307 +04:00 [DBG] POST requests are not supported
2022-08-01 16:24:02.325 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 16:24:02.329 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 16:24:02.331 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 16:24:02.362 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 16:24:02.365 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 16:24:02.385 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 16:24:02.387 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 16:24:02.388 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 16:24:02.389 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 16:24:02.391 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 16:24:02.392 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 16:24:02.393 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 16:24:02.505 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 16:24:03.059 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 16:24:03.062 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 16:24:03.068 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 16:24:03.072 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 16:24:03.074 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 16:24:03.076 +04:00 [DBG] Connection id "0HMJJN2OSDGUR", Request id "0HMJJN2OSDGUR:00000002": started reading request body.
2022-08-01 16:24:03.078 +04:00 [DBG] Connection id "0HMJJN2OSDGUR", Request id "0HMJJN2OSDGUR:00000002": done reading request body.
2022-08-01 16:24:03.081 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 16:24:03.082 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 16:24:03.084 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 16:24:03.085 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 16:24:03.102 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 16:24:03.177 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __password_1)'
2022-08-01 16:24:03.306 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__password_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 16:24:03.342 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 16:24:03.364 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (23ms).
2022-08-01 16:24:03.377 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 16:24:03.576 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 16:24:03.585 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 16:24:03.650 +04:00 [INF] Executed DbCommand (68ms) [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 16:24:03.687 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 16:24:03.712 +04:00 [DBG] A data reader was disposed.
2022-08-01 16:24:03.716 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 16:24:03.721 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 16:24:03.814 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 16:24:03.818 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 16:24:03.819 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 16:24:03.820 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 16:24:03.821 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 16:24:03.823 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 16:24:03.830 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 1434.3964ms
2022-08-01 16:24:03.833 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 16:24:03.835 +04:00 [DBG] Connection id "0HMJJN2OSDGUR" completed keep alive response.
2022-08-01 16:24:03.837 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 16:24:03.840 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59 - 200 - application/json;+charset=utf-8 1537.3266ms
2022-08-01 16:26:14.947 +04:00 [DBG] Connection id "0HMJJN2OSDGUR" disconnecting.
2022-08-01 16:26:14.950 +04:00 [DBG] Connection id "0HMJJN2OSDGUR" stopped.
2022-08-01 16:26:14.951 +04:00 [DBG] Connection id "0HMJJN2OSDGUR" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:37:39.291 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 20:37:39.484 +04:00 [DBG] Hosting starting
2022-08-01 20:37:39.574 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 20:37:39.579 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 20:37:39.587 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 20:37:39.595 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 20:37:39.605 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 20:37:39.620 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 20:37:39.624 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 20:37:39.630 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 20:37:39.634 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 20:37:39.642 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 20:37:39.647 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 20:37:39.654 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 20:37:39.656 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 20:37:39.974 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 20:37:40.054 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 20:37:40.056 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 20:37:40.057 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 20:37:40.060 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 20:37:40.062 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 20:37:40.065 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 20:37:40.066 +04:00 [INF] Hosting environment: Development
2022-08-01 20:37:40.069 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 20:37:40.071 +04:00 [DBG] Hosting started
2022-08-01 20:37:40.257 +04:00 [DBG] Connection id "0HMJJRGJ87FKL" accepted.
2022-08-01 20:37:40.257 +04:00 [DBG] Connection id "0HMJJRGJ87FKK" accepted.
2022-08-01 20:37:40.262 +04:00 [DBG] Connection id "0HMJJRGJ87FKL" started.
2022-08-01 20:37:40.263 +04:00 [DBG] Connection id "0HMJJRGJ87FKK" started.
2022-08-01 20:37:40.865 +04:00 [DBG] Connection id "0HMJJRGJ87FKM" accepted.
2022-08-01 20:37:40.877 +04:00 [DBG] Connection id "0HMJJRGJ87FKM" started.
2022-08-01 20:37:40.984 +04:00 [DBG] Connection 0HMJJRGJ87FKM established using the following protocol: "Tls12"
2022-08-01 20:37:41.054 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 20:37:41.106 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 20:37:41.225 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 20:37:41.422 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 20:37:41.430 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 20:37:41.437 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 13.4225ms
2022-08-01 20:37:41.437 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 389.0517ms
2022-08-01 20:37:41.508 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 20:37:41.547 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 38.3895ms
2022-08-01 20:37:41.789 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 20:37:41.970 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 181.1040ms
2022-08-01 20:37:46.767 +04:00 [DBG] Connection id "0HMJJRGJ87FKN" accepted.
2022-08-01 20:37:46.768 +04:00 [DBG] Connection id "0HMJJRGJ87FKN" started.
2022-08-01 20:37:46.769 +04:00 [DBG] Connection id "0HMJJRGJ87FKO" accepted.
2022-08-01 20:37:46.769 +04:00 [DBG] Connection id "0HMJJRGJ87FKN" received FIN.
2022-08-01 20:37:46.774 +04:00 [DBG] Connection id "0HMJJRGJ87FKO" started.
2022-08-01 20:37:46.781 +04:00 [DBG] Connection 0HMJJRGJ87FKO established using the following protocol: "Tls12"
2022-08-01 20:37:46.785 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 20:37:46.813 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59
2022-08-01 20:37:46.871 +04:00 [DBG] POST requests are not supported
2022-08-01 20:37:46.872 +04:00 [DBG] POST requests are not supported
2022-08-01 20:37:46.874 +04:00 [DBG] Connection id "0HMJJRGJ87FKN" stopped.
2022-08-01 20:37:46.876 +04:00 [DBG] Connection id "0HMJJRGJ87FKN" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:37:46.901 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 20:37:46.907 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 20:37:46.910 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 20:37:47.020 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 20:37:47.025 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 20:37:47.064 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 20:37:47.069 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:37:47.070 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:37:47.072 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:37:47.073 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:37:47.075 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:37:47.078 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 20:37:47.306 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 20:37:48.517 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:37:48.524 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 20:37:48.559 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 20:37:48.563 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 20:37:48.567 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:37:48.575 +04:00 [DBG] Connection id "0HMJJRGJ87FKO", Request id "0HMJJRGJ87FKO:00000002": started reading request body.
2022-08-01 20:37:48.577 +04:00 [DBG] Connection id "0HMJJRGJ87FKO", Request id "0HMJJRGJ87FKO:00000002": done reading request body.
2022-08-01 20:37:48.587 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 20:37:48.589 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 20:37:48.590 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 20:37:48.591 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 20:37:48.636 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 20:37:50.916 +04:00 [DBG] Authentication of the HTTPS connection timed out.
2022-08-01 20:37:50.916 +04:00 [DBG] Authentication of the HTTPS connection timed out.
2022-08-01 20:37:50.918 +04:00 [DBG] Connection id "0HMJJRGJ87FKK" stopped.
2022-08-01 20:37:50.921 +04:00 [DBG] Connection id "0HMJJRGJ87FKL" stopped.
2022-08-01 20:37:50.940 +04:00 [DBG] Connection id "0HMJJRGJ87FKK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:37:50.945 +04:00 [DBG] Connection id "0HMJJRGJ87FKL" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:37:51.137 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __password_1)'
2022-08-01 20:37:51.521 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__password_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 20:37:51.621 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:37:51.683 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (57ms).
2022-08-01 20:37:51.710 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:37:52.154 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:37:52.177 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 20:37:52.292 +04:00 [INF] Executed DbCommand (123ms) [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 20:37:52.371 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:37:52.434 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:37:52.444 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:37:52.459 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:37:52.705 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 20:37:52.709 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 20:37:52.710 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 20:37:52.711 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 20:37:52.713 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 20:37:52.715 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 20:37:52.733 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 5648.2898ms
2022-08-01 20:37:52.737 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 20:37:52.741 +04:00 [DBG] Connection id "0HMJJRGJ87FKO" completed keep alive response.
2022-08-01 20:37:52.748 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:37:52.758 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 59 - 200 - application/json;+charset=utf-8 5949.4704ms
2022-08-01 20:43:37.594 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 20:43:37.782 +04:00 [DBG] Hosting starting
2022-08-01 20:43:37.843 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 20:43:37.851 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 20:43:37.860 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 20:43:37.870 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 20:43:37.880 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 20:43:37.895 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 20:43:37.900 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 20:43:37.905 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 20:43:37.909 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 20:43:37.917 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 20:43:37.921 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 20:43:37.926 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 20:43:37.928 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 20:43:38.174 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 20:43:38.274 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 20:43:38.276 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 20:43:38.277 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 20:43:38.279 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 20:43:38.281 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 20:43:38.283 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 20:43:38.285 +04:00 [INF] Hosting environment: Development
2022-08-01 20:43:38.289 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 20:43:38.291 +04:00 [DBG] Hosting started
2022-08-01 20:43:38.526 +04:00 [DBG] Connection id "0HMJJRJU0UQ71" accepted.
2022-08-01 20:43:38.530 +04:00 [DBG] Connection id "0HMJJRJU0UQ71" started.
2022-08-01 20:43:38.557 +04:00 [DBG] Connection id "0HMJJRJU0UQ72" received FIN.
2022-08-01 20:43:38.561 +04:00 [DBG] Connection id "0HMJJRJU0UQ71" received FIN.
2022-08-01 20:43:38.563 +04:00 [DBG] Connection id "0HMJJRJU0UQ72" accepted.
2022-08-01 20:43:38.585 +04:00 [DBG] Connection id "0HMJJRJU0UQ72" started.
2022-08-01 20:43:38.593 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 20:43:38.593 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 20:43:38.665 +04:00 [DBG] Connection id "0HMJJRJU0UQ72" stopped.
2022-08-01 20:43:38.666 +04:00 [DBG] Connection id "0HMJJRJU0UQ71" stopped.
2022-08-01 20:43:38.671 +04:00 [DBG] Connection id "0HMJJRJU0UQ72" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:43:38.671 +04:00 [DBG] Connection id "0HMJJRJU0UQ71" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:43:38.925 +04:00 [DBG] Connection id "0HMJJRJU0UQ73" accepted.
2022-08-01 20:43:38.966 +04:00 [DBG] Connection id "0HMJJRJU0UQ73" started.
2022-08-01 20:43:39.019 +04:00 [DBG] Connection 0HMJJRJU0UQ73 established using the following protocol: "Tls12"
2022-08-01 20:43:39.114 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 20:43:39.164 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 20:43:39.295 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 20:43:39.469 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 20:43:39.476 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 20:43:39.480 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 9.8803ms
2022-08-01 20:43:39.480 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 372.4683ms
2022-08-01 20:43:39.543 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 20:43:39.602 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 58.7503ms
2022-08-01 20:43:39.787 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 20:43:39.940 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 153.2625ms
2022-08-01 20:43:58.192 +04:00 [DBG] Connection id "0HMJJRJU0UQ74" accepted.
2022-08-01 20:43:58.204 +04:00 [DBG] Connection id "0HMJJRJU0UQ74" started.
2022-08-01 20:43:58.214 +04:00 [DBG] Connection 0HMJJRJU0UQ74 established using the following protocol: "Tls12"
2022-08-01 20:43:58.217 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Account/Login - -
2022-08-01 20:43:58.221 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:43:58.223 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:43:58.255 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 20:43:58.260 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 20:43:58.270 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 20:43:58.272 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:43:58.274 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:43:58.276 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:43:58.278 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Account/Login - - - 204 - - 60.7554ms
2022-08-01 20:43:58.280 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Account/Login application/json 45
2022-08-01 20:43:58.281 +04:00 [DBG] POST requests are not supported
2022-08-01 20:43:58.282 +04:00 [DBG] POST requests are not supported
2022-08-01 20:43:58.285 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 20:43:58.286 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 20:43:58.288 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 20:43:58.289 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:43:58.291 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:43:58.372 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 20:43:58.377 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 20:43:58.409 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 20:43:58.413 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:43:58.414 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:43:58.416 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:43:58.418 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:43:58.420 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:43:58.422 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 20:43:58.622 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 20:43:59.757 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:43:59.764 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 20:43:59.779 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 20:43:59.784 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 20:43:59.787 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:43:59.796 +04:00 [DBG] Connection id "0HMJJRJU0UQ74", Request id "0HMJJRJU0UQ74:00000003": started reading request body.
2022-08-01 20:43:59.798 +04:00 [DBG] Connection id "0HMJJRJU0UQ74", Request id "0HMJJRJU0UQ74:00000003": done reading request body.
2022-08-01 20:43:59.808 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 20:43:59.809 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 20:43:59.811 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 20:43:59.813 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 20:43:59.841 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 20:43:59.974 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __password_1)'
2022-08-01 20:44:00.360 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__password_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 20:44:00.448 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:44:00.528 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (69ms).
2022-08-01 20:44:00.555 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:00.909 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:00.936 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 20:44:01.045 +04:00 [INF] Executed DbCommand (120ms) [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 20:44:01.143 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:44:01.198 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:44:01.208 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:01.219 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:01.406 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 20:44:01.410 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 20:44:01.411 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 20:44:01.412 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 20:44:01.414 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 20:44:01.415 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 20:44:01.439 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 3012.3871ms
2022-08-01 20:44:01.442 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 20:44:01.449 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Profile/1 - -
2022-08-01 20:44:01.450 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:44:01.451 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:44:01.452 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:44:01.454 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 20:44:01.456 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 20:44:01.459 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 20:44:01.460 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7058/Account/Login application/json 45 - 200 - application/json;+charset=utf-8 3180.6402ms
2022-08-01 20:44:01.461 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:44:01.462 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:44:01.463 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:44:01.464 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Profile/1 - - - 204 - - 14.6887ms
2022-08-01 20:44:01.467 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/Profile/1 application/json -
2022-08-01 20:44:01.468 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 20:44:01.469 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 20:44:01.470 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 20:44:01.471 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 20:44:01.473 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 20:44:01.475 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:44:01.475 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:44:01.572 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:44:01.575 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:44:01.584 +04:00 [DBG] Authorization was successful.
2022-08-01 20:44:01.587 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 20:44:01.594 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 20:44:01.598 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:44:01.599 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:44:01.600 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:44:01.603 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:44:01.604 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:44:01.606 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:44:01.647 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:44:01.649 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:44:01.650 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 20:44:01.652 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 20:44:01.654 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 20:44:01.656 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 20:44:01.657 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 20:44:01.659 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 20:44:01.688 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Where(x => x.UserId == __userId_0)
    .Include(x => x.Apartment)
    .Include(x => x.Order)
    .SingleOrDefault()'
2022-08-01 20:44:01.723 +04:00 [DBG] Including navigation: 'Profile.Apartment'.
2022-08-01 20:44:01.725 +04:00 [DBG] Including navigation: 'Profile.Order'.
2022-08-01 20:44:01.864 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
                1 -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Apartment.Address (string) Required, 8], [Property: Apartment.City (string), 9], [Property: Apartment.Description (string), 10], [Property: Apartment.DistanceToCenter (int) Required, 11], [Property: Apartment.From (DateTime) Required, 12], [Property: Apartment.HostId (int) Required FK Index, 13], [Property: Apartment.IsAvailable (bool) Required, 14], [Property: Apartment.NumbOfBeds (int) Required, 15], [Property: Apartment.Photo (string), 16], [Property: Apartment.To (DateTime) Required, 17] }
                2 -> 0
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Order.City (string) Required, 19], [Property: Order.CustomerId (int) Required, 20], [Property: Order.FirstName (string) Required, 21], [Property: Order.From (DateTime) Required, 22], [Property: Order.HostId (int) Required FK Index, 23], [Property: Order.LastName (string) Required, 24], [Property: Order.Status (int?), 25], [Property: Order.To (DateTime) Required, 26] }
                5 -> 18
            SELECT t.UserId, t.Description, t.Email, t.FirstName, t.LastName, t.Password, t.Photo, t.Id, t.Address, t.City, t.Description0, t.DistanceToCenter, t.From, t.HostId, t.IsAvailable, t.NumbOfBeds, t.Photo0, t.To, o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
            FROM 
            (
                SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo, a.Id, a.Address, a.City, a.Description AS Description0, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo AS Photo0, a.To
                FROM Profile AS p
                LEFT JOIN Apartments AS a ON p.UserId == a.HostId
                WHERE p.UserId == @__userId_0
            ) AS t
            LEFT JOIN Orders AS o ON t.UserId == o.HostId
            ORDER BY t.UserId ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 20:44:01.873 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:44:01.875 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-08-01 20:44:01.876 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:01.879 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:01.882 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 20:44:01.900 +04:00 [INF] Executed DbCommand (20ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 20:44:01.907 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:44:01.913 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:44:01.962 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:44:01.984 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:44:01.986 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:44:01.987 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:01.989 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:02.001 +04:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Where(x => x.CustomerId == __customerId_0)'
2022-08-01 20:44:02.008 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.City (string) Required, 1], [Property: Order.CustomerId (int) Required, 2], [Property: Order.FirstName (string) Required, 3], [Property: Order.From (DateTime) Required, 4], [Property: Order.HostId (int) Required FK Index, 5], [Property: Order.LastName (string) Required, 6], [Property: Order.Status (int?), 7], [Property: Order.To (DateTime) Required, 8] }
        SELECT o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
        FROM Orders AS o
        WHERE o.CustomerId == @__customerId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 20:44:02.013 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:44:02.014 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 20:44:02.016 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:02.019 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:02.021 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 20:44:02.026 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 20:44:02.029 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:44:02.032 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:44:02.033 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:44:02.034 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:02.035 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:44:02.192 +04:00 [INF] Get Profile
2022-08-01 20:44:02.211 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 20:44:02.216 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 20:44:02.218 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 20:44:02.221 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 20:44:02.225 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 20:44:02.230 +04:00 [INF] Executing OkObjectResult, writing value of type 'BookingApi.Models.DTO.ProfileDTO'.
2022-08-01 20:44:02.253 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 647.0306ms
2022-08-01 20:44:02.255 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 20:44:02.258 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:44:02.262 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/Profile/1 application/json - - 200 - application/json;+charset=utf-8 794.8869ms
2022-08-01 20:44:02.270 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Booking/1 - -
2022-08-01 20:44:02.271 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:44:02.273 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Guest/1 - -
2022-08-01 20:44:02.274 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:44:02.275 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:44:02.277 +04:00 [DBG] 1 candidate(s) found for the request path '/Booking/1'
2022-08-01 20:44:02.278 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:44:02.280 +04:00 [DBG] Endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)' with route pattern 'Booking/{customerId}' is valid for the request path '/Booking/1'
2022-08-01 20:44:02.281 +04:00 [DBG] 1 candidate(s) found for the request path '/Guest/1'
2022-08-01 20:44:02.286 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)'
2022-08-01 20:44:02.288 +04:00 [DBG] Endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)' with route pattern 'Guest/{hostId}' is valid for the request path '/Guest/1'
2022-08-01 20:44:02.292 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:44:02.295 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)'
2022-08-01 20:44:02.296 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:44:02.298 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:44:02.299 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:44:02.300 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:44:02.301 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Booking/1 - - - 204 - - 30.7055ms
2022-08-01 20:44:02.306 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:44:02.306 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/Booking/1 application/json -
2022-08-01 20:44:02.309 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Guest/1 - - - 204 - - 35.8295ms
2022-08-01 20:44:02.310 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 20:44:02.311 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/Guest/1 - -
2022-08-01 20:44:02.313 +04:00 [DBG] The request path /Booking/1 does not match a supported file type
2022-08-01 20:44:02.314 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 20:44:02.315 +04:00 [DBG] 1 candidate(s) found for the request path '/Booking/1'
2022-08-01 20:44:02.316 +04:00 [DBG] The request path /Guest/1 does not match a supported file type
2022-08-01 20:44:02.317 +04:00 [DBG] Endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)' with route pattern 'Booking/{customerId}' is valid for the request path '/Booking/1'
2022-08-01 20:44:02.318 +04:00 [DBG] 1 candidate(s) found for the request path '/Guest/1'
2022-08-01 20:44:02.321 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)'
2022-08-01 20:44:02.322 +04:00 [DBG] Endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)' with route pattern 'Guest/{hostId}' is valid for the request path '/Guest/1'
2022-08-01 20:44:02.324 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:44:02.325 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)'
2022-08-01 20:44:02.327 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:44:02.328 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:44:02.330 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:44:02.332 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:44:02.332 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:44:02.333 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:44:02.333 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:44:02.335 +04:00 [DBG] Authorization was successful.
2022-08-01 20:44:02.337 +04:00 [DBG] Authorization was successful.
2022-08-01 20:44:02.337 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)'
2022-08-01 20:44:02.338 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)'
2022-08-01 20:44:02.343 +04:00 [INF] Route matched with {action = "GetBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookings(Int32) on controller BookingApi.Controllers.BookingController (BookingApi).
2022-08-01 20:44:02.343 +04:00 [INF] Route matched with {action = "GetGuest", controller = "Guest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGuest(Int32) on controller BookingApi.Controllers.GuestController (BookingApi).
2022-08-01 20:44:02.345 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:44:02.348 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:44:02.349 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:44:02.350 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:44:02.351 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:44:02.353 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:44:02.354 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:44:02.357 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:44:02.358 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:44:02.359 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:44:02.361 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.BookingController (BookingApi)
2022-08-01 20:44:02.363 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.GuestController (BookingApi)
2022-08-01 20:44:02.374 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:44:02.374 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:44:02.378 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.BookingController (BookingApi)
2022-08-01 20:44:02.379 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.GuestController (BookingApi)
2022-08-01 20:44:02.380 +04:00 [DBG] Attempting to bind parameter 'customerId' of type 'System.Int32' ...
2022-08-01 20:44:02.381 +04:00 [DBG] Attempting to bind parameter 'hostId' of type 'System.Int32' ...
2022-08-01 20:44:02.382 +04:00 [DBG] Attempting to bind parameter 'customerId' of type 'System.Int32' using the name 'customerId' in request data ...
2022-08-01 20:44:02.384 +04:00 [DBG] Attempting to bind parameter 'hostId' of type 'System.Int32' using the name 'hostId' in request data ...
2022-08-01 20:44:02.386 +04:00 [DBG] Done attempting to bind parameter 'customerId' of type 'System.Int32'.
2022-08-01 20:44:02.388 +04:00 [DBG] Done attempting to bind parameter 'hostId' of type 'System.Int32'.
2022-08-01 20:44:02.389 +04:00 [DBG] Done attempting to bind parameter 'customerId' of type 'System.Int32'.
2022-08-01 20:44:02.391 +04:00 [DBG] Done attempting to bind parameter 'hostId' of type 'System.Int32'.
2022-08-01 20:44:02.393 +04:00 [DBG] Attempting to validate the bound parameter 'customerId' of type 'System.Int32' ...
2022-08-01 20:44:02.394 +04:00 [DBG] Attempting to validate the bound parameter 'hostId' of type 'System.Int32' ...
2022-08-01 20:44:02.397 +04:00 [DBG] Done attempting to validate the bound parameter 'customerId' of type 'System.Int32'.
2022-08-01 20:46:58.620 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 20:46:58.863 +04:00 [DBG] Hosting starting
2022-08-01 20:46:58.947 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 20:46:58.955 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 20:46:58.968 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 20:46:58.983 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 20:46:58.995 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 20:46:59.016 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 20:46:59.020 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 20:46:59.026 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 20:46:59.030 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 20:46:59.043 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 20:46:59.050 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 20:46:59.058 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 20:46:59.061 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 20:46:59.366 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 20:46:59.447 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 20:46:59.450 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 20:46:59.459 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 20:46:59.469 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 20:46:59.472 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 20:46:59.475 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 20:46:59.480 +04:00 [INF] Hosting environment: Development
2022-08-01 20:46:59.487 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 20:46:59.494 +04:00 [DBG] Hosting started
2022-08-01 20:46:59.524 +04:00 [DBG] Connection id "0HMJJRLPTQ3C3" accepted.
2022-08-01 20:46:59.524 +04:00 [DBG] Connection id "0HMJJRLPTQ3C2" accepted.
2022-08-01 20:46:59.529 +04:00 [DBG] Connection id "0HMJJRLPTQ3C3" started.
2022-08-01 20:46:59.538 +04:00 [DBG] Connection id "0HMJJRLPTQ3C2" started.
2022-08-01 20:46:59.543 +04:00 [DBG] Connection id "0HMJJRLPTQ3C3" received FIN.
2022-08-01 20:46:59.543 +04:00 [DBG] Connection id "0HMJJRLPTQ3C2" received FIN.
2022-08-01 20:46:59.580 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 20:46:59.580 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 20:46:59.672 +04:00 [DBG] Connection id "0HMJJRLPTQ3C2" stopped.
2022-08-01 20:46:59.673 +04:00 [DBG] Connection id "0HMJJRLPTQ3C3" stopped.
2022-08-01 20:46:59.689 +04:00 [DBG] Connection id "0HMJJRLPTQ3C2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:46:59.689 +04:00 [DBG] Connection id "0HMJJRLPTQ3C3" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:47:00.003 +04:00 [DBG] Connection id "0HMJJRLPTQ3C4" accepted.
2022-08-01 20:47:00.008 +04:00 [DBG] Connection id "0HMJJRLPTQ3C4" started.
2022-08-01 20:47:00.100 +04:00 [DBG] Connection 0HMJJRLPTQ3C4 established using the following protocol: "Tls12"
2022-08-01 20:47:00.204 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 20:47:00.269 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 20:47:00.448 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 20:47:00.652 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 20:47:00.658 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 20:47:00.663 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 10.4001ms
2022-08-01 20:47:00.664 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 467.6075ms
2022-08-01 20:47:00.741 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 20:47:00.818 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.2322ms
2022-08-01 20:47:01.083 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 20:47:01.296 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.5205ms
2022-08-01 20:47:38.916 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5" accepted.
2022-08-01 20:47:38.918 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5" started.
2022-08-01 20:47:38.935 +04:00 [DBG] Connection 0HMJJRLPTQ3C5 established using the following protocol: "Tls12"
2022-08-01 20:47:38.944 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Profile/AddApartment - -
2022-08-01 20:47:38.953 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:47:38.956 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:47:39.002 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:47:39.010 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:47:39.015 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:47:39.020 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:47:39.021 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:47:39.025 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:47:39.027 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Profile/AddApartment - - - 204 - - 83.2181ms
2022-08-01 20:47:39.029 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Profile/AddApartment application/json 270
2022-08-01 20:47:39.033 +04:00 [DBG] POST requests are not supported
2022-08-01 20:47:39.035 +04:00 [DBG] POST requests are not supported
2022-08-01 20:47:39.039 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:47:39.040 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:47:39.045 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:47:39.049 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:47:39.050 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:47:39.501 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:47:39.504 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:47:39.515 +04:00 [DBG] Authorization was successful.
2022-08-01 20:47:39.519 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:47:39.576 +04:00 [INF] Route matched with {action = "AddApartment", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddApartment(BookingApi.Models.Request.ApartmentRequest) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 20:47:39.581 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:47:39.583 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:47:39.585 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:47:39.592 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:47:39.595 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:47:39.599 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:47:39.823 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 20:47:41.317 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:47:41.325 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:47:41.342 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:47:41.348 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' using the name '' in request data ...
2022-08-01 20:47:41.354 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:47:41.367 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:00000003": started reading request body.
2022-08-01 20:47:41.370 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:00000003": done reading request body.
2022-08-01 20:47:41.384 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.ApartmentRequest'
2022-08-01 20:47:41.386 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:47:41.388 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:47:41.389 +04:00 [DBG] Attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:47:41.512 +04:00 [DBG] Done attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:47:47.377 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Apartment'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:47:47.490 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:47:47.505 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 20:47:47.518 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 20:47:47.546 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 20:47:47.693 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:47:48.146 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:47:48.165 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 20:47:48.227 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 20:47:48.366 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:47:48.385 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (11ms).
2022-08-01 20:47:48.431 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:47:48.604 +04:00 [ERR] Failed executing DbCommand (231ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:47:48.640 +04:00 [DBG] Disposing transaction.
2022-08-01 20:47:48.653 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:47:48.668 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:47:48.694 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Booking.PersistanceDB.Context.BookingContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-08-01 20:47:49.096 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.AddApartment (BookingApi) in 9490.6549ms
2022-08-01 20:47:49.101 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:47:49.109 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Booking.DataEF.BaseRepository`1.AddAsync(T entity) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\BaseRepository.cs:line 29
   at Booking.DataEF.SearchRepository.AddApartment(Apartment apartment) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\SearchRepository.cs:line 31
   at Booking.Services.Implementations.ProfileService.AddApartment(ApartmentServiceModel apartment) in D:\Albert\AltexProject\BookingApi\BookingService\Implementations\ProfileService.cs:line 29
   at BookingApi.Controllers.ProfileController.AddApartment(ApartmentRequest apartment) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\ProfileController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 20:47:49.257 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:47:49.264 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7058/Profile/AddApartment application/json 270 - 500 - text/plain;+charset=utf-8 10234.9120ms
2022-08-01 20:48:09.834 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Profile/AddApartment - -
2022-08-01 20:48:09.836 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:48:09.838 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:48:09.839 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:48:09.841 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:48:09.848 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:48:09.854 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:48:09.856 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:48:09.857 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:48:09.861 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Profile/AddApartment - - - 204 - - 26.6146ms
2022-08-01 20:48:09.867 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Profile/AddApartment application/json 334
2022-08-01 20:48:09.868 +04:00 [DBG] POST requests are not supported
2022-08-01 20:48:09.870 +04:00 [DBG] POST requests are not supported
2022-08-01 20:48:09.872 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:48:09.873 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:48:09.880 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:48:09.883 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:48:09.884 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:48:09.887 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:48:09.888 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:48:09.890 +04:00 [DBG] Authorization was successful.
2022-08-01 20:48:09.894 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:48:09.896 +04:00 [INF] Route matched with {action = "AddApartment", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddApartment(BookingApi.Models.Request.ApartmentRequest) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 20:48:09.900 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:48:09.902 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:48:09.907 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:48:09.913 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:48:09.917 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:48:09.924 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:48:09.991 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:48:09.996 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:48:09.999 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:48:10.001 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' using the name '' in request data ...
2022-08-01 20:48:10.004 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:48:10.007 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:00000007": started reading request body.
2022-08-01 20:48:10.009 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:00000007": done reading request body.
2022-08-01 20:48:10.016 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.ApartmentRequest'
2022-08-01 20:48:10.017 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:48:10.020 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:48:10.022 +04:00 [DBG] Attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:48:10.026 +04:00 [DBG] Done attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:48:43.178 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Apartment'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:48:43.182 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:48:43.706 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 20:48:43.709 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 20:48:43.710 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 20:48:43.713 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:48:43.717 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:48:43.720 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 20:48:43.723 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 20:48:43.724 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:48:43.727 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-08-01 20:48:43.730 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:48:43.770 +04:00 [ERR] Failed executing DbCommand (46ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:48:43.777 +04:00 [DBG] Disposing transaction.
2022-08-01 20:48:43.778 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:48:43.783 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:48:43.787 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Booking.PersistanceDB.Context.BookingContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-08-01 20:48:44.477 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.AddApartment (BookingApi) in 34553.6652ms
2022-08-01 20:48:44.479 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:48:44.482 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Booking.DataEF.BaseRepository`1.AddAsync(T entity) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\BaseRepository.cs:line 29
   at Booking.DataEF.SearchRepository.AddApartment(Apartment apartment) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\SearchRepository.cs:line 31
   at Booking.Services.Implementations.ProfileService.AddApartment(ApartmentServiceModel apartment) in D:\Albert\AltexProject\BookingApi\BookingService\Implementations\ProfileService.cs:line 29
   at BookingApi.Controllers.ProfileController.AddApartment(ApartmentRequest apartment) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\ProfileController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 20:48:44.551 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:48:44.552 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7058/Profile/AddApartment application/json 334 - 500 - text/plain;+charset=utf-8 34685.2547ms
2022-08-01 20:50:06.954 +04:00 [DBG] Connection id "0HMJJRLPTQ3C6" accepted.
2022-08-01 20:50:06.958 +04:00 [DBG] Connection id "0HMJJRLPTQ3C6" received FIN.
2022-08-01 20:50:06.959 +04:00 [DBG] Connection id "0HMJJRLPTQ3C6" started.
2022-08-01 20:50:06.960 +04:00 [DBG] Connection id "0HMJJRLPTQ3C7" accepted.
2022-08-01 20:50:06.965 +04:00 [DBG] Connection id "0HMJJRLPTQ3C7" started.
2022-08-01 20:50:06.972 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 20:50:06.974 +04:00 [DBG] Connection 0HMJJRLPTQ3C7 established using the following protocol: "Tls12"
2022-08-01 20:50:06.979 +04:00 [DBG] Connection id "0HMJJRLPTQ3C6" stopped.
2022-08-01 20:50:06.982 +04:00 [DBG] Connection id "0HMJJRLPTQ3C6" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:50:06.990 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Profile/AddApartment application/json 258
2022-08-01 20:50:06.994 +04:00 [DBG] POST requests are not supported
2022-08-01 20:50:06.996 +04:00 [DBG] POST requests are not supported
2022-08-01 20:50:06.998 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:50:07.001 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:50:07.004 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:50:07.009 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:50:07.010 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:50:07.013 +04:00 [DBG] Authorization was successful.
2022-08-01 20:50:07.014 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:50:07.016 +04:00 [INF] Route matched with {action = "AddApartment", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddApartment(BookingApi.Models.Request.ApartmentRequest) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 20:50:07.022 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:50:07.026 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:50:07.028 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:50:07.033 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:50:07.035 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:50:07.039 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:50:07.055 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:50:07.060 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:50:07.061 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:50:07.064 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' using the name '' in request data ...
2022-08-01 20:50:07.066 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:50:07.070 +04:00 [DBG] Connection id "0HMJJRLPTQ3C7", Request id "0HMJJRLPTQ3C7:00000002": started reading request body.
2022-08-01 20:50:07.072 +04:00 [DBG] Connection id "0HMJJRLPTQ3C7", Request id "0HMJJRLPTQ3C7:00000002": done reading request body.
2022-08-01 20:50:07.084 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.ApartmentRequest'
2022-08-01 20:50:07.086 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:50:07.088 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:50:07.089 +04:00 [DBG] Attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:50:07.093 +04:00 [DBG] Done attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:50:11.188 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Apartment'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:50:11.214 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:50:11.242 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 20:50:11.256 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 20:50:11.259 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 20:50:11.261 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:50:11.268 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:50:11.273 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 20:50:11.283 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 20:50:11.292 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:50:11.298 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (6ms).
2022-08-01 20:50:11.306 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:50:11.338 +04:00 [ERR] Failed executing DbCommand (46ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:50:11.378 +04:00 [DBG] Disposing transaction.
2022-08-01 20:50:11.379 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:50:11.383 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:50:11.407 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Booking.PersistanceDB.Context.BookingContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-08-01 20:50:12.041 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.AddApartment (BookingApi) in 5001.3717ms
2022-08-01 20:50:12.042 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:50:12.044 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Apartments' with unique index 'IX_Apartments_HostId'. The duplicate key value is (1).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:455e19e1-8b87-41a5-a094-5f57d20154f3
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Booking.DataEF.BaseRepository`1.AddAsync(T entity) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\BaseRepository.cs:line 29
   at Booking.DataEF.SearchRepository.AddApartment(Apartment apartment) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\SearchRepository.cs:line 31
   at Booking.Services.Implementations.ProfileService.AddApartment(ApartmentServiceModel apartment) in D:\Albert\AltexProject\BookingApi\BookingService\Implementations\ProfileService.cs:line 29
   at BookingApi.Controllers.ProfileController.AddApartment(ApartmentRequest apartment) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\ProfileController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 20:50:12.136 +04:00 [DBG] Connection id "0HMJJRLPTQ3C7" completed keep alive response.
2022-08-01 20:50:12.137 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:50:12.139 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Profile/AddApartment application/json 258 - 500 - text/plain;+charset=utf-8 5149.6007ms
2022-08-01 20:50:50.816 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Profile/AddApartment - -
2022-08-01 20:50:50.823 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:50:50.824 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:50:50.825 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:50:50.827 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:50:50.832 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:50:50.836 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:50:50.838 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:50:50.840 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:50:50.841 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Profile/AddApartment - - - 204 - - 24.6336ms
2022-08-01 20:50:50.842 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Profile/AddApartment application/json 334
2022-08-01 20:50:50.843 +04:00 [DBG] POST requests are not supported
2022-08-01 20:50:50.844 +04:00 [DBG] POST requests are not supported
2022-08-01 20:50:50.846 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:50:50.847 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:50:50.852 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:50:50.853 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:50:50.854 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:50:50.856 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:50:50.856 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:50:50.858 +04:00 [DBG] Authorization was successful.
2022-08-01 20:50:50.859 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:50:50.860 +04:00 [INF] Route matched with {action = "AddApartment", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddApartment(BookingApi.Models.Request.ApartmentRequest) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 20:50:50.863 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:50:50.867 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:50:50.869 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:50:50.873 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:50:50.876 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:50:50.883 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:50:53.709 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:50:53.714 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:50:53.715 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:50:53.717 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' using the name '' in request data ...
2022-08-01 20:50:53.720 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:50:53.722 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:0000000B": started reading request body.
2022-08-01 20:50:53.723 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:0000000B": done reading request body.
2022-08-01 20:50:53.724 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.ApartmentRequest'
2022-08-01 20:50:53.726 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:50:53.727 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:50:53.729 +04:00 [DBG] Attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:50:53.737 +04:00 [DBG] Done attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:50:58.319 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Apartment'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:50:58.336 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:50:58.341 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 20:50:58.342 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 20:50:58.344 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 20:50:58.346 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:50:58.349 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:50:58.352 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 20:50:58.356 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 20:50:58.357 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:50:58.358 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 20:50:58.360 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:50:58.375 +04:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:50:58.449 +04:00 [DBG] The foreign key property 'Apartment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 20:50:58.516 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:50:58.529 +04:00 [DBG] Committing transaction.
2022-08-01 20:50:58.543 +04:00 [DBG] Committed transaction.
2022-08-01 20:50:58.547 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:50:58.560 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:50:58.567 +04:00 [DBG] Disposing transaction.
2022-08-01 20:50:58.599 +04:00 [DBG] An entity of type 'Apartment' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:50:58.615 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 20:50:58.625 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 20:50:58.629 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.AddApartment (BookingApi) in 7746.0353ms
2022-08-01 20:50:58.636 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:50:58.638 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:50:58.640 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7058/Profile/AddApartment application/json 334 - 200 0 - 7798.0254ms
2022-08-01 20:51:44.680 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Search - -
2022-08-01 20:51:44.684 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:51:44.686 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:51:44.691 +04:00 [DBG] 1 candidate(s) found for the request path '/Search'
2022-08-01 20:51:44.694 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)' with route pattern 'Search' is valid for the request path '/Search'
2022-08-01 20:51:44.703 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:51:44.704 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:51:44.715 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:51:44.716 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:51:44.718 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Search - - - 204 - - 37.6497ms
2022-08-01 20:51:44.720 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Search application/json 83
2022-08-01 20:51:44.722 +04:00 [DBG] POST requests are not supported
2022-08-01 20:51:44.723 +04:00 [DBG] POST requests are not supported
2022-08-01 20:51:44.725 +04:00 [DBG] 1 candidate(s) found for the request path '/Search'
2022-08-01 20:51:44.726 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)' with route pattern 'Search' is valid for the request path '/Search'
2022-08-01 20:51:44.728 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:51:44.729 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:51:44.731 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:51:44.733 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:51:44.734 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:51:44.735 +04:00 [DBG] Authorization was successful.
2022-08-01 20:51:44.739 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:51:44.743 +04:00 [INF] Route matched with {action = "GetApartment", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetApartment(BookingApi.Models.Request.SearchRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 20:51:44.746 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:51:44.748 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:51:44.749 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:51:44.755 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:51:44.756 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:51:44.758 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 20:51:44.760 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:51:44.763 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 20:51:44.764 +04:00 [DBG] Attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' ...
2022-08-01 20:51:44.768 +04:00 [DBG] Attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' using the name '' in request data ...
2022-08-01 20:51:44.771 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:51:44.773 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:0000000F": started reading request body.
2022-08-01 20:51:44.774 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:0000000F": done reading request body.
2022-08-01 20:51:44.776 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.SearchRequest'
2022-08-01 20:51:44.777 +04:00 [DBG] Done attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:51:44.779 +04:00 [DBG] Done attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:51:44.780 +04:00 [DBG] Attempting to validate the bound parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' ...
2022-08-01 20:51:44.786 +04:00 [DBG] Done attempting to validate the bound parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:52:10.047 +04:00 [DBG] Compiling query expression: 
'DbSet<Apartment>()
    .Where(x => x.City == __city_0)'
2022-08-01 20:52:10.593 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Apartment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Apartment.Address (string) Required, 1], [Property: Apartment.City (string), 2], [Property: Apartment.Description (string), 3], [Property: Apartment.DistanceToCenter (int) Required, 4], [Property: Apartment.From (DateTime) Required, 5], [Property: Apartment.HostId (int) Required FK Index, 6], [Property: Apartment.IsAvailable (bool) Required, 7], [Property: Apartment.NumbOfBeds (int) Required, 8], [Property: Apartment.Photo (string), 9], [Property: Apartment.To (DateTime) Required, 10] }
        SELECT a.Id, a.Address, a.City, a.Description, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo, a.To
        FROM Apartments AS a
        WHERE a.City == @__city_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Apartment>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 20:52:10.720 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:52:10.721 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 20:52:10.723 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:52:10.727 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:52:10.728 +04:00 [DBG] Executing DbCommand [Parameters=[@__city_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[City] = @__city_0
2022-08-01 20:52:10.762 +04:00 [INF] Executed DbCommand (34ms) [Parameters=[@__city_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[City] = @__city_0
2022-08-01 20:52:10.790 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:52:10.795 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:52:10.796 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:52:10.798 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:52:59.317 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 20:52:59.323 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 20:52:59.324 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 20:52:59.326 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 20:52:59.328 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 20:52:59.332 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookingApi.Models.DTO.ApartmentDTO, BookingApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-01 20:52:59.346 +04:00 [INF] Executed action BookingApi.Controllers.SearchController.GetApartment (BookingApi) in 74587.1379ms
2022-08-01 20:52:59.348 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:52:59.353 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:52:59.356 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7058/Search application/json 83 - 200 - application/json;+charset=utf-8 74636.4866ms
2022-08-01 20:55:43.177 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Profile/AddApartment - -
2022-08-01 20:55:43.179 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:55:43.183 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:55:43.189 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:55:43.192 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:55:43.195 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:55:43.197 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:55:43.199 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:55:43.201 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:55:43.205 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Profile/AddApartment - - - 204 - - 27.8197ms
2022-08-01 20:55:43.208 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Profile/AddApartment application/json 224
2022-08-01 20:55:43.211 +04:00 [DBG] POST requests are not supported
2022-08-01 20:55:43.213 +04:00 [DBG] POST requests are not supported
2022-08-01 20:55:43.216 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/AddApartment'
2022-08-01 20:55:43.221 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)' with route pattern 'Profile/AddApartment' is valid for the request path '/Profile/AddApartment'
2022-08-01 20:55:43.226 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:55:43.228 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:55:43.230 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:55:43.233 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:55:43.237 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:55:43.238 +04:00 [DBG] Authorization was successful.
2022-08-01 20:55:43.240 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:55:43.242 +04:00 [INF] Route matched with {action = "AddApartment", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddApartment(BookingApi.Models.Request.ApartmentRequest) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 20:55:43.245 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:55:43.247 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:55:43.249 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:55:43.258 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:55:43.260 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:55:43.264 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:55:43.268 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:55:43.271 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 20:55:43.273 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:55:43.275 +04:00 [DBG] Attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' using the name '' in request data ...
2022-08-01 20:55:43.277 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:55:43.280 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:00000013": started reading request body.
2022-08-01 20:55:43.284 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:00000013": done reading request body.
2022-08-01 20:55:43.286 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.ApartmentRequest'
2022-08-01 20:55:43.287 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:55:43.289 +04:00 [DBG] Done attempting to bind parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:55:43.291 +04:00 [DBG] Attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest' ...
2022-08-01 20:55:43.294 +04:00 [DBG] Done attempting to validate the bound parameter 'apartment' of type 'BookingApi.Models.Request.ApartmentRequest'.
2022-08-01 20:55:48.266 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'Id.Apartment'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:55:48.290 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:55:48.293 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 20:55:48.295 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 20:55:48.297 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 20:55:48.298 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:55:48.304 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:55:48.306 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 20:55:48.308 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 20:55:48.309 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:55:48.310 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 20:55:48.312 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:55:48.327 +04:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Boolean), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Apartments] ([Address], [City], [Description], [DistanceToCenter], [From], [HostId], [IsAvailable], [NumbOfBeds], [Photo], [To])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
SELECT [Id]
FROM [Apartments]
WHERE @@ROWCOUNT = 1 AND [Id] = scope_identity();
2022-08-01 20:55:48.336 +04:00 [DBG] The foreign key property 'Apartment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 20:55:48.339 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:55:48.340 +04:00 [DBG] Committing transaction.
2022-08-01 20:55:48.352 +04:00 [DBG] Committed transaction.
2022-08-01 20:55:48.354 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:55:48.356 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:55:48.358 +04:00 [DBG] Disposing transaction.
2022-08-01 20:55:48.359 +04:00 [DBG] An entity of type 'Apartment' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:55:48.364 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 20:55:48.366 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 20:55:48.367 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.AddApartment (BookingApi) in 5103.531ms
2022-08-01 20:55:48.370 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.AddApartment (BookingApi)'
2022-08-01 20:55:48.372 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:55:48.373 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7058/Profile/AddApartment application/json 224 - 200 0 - 5165.0810ms
2022-08-01 20:56:06.684 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Search - -
2022-08-01 20:56:06.686 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:56:06.689 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:56:06.691 +04:00 [DBG] 1 candidate(s) found for the request path '/Search'
2022-08-01 20:56:06.693 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)' with route pattern 'Search' is valid for the request path '/Search'
2022-08-01 20:56:06.699 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:56:06.705 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:56:06.707 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:56:06.709 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:56:06.710 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Search - - - 204 - - 25.7645ms
2022-08-01 20:56:06.716 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Search application/json 83
2022-08-01 20:56:06.719 +04:00 [DBG] POST requests are not supported
2022-08-01 20:56:06.721 +04:00 [DBG] POST requests are not supported
2022-08-01 20:56:06.725 +04:00 [DBG] 1 candidate(s) found for the request path '/Search'
2022-08-01 20:56:06.726 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)' with route pattern 'Search' is valid for the request path '/Search'
2022-08-01 20:56:06.729 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:56:06.731 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:56:06.735 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:56:06.739 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:56:06.741 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:56:06.744 +04:00 [DBG] Authorization was successful.
2022-08-01 20:56:06.746 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:56:06.751 +04:00 [INF] Route matched with {action = "GetApartment", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetApartment(BookingApi.Models.Request.SearchRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 20:56:06.758 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:56:06.760 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:56:06.765 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:56:06.771 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:56:06.775 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:56:06.779 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 20:56:06.782 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:56:06.785 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 20:56:06.787 +04:00 [DBG] Attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' ...
2022-08-01 20:56:06.790 +04:00 [DBG] Attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' using the name '' in request data ...
2022-08-01 20:56:06.793 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:56:06.798 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:00000017": started reading request body.
2022-08-01 20:56:06.799 +04:00 [DBG] Connection id "0HMJJRLPTQ3C5", Request id "0HMJJRLPTQ3C5:00000017": done reading request body.
2022-08-01 20:56:06.801 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.SearchRequest'
2022-08-01 20:56:06.803 +04:00 [DBG] Done attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:56:06.805 +04:00 [DBG] Done attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:56:06.807 +04:00 [DBG] Attempting to validate the bound parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' ...
2022-08-01 20:56:06.811 +04:00 [DBG] Done attempting to validate the bound parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:56:20.116 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:56:20.120 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2022-08-01 20:56:20.123 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:56:20.125 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:56:20.127 +04:00 [DBG] Executing DbCommand [Parameters=[@__city_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[City] = @__city_0
2022-08-01 20:56:20.133 +04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__city_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[City] = @__city_0
2022-08-01 20:56:20.165 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:56:20.168 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:56:20.169 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:56:20.171 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:58:04.137 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 20:58:04.341 +04:00 [DBG] Hosting starting
2022-08-01 20:58:04.407 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 20:58:04.412 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 20:58:04.422 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 20:58:04.430 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 20:58:04.437 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 20:58:04.450 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 20:58:04.454 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 20:58:04.462 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 20:58:04.466 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 20:58:04.477 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 20:58:04.483 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 20:58:04.492 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 20:58:04.496 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 20:58:04.738 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 20:58:04.818 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 20:58:04.820 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 20:58:04.824 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 20:58:04.827 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 20:58:04.831 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 20:58:04.833 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 20:58:04.835 +04:00 [INF] Hosting environment: Development
2022-08-01 20:58:04.836 +04:00 [DBG] Connection id "0HMJJRS06OUVH" received FIN.
2022-08-01 20:58:04.838 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 20:58:04.846 +04:00 [DBG] Hosting started
2022-08-01 20:58:04.859 +04:00 [DBG] Connection id "0HMJJRS06OUVH" accepted.
2022-08-01 20:58:04.864 +04:00 [DBG] Connection id "0HMJJRS06OUVH" started.
2022-08-01 20:58:04.893 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 20:58:04.992 +04:00 [DBG] Connection id "0HMJJRS06OUVH" stopped.
2022-08-01 20:58:04.999 +04:00 [DBG] Connection id "0HMJJRS06OUVH" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 20:58:05.784 +04:00 [DBG] Connection id "0HMJJRS06OUVI" accepted.
2022-08-01 20:58:05.786 +04:00 [DBG] Connection id "0HMJJRS06OUVI" started.
2022-08-01 20:58:05.853 +04:00 [DBG] Connection 0HMJJRS06OUVI established using the following protocol: "Tls12"
2022-08-01 20:58:05.935 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 20:58:05.996 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 20:58:06.160 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 20:58:06.355 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 20:58:06.358 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 20:58:06.363 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 434.4471ms
2022-08-01 20:58:06.363 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 7.2335ms
2022-08-01 20:58:06.424 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 20:58:06.464 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 39.3972ms
2022-08-01 20:58:06.679 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 20:58:06.862 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 183.4321ms
2022-08-01 20:58:17.079 +04:00 [DBG] Connection id "0HMJJRS06OUVJ" accepted.
2022-08-01 20:58:17.081 +04:00 [DBG] Connection id "0HMJJRS06OUVJ" started.
2022-08-01 20:58:17.090 +04:00 [DBG] Connection 0HMJJRS06OUVJ established using the following protocol: "Tls12"
2022-08-01 20:58:17.093 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Search - -
2022-08-01 20:58:17.098 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:58:17.100 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 20:58:17.168 +04:00 [DBG] 1 candidate(s) found for the request path '/Search'
2022-08-01 20:58:17.176 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)' with route pattern 'Search' is valid for the request path '/Search'
2022-08-01 20:58:17.183 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:58:17.186 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:58:17.189 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:58:17.192 +04:00 [DBG] The request is a preflight request.
2022-08-01 20:58:17.194 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Search - - - 204 - - 101.5560ms
2022-08-01 20:58:17.198 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Search application/json 83
2022-08-01 20:58:17.200 +04:00 [DBG] POST requests are not supported
2022-08-01 20:58:17.202 +04:00 [DBG] POST requests are not supported
2022-08-01 20:58:17.205 +04:00 [DBG] 1 candidate(s) found for the request path '/Search'
2022-08-01 20:58:17.206 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)' with route pattern 'Search' is valid for the request path '/Search'
2022-08-01 20:58:17.209 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:58:17.211 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 20:58:17.216 +04:00 [INF] CORS policy execution successful.
2022-08-01 20:58:17.634 +04:00 [DBG] Successfully validated the token.
2022-08-01 20:58:17.639 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 20:58:17.649 +04:00 [DBG] Authorization was successful.
2022-08-01 20:58:17.655 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:58:17.695 +04:00 [INF] Route matched with {action = "GetApartment", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetApartment(BookingApi.Models.Request.SearchRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 20:58:17.700 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 20:58:17.702 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 20:58:17.704 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 20:58:17.708 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 20:58:17.710 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 20:58:17.716 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 20:58:17.985 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 20:58:19.471 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 20:58:19.476 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 20:58:19.494 +04:00 [DBG] Attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' ...
2022-08-01 20:58:19.499 +04:00 [DBG] Attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' using the name '' in request data ...
2022-08-01 20:58:19.503 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 20:58:19.515 +04:00 [DBG] Connection id "0HMJJRS06OUVJ", Request id "0HMJJRS06OUVJ:00000003": started reading request body.
2022-08-01 20:58:19.518 +04:00 [DBG] Connection id "0HMJJRS06OUVJ", Request id "0HMJJRS06OUVJ:00000003": done reading request body.
2022-08-01 20:58:19.532 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.SearchRequest'
2022-08-01 20:58:19.535 +04:00 [DBG] Done attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:58:19.538 +04:00 [DBG] Done attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:58:19.544 +04:00 [DBG] Attempting to validate the bound parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' ...
2022-08-01 20:58:19.585 +04:00 [DBG] Done attempting to validate the bound parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 20:58:29.995 +04:00 [DBG] Compiling query expression: 
'DbSet<Apartment>()
    .Where(x => x.City == __city_0)'
2022-08-01 20:58:30.564 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Apartment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Apartment.Address (string) Required, 1], [Property: Apartment.City (string), 2], [Property: Apartment.Description (string), 3], [Property: Apartment.DistanceToCenter (int) Required, 4], [Property: Apartment.From (DateTime) Required, 5], [Property: Apartment.HostId (int) Required FK Index, 6], [Property: Apartment.IsAvailable (bool) Required, 7], [Property: Apartment.NumbOfBeds (int) Required, 8], [Property: Apartment.Photo (string), 9], [Property: Apartment.To (DateTime) Required, 10] }
        SELECT a.Id, a.Address, a.City, a.Description, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo, a.To
        FROM Apartments AS a
        WHERE a.City == @__city_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Apartment>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 20:58:30.680 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 20:58:30.754 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (69ms).
2022-08-01 20:58:30.792 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:58:31.310 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:58:31.339 +04:00 [DBG] Executing DbCommand [Parameters=[@__city_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[City] = @__city_0
2022-08-01 20:58:31.472 +04:00 [INF] Executed DbCommand (141ms) [Parameters=[@__city_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[City] = @__city_0
2022-08-01 20:58:31.575 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 20:58:31.659 +04:00 [DBG] A data reader was disposed.
2022-08-01 20:58:31.672 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:58:31.689 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 20:58:44.158 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 20:58:44.174 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 20:58:44.178 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 20:58:44.192 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 20:58:44.202 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 20:58:44.209 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookingApi.Models.DTO.ApartmentDTO, BookingApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-01 20:58:44.429 +04:00 [INF] Executed action BookingApi.Controllers.SearchController.GetApartment (BookingApi) in 26706.9905ms
2022-08-01 20:58:44.434 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 20:58:44.451 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 20:58:44.459 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7058/Search application/json 83 - 200 - application/json;+charset=utf-8 27261.2851ms
2022-08-01 21:05:13.804 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 21:05:13.930 +04:00 [DBG] Hosting starting
2022-08-01 21:05:13.991 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 21:05:13.995 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 21:05:14.001 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 21:05:14.008 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 21:05:14.014 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 21:05:14.027 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 21:05:14.030 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 21:05:14.034 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 21:05:14.036 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 21:05:14.042 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 21:05:14.047 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 21:05:14.052 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 21:05:14.053 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 21:05:14.271 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 21:05:14.339 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 21:05:14.344 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 21:05:14.346 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 21:05:14.348 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 21:05:14.350 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 21:05:14.353 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 21:05:14.354 +04:00 [INF] Hosting environment: Development
2022-08-01 21:05:14.355 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 21:05:14.357 +04:00 [DBG] Hosting started
2022-08-01 21:05:14.707 +04:00 [DBG] Connection id "0HMJJS00AA3T2" accepted.
2022-08-01 21:05:14.707 +04:00 [DBG] Connection id "0HMJJS00AA3T1" accepted.
2022-08-01 21:05:14.711 +04:00 [DBG] Connection id "0HMJJS00AA3T2" started.
2022-08-01 21:05:14.714 +04:00 [DBG] Connection id "0HMJJS00AA3T1" started.
2022-08-01 21:05:15.368 +04:00 [DBG] Connection id "0HMJJS00AA3T3" accepted.
2022-08-01 21:05:15.371 +04:00 [DBG] Connection id "0HMJJS00AA3T3" started.
2022-08-01 21:05:15.462 +04:00 [DBG] Connection 0HMJJS00AA3T3 established using the following protocol: "Tls12"
2022-08-01 21:05:15.608 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 21:05:15.652 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 21:05:15.808 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 21:05:15.841 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 21:05:15.852 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 248.1426ms
2022-08-01 21:05:15.880 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 21:05:15.886 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 6.0817ms
2022-08-01 21:05:16.282 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 21:05:16.506 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 223.7334ms
2022-08-01 21:05:24.759 +04:00 [DBG] Authentication of the HTTPS connection timed out.
2022-08-01 21:05:24.759 +04:00 [DBG] Authentication of the HTTPS connection timed out.
2022-08-01 21:05:24.766 +04:00 [DBG] Connection id "0HMJJS00AA3T1" stopped.
2022-08-01 21:05:24.766 +04:00 [DBG] Connection id "0HMJJS00AA3T2" stopped.
2022-08-01 21:05:24.768 +04:00 [DBG] Connection id "0HMJJS00AA3T1" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 21:05:24.768 +04:00 [DBG] Connection id "0HMJJS00AA3T2" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 21:07:07.629 +04:00 [DBG] Connection id "0HMJJS00AA3T4" accepted.
2022-08-01 21:07:07.631 +04:00 [DBG] Connection id "0HMJJS00AA3T4" started.
2022-08-01 21:07:07.641 +04:00 [DBG] Connection 0HMJJS00AA3T4 established using the following protocol: "Tls12"
2022-08-01 21:07:07.645 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Account/Login - -
2022-08-01 21:07:07.654 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:07:07.655 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:07:07.690 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 21:07:07.695 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 21:07:07.698 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 21:07:07.701 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:07:07.703 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:07:07.705 +04:00 [DBG] The request is a preflight request.
2022-08-01 21:07:07.707 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Account/Login - - - 204 - - 61.6254ms
2022-08-01 21:07:07.708 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Account/Login application/json 45
2022-08-01 21:07:07.710 +04:00 [DBG] POST requests are not supported
2022-08-01 21:07:07.711 +04:00 [DBG] POST requests are not supported
2022-08-01 21:07:07.714 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 21:07:07.716 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 21:07:07.718 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 21:07:07.720 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:07:07.721 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:07:07.803 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 21:07:07.806 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 21:07:07.840 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 21:07:07.843 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 21:07:07.845 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 21:07:07.847 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 21:07:07.849 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 21:07:07.851 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 21:07:07.854 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 21:07:08.070 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 21:07:09.196 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 21:07:09.201 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 21:07:09.215 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 21:07:09.219 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 21:07:09.222 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 21:07:09.228 +04:00 [DBG] Connection id "0HMJJS00AA3T4", Request id "0HMJJS00AA3T4:00000003": started reading request body.
2022-08-01 21:07:09.230 +04:00 [DBG] Connection id "0HMJJS00AA3T4", Request id "0HMJJS00AA3T4:00000003": done reading request body.
2022-08-01 21:07:09.241 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 21:07:09.242 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 21:07:09.244 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 21:07:09.246 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 21:07:09.276 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 21:07:09.423 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __password_1)'
2022-08-01 21:07:09.835 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__password_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 21:07:09.952 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 21:07:10.011 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (54ms).
2022-08-01 21:07:10.036 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:10.379 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:10.400 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 21:07:10.504 +04:00 [INF] Executed DbCommand (112ms) [Parameters=[@__email_0='?' (Size = 450), @__password_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__password_1)
2022-08-01 21:07:10.623 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:10.667 +04:00 [DBG] A data reader was disposed.
2022-08-01 21:07:10.676 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:10.689 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:10.869 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 21:07:10.874 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 21:07:10.874 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 21:07:10.876 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 21:07:10.878 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 21:07:10.880 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 21:07:10.894 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 3035.3636ms
2022-08-01 21:07:10.897 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 21:07:10.919 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Profile/1 - -
2022-08-01 21:07:10.920 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 21:07:10.920 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:07:10.923 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:07:10.924 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 21:07:10.925 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 21:07:10.927 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 21:07:10.928 +04:00 [INF] Request finished HTTP/2 POST https://localhost:7058/Account/Login application/json 45 - 200 - application/json;+charset=utf-8 3219.1512ms
2022-08-01 21:07:10.929 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:07:10.930 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:07:10.932 +04:00 [DBG] The request is a preflight request.
2022-08-01 21:07:10.933 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Profile/1 - - - 204 - - 14.8535ms
2022-08-01 21:07:10.936 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/Profile/1 application/json -
2022-08-01 21:07:10.937 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 21:07:10.938 +04:00 [DBG] The request path /Profile/1 does not match a supported file type
2022-08-01 21:07:10.940 +04:00 [DBG] 1 candidate(s) found for the request path '/Profile/1'
2022-08-01 21:07:10.942 +04:00 [DBG] Endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)' with route pattern 'Profile/{userId}' is valid for the request path '/Profile/1'
2022-08-01 21:07:10.944 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 21:07:10.945 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:07:10.946 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:07:11.067 +04:00 [DBG] Successfully validated the token.
2022-08-01 21:07:11.069 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 21:07:11.078 +04:00 [DBG] Authorization was successful.
2022-08-01 21:07:11.080 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 21:07:11.085 +04:00 [INF] Route matched with {action = "GetProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfile(Int32) on controller BookingApi.Controllers.ProfileController (BookingApi).
2022-08-01 21:07:11.087 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 21:07:11.089 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 21:07:11.090 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 21:07:11.092 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 21:07:11.093 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 21:07:11.095 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 21:07:11.140 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 21:07:11.143 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.ProfileController (BookingApi)
2022-08-01 21:07:11.144 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' ...
2022-08-01 21:07:11.146 +04:00 [DBG] Attempting to bind parameter 'userId' of type 'System.Int32' using the name 'userId' in request data ...
2022-08-01 21:07:11.148 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 21:07:11.149 +04:00 [DBG] Done attempting to bind parameter 'userId' of type 'System.Int32'.
2022-08-01 21:07:11.150 +04:00 [DBG] Attempting to validate the bound parameter 'userId' of type 'System.Int32' ...
2022-08-01 21:07:11.152 +04:00 [DBG] Done attempting to validate the bound parameter 'userId' of type 'System.Int32'.
2022-08-01 21:07:11.171 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .Where(x => x.UserId == __userId_0)
    .Include(x => x.Apartment)
    .Include(x => x.Order)
    .SingleOrDefault()'
2022-08-01 21:07:11.214 +04:00 [DBG] Including navigation: 'Profile.Apartment'.
2022-08-01 21:07:11.218 +04:00 [DBG] Including navigation: 'Profile.Order'.
2022-08-01 21:07:11.363 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
                1 -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: Apartment.Address (string) Required, 8], [Property: Apartment.City (string), 9], [Property: Apartment.Description (string), 10], [Property: Apartment.DistanceToCenter (int) Required, 11], [Property: Apartment.From (DateTime) Required, 12], [Property: Apartment.HostId (int) Required FK Index, 13], [Property: Apartment.IsAvailable (bool) Required, 14], [Property: Apartment.NumbOfBeds (int) Required, 15], [Property: Apartment.Photo (string), 16], [Property: Apartment.To (DateTime) Required, 17] }
                2 -> 0
                3 -> 7
                4 -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 18], [Property: Order.City (string) Required, 19], [Property: Order.CustomerId (int) Required, 20], [Property: Order.FirstName (string) Required, 21], [Property: Order.From (DateTime) Required, 22], [Property: Order.HostId (int) Required FK Index, 23], [Property: Order.LastName (string) Required, 24], [Property: Order.Status (int?), 25], [Property: Order.To (DateTime) Required, 26] }
                5 -> 18
            SELECT t.UserId, t.Description, t.Email, t.FirstName, t.LastName, t.Password, t.Photo, t.Id, t.Address, t.City, t.Description0, t.DistanceToCenter, t.From, t.HostId, t.IsAvailable, t.NumbOfBeds, t.Photo0, t.To, o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
            FROM 
            (
                SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo, a.Id, a.Address, a.City, a.Description AS Description0, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo AS Photo0, a.To
                FROM Profile AS p
                LEFT JOIN Apartments AS a ON p.UserId == a.HostId
                WHERE p.UserId == @__userId_0
            ) AS t
            LEFT JOIN Orders AS o ON t.UserId == o.HostId
            ORDER BY t.UserId ASC, t.Id ASC), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 21:07:11.374 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 21:07:11.376 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-08-01 21:07:11.378 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:11.381 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:11.385 +04:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 21:07:11.397 +04:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[UserId], [t].[Description], [t].[Email], [t].[FirstName], [t].[LastName], [t].[Password], [t].[Photo], [t].[Id], [t].[Address], [t].[City], [t].[Description0], [t].[DistanceToCenter], [t].[From], [t].[HostId], [t].[IsAvailable], [t].[NumbOfBeds], [t].[Photo0], [t].[To], [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM (
    SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo], [a].[Id], [a].[Address], [a].[City], [a].[Description] AS [Description0], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo] AS [Photo0], [a].[To]
    FROM [Profile] AS [p]
    LEFT JOIN [Apartments] AS [a] ON [p].[UserId] = [a].[HostId]
    WHERE [p].[UserId] = @__userId_0
) AS [t]
LEFT JOIN [Orders] AS [o] ON [t].[UserId] = [o].[HostId]
ORDER BY [t].[UserId], [t].[Id]
2022-08-01 21:07:11.407 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:11.415 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:11.471 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:11.493 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:11.495 +04:00 [DBG] A data reader was disposed.
2022-08-01 21:07:11.496 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:11.497 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:11.505 +04:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Where(x => x.CustomerId == __customerId_0)'
2022-08-01 21:07:11.511 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.City (string) Required, 1], [Property: Order.CustomerId (int) Required, 2], [Property: Order.FirstName (string) Required, 3], [Property: Order.From (DateTime) Required, 4], [Property: Order.HostId (int) Required FK Index, 5], [Property: Order.LastName (string) Required, 6], [Property: Order.Status (int?), 7], [Property: Order.To (DateTime) Required, 8] }
        SELECT o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
        FROM Orders AS o
        WHERE o.CustomerId == @__customerId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 21:07:11.514 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 21:07:11.515 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-08-01 21:07:11.516 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:11.518 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:11.519 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 21:07:11.523 +04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 21:07:11.525 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:11.528 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:11.530 +04:00 [DBG] A data reader was disposed.
2022-08-01 21:07:11.531 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:11.532 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:11.694 +04:00 [INF] Get Profile
2022-08-01 21:07:11.709 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 21:07:11.713 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 21:07:11.714 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 21:07:11.715 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 21:07:11.716 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 21:07:11.718 +04:00 [INF] Executing OkObjectResult, writing value of type 'BookingApi.Models.DTO.ProfileDTO'.
2022-08-01 21:07:11.731 +04:00 [INF] Executed action BookingApi.Controllers.ProfileController.GetProfile (BookingApi) in 636.0808ms
2022-08-01 21:07:11.733 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.ProfileController.GetProfile (BookingApi)'
2022-08-01 21:07:11.735 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 21:07:11.737 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/Profile/1 application/json - - 200 - application/json;+charset=utf-8 801.5845ms
2022-08-01 21:07:11.745 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Booking/1 - -
2022-08-01 21:07:11.746 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:07:11.747 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Guest/1 - -
2022-08-01 21:07:11.748 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:07:11.749 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:07:11.751 +04:00 [DBG] 1 candidate(s) found for the request path '/Booking/1'
2022-08-01 21:07:11.752 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:07:11.754 +04:00 [DBG] Endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)' with route pattern 'Booking/{customerId}' is valid for the request path '/Booking/1'
2022-08-01 21:07:11.756 +04:00 [DBG] 1 candidate(s) found for the request path '/Guest/1'
2022-08-01 21:07:11.758 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)'
2022-08-01 21:07:11.759 +04:00 [DBG] Endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)' with route pattern 'Guest/{hostId}' is valid for the request path '/Guest/1'
2022-08-01 21:07:11.760 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:07:11.762 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)'
2022-08-01 21:07:11.763 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:07:11.764 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:07:11.765 +04:00 [DBG] The request is a preflight request.
2022-08-01 21:07:11.766 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:07:11.767 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Booking/1 - - - 204 - - 22.5566ms
2022-08-01 21:07:11.768 +04:00 [DBG] The request is a preflight request.
2022-08-01 21:07:11.769 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/Booking/1 application/json -
2022-08-01 21:07:11.772 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Guest/1 - - - 204 - - 25.4426ms
2022-08-01 21:07:11.773 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 21:07:11.774 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/Guest/1 - -
2022-08-01 21:07:11.776 +04:00 [DBG] The request path /Booking/1 does not match a supported file type
2022-08-01 21:07:11.776 +04:00 [DBG] The request path  does not match the path filter
2022-08-01 21:07:11.778 +04:00 [DBG] 1 candidate(s) found for the request path '/Booking/1'
2022-08-01 21:07:11.779 +04:00 [DBG] The request path /Guest/1 does not match a supported file type
2022-08-01 21:07:11.780 +04:00 [DBG] Endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)' with route pattern 'Booking/{customerId}' is valid for the request path '/Booking/1'
2022-08-01 21:07:11.781 +04:00 [DBG] 1 candidate(s) found for the request path '/Guest/1'
2022-08-01 21:07:11.783 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)'
2022-08-01 21:07:11.784 +04:00 [DBG] Endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)' with route pattern 'Guest/{hostId}' is valid for the request path '/Guest/1'
2022-08-01 21:07:11.785 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:07:11.788 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)'
2022-08-01 21:07:11.789 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:07:11.790 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:07:11.792 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:07:11.794 +04:00 [DBG] Successfully validated the token.
2022-08-01 21:07:11.794 +04:00 [DBG] Successfully validated the token.
2022-08-01 21:07:11.795 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 21:07:11.796 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 21:07:11.797 +04:00 [DBG] Authorization was successful.
2022-08-01 21:07:11.798 +04:00 [DBG] Authorization was successful.
2022-08-01 21:07:11.799 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)'
2022-08-01 21:07:11.800 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.BookingController.GetBookings (BookingApi)'
2022-08-01 21:07:11.804 +04:00 [INF] Route matched with {action = "GetGuest", controller = "Guest"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGuest(Int32) on controller BookingApi.Controllers.GuestController (BookingApi).
2022-08-01 21:07:11.806 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 21:07:11.808 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 21:07:11.808 +04:00 [INF] Route matched with {action = "GetBookings", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookings(Int32) on controller BookingApi.Controllers.BookingController (BookingApi).
2022-08-01 21:07:11.809 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 21:07:11.811 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 21:07:11.813 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 21:07:11.814 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 21:07:11.815 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 21:07:11.817 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 21:07:11.819 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.GuestController (BookingApi)
2022-08-01 21:07:11.821 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 21:07:11.824 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 21:07:11.826 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.BookingController (BookingApi)
2022-08-01 21:07:11.837 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 21:07:11.837 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 21:07:11.841 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.GuestController (BookingApi)
2022-08-01 21:07:11.844 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.BookingController (BookingApi)
2022-08-01 21:07:11.845 +04:00 [DBG] Attempting to bind parameter 'hostId' of type 'System.Int32' ...
2022-08-01 21:07:11.846 +04:00 [DBG] Attempting to bind parameter 'customerId' of type 'System.Int32' ...
2022-08-01 21:07:11.851 +04:00 [DBG] Attempting to bind parameter 'hostId' of type 'System.Int32' using the name 'hostId' in request data ...
2022-08-01 21:07:11.853 +04:00 [DBG] Attempting to bind parameter 'customerId' of type 'System.Int32' using the name 'customerId' in request data ...
2022-08-01 21:07:11.856 +04:00 [DBG] Done attempting to bind parameter 'hostId' of type 'System.Int32'.
2022-08-01 21:07:11.859 +04:00 [DBG] Done attempting to bind parameter 'customerId' of type 'System.Int32'.
2022-08-01 21:07:11.861 +04:00 [DBG] Done attempting to bind parameter 'hostId' of type 'System.Int32'.
2022-08-01 21:07:11.863 +04:00 [DBG] Done attempting to bind parameter 'customerId' of type 'System.Int32'.
2022-08-01 21:07:11.866 +04:00 [DBG] Attempting to validate the bound parameter 'hostId' of type 'System.Int32' ...
2022-08-01 21:07:11.868 +04:00 [DBG] Attempting to validate the bound parameter 'customerId' of type 'System.Int32' ...
2022-08-01 21:07:11.871 +04:00 [DBG] Done attempting to validate the bound parameter 'hostId' of type 'System.Int32'.
2022-08-01 21:07:11.872 +04:00 [DBG] Done attempting to validate the bound parameter 'customerId' of type 'System.Int32'.
2022-08-01 21:07:27.599 +04:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Where(x => x.HostId == __hostId_0)'
2022-08-01 21:07:27.603 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 21:07:27.604 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 21:07:27.605 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Order.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.City (string) Required, 1], [Property: Order.CustomerId (int) Required, 2], [Property: Order.FirstName (string) Required, 3], [Property: Order.From (DateTime) Required, 4], [Property: Order.HostId (int) Required FK Index, 5], [Property: Order.LastName (string) Required, 6], [Property: Order.Status (int?), 7], [Property: Order.To (DateTime) Required, 8] }
        SELECT o.Id, o.City, o.CustomerId, o.FirstName, o.From, o.HostId, o.LastName, o.Status, o.To
        FROM Orders AS o
        WHERE o.HostId == @__hostId_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 21:07:27.606 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.609 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 21:07:27.610 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.611 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 21:07:27.612 +04:00 [DBG] Executing DbCommand [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 21:07:27.613 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.615 +04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__customerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[CustomerId] = @__customerId_0
2022-08-01 21:07:27.627 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:27.629 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:27.629 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.632 +04:00 [DBG] A data reader was disposed.
2022-08-01 21:07:27.634 +04:00 [DBG] Executing DbCommand [Parameters=[@__hostId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[HostId] = @__hostId_0
2022-08-01 21:07:27.636 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.640 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.640 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [o].[Id], [o].[City], [o].[CustomerId], [o].[FirstName], [o].[From], [o].[HostId], [o].[LastName], [o].[Status], [o].[To]
FROM [Orders] AS [o]
WHERE [o].[HostId] = @__hostId_0
2022-08-01 21:07:27.643 +04:00 [DBG] Compiling query expression: 
'DbSet<Apartment>()
    .Where(x => x.HostId == __hostId_0)
    .SingleOrDefault()'
2022-08-01 21:07:27.644 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:27.646 +04:00 [DBG] Context 'BookingContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:07:27.647 +04:00 [DBG] A data reader was disposed.
2022-08-01 21:07:27.648 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.649 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Apartment>(
    asyncEnumerable: new SingleQueryingEnumerable<Apartment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Apartment.Address (string) Required, 1], [Property: Apartment.City (string), 2], [Property: Apartment.Description (string), 3], [Property: Apartment.DistanceToCenter (int) Required, 4], [Property: Apartment.From (DateTime) Required, 5], [Property: Apartment.HostId (int) Required FK Index, 6], [Property: Apartment.IsAvailable (bool) Required, 7], [Property: Apartment.NumbOfBeds (int) Required, 8], [Property: Apartment.Photo (string), 9], [Property: Apartment.To (DateTime) Required, 10] }
            SELECT TOP(2) a.Id, a.Address, a.City, a.Description, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo, a.To
            FROM Apartments AS a
            WHERE a.HostId == @__hostId_0), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Apartment>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 21:07:27.649 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.655 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 21:07:27.656 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 21:07:27.657 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.657 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 21:07:27.658 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.660 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 21:07:27.662 +04:00 [DBG] Executing DbCommand [Parameters=[@__hostId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[HostId] = @__hostId_0
2022-08-01 21:07:27.663 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 21:07:27.667 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 21:07:27.668 +04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__hostId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[HostId] = @__hostId_0
2022-08-01 21:07:27.668 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 21:07:27.670 +04:00 [DBG] A data reader was disposed.
2022-08-01 21:07:27.672 +04:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookingApi.Models.DTO.GuestDTO, BookingApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2022-08-01 21:07:27.672 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.673 +04:00 [INF] Executed action BookingApi.Controllers.GuestController.GetGuest (BookingApi) in 15854.6714ms
2022-08-01 21:07:27.675 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:07:27.676 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.GuestController.GetGuest (BookingApi)'
2022-08-01 21:07:48.109 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 21:07:48.347 +04:00 [DBG] Hosting starting
2022-08-01 21:07:48.404 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 21:07:48.410 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 21:07:48.418 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 21:07:48.425 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 21:07:48.432 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 21:07:48.443 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 21:07:48.446 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 21:07:48.451 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 21:07:48.454 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 21:07:48.468 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 21:07:48.473 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 21:07:48.478 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 21:07:48.480 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 21:07:48.687 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 21:07:48.743 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 21:07:48.745 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 21:07:48.746 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 21:07:48.747 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 21:07:48.748 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 21:07:48.750 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 21:07:48.751 +04:00 [INF] Hosting environment: Development
2022-08-01 21:07:48.753 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 21:07:48.754 +04:00 [DBG] Hosting started
2022-08-01 21:07:48.817 +04:00 [DBG] Connection id "0HMJJS1E821D4" received FIN.
2022-08-01 21:07:48.829 +04:00 [DBG] Connection id "0HMJJS1E821D4" accepted.
2022-08-01 21:07:48.832 +04:00 [DBG] Connection id "0HMJJS1E821D4" started.
2022-08-01 21:07:48.849 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 21:07:48.931 +04:00 [DBG] Connection id "0HMJJS1E821D4" stopped.
2022-08-01 21:07:48.937 +04:00 [DBG] Connection id "0HMJJS1E821D4" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 21:07:49.464 +04:00 [DBG] Connection id "0HMJJS1E821D5" accepted.
2022-08-01 21:07:49.467 +04:00 [DBG] Connection id "0HMJJS1E821D5" started.
2022-08-01 21:07:49.585 +04:00 [DBG] Connection 0HMJJS1E821D5 established using the following protocol: "Tls12"
2022-08-01 21:07:49.665 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 21:07:49.716 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 21:07:49.836 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 21:07:50.127 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 21:07:50.134 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 21:07:50.137 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 8.3082ms
2022-08-01 21:07:50.138 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 479.1286ms
2022-08-01 21:07:50.198 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 21:07:50.292 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 94.1005ms
2022-08-01 21:07:50.477 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 21:07:50.654 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 177.7174ms
2022-08-01 21:08:02.202 +04:00 [DBG] Connection id "0HMJJS1E821D6" accepted.
2022-08-01 21:08:02.204 +04:00 [DBG] Connection id "0HMJJS1E821D6" started.
2022-08-01 21:08:02.212 +04:00 [DBG] Connection 0HMJJS1E821D6 established using the following protocol: "Tls12"
2022-08-01 21:08:02.214 +04:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7058/Search - -
2022-08-01 21:08:02.218 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:08:02.219 +04:00 [DBG] OPTIONS requests are not supported
2022-08-01 21:08:02.258 +04:00 [DBG] 1 candidate(s) found for the request path '/Search'
2022-08-01 21:08:02.265 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)' with route pattern 'Search' is valid for the request path '/Search'
2022-08-01 21:08:02.268 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 21:08:02.272 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:08:02.274 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:08:02.275 +04:00 [DBG] The request is a preflight request.
2022-08-01 21:08:02.277 +04:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7058/Search - - - 204 - - 62.7406ms
2022-08-01 21:08:02.278 +04:00 [INF] Request starting HTTP/2 POST https://localhost:7058/Search application/json 83
2022-08-01 21:08:02.279 +04:00 [DBG] POST requests are not supported
2022-08-01 21:08:02.280 +04:00 [DBG] POST requests are not supported
2022-08-01 21:08:02.282 +04:00 [DBG] 1 candidate(s) found for the request path '/Search'
2022-08-01 21:08:02.284 +04:00 [DBG] Endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)' with route pattern 'Search' is valid for the request path '/Search'
2022-08-01 21:08:02.287 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 21:08:02.288 +04:00 [DBG] The request has an origin header: 'http://localhost:3000'.
2022-08-01 21:08:02.288 +04:00 [INF] CORS policy execution successful.
2022-08-01 21:08:02.607 +04:00 [DBG] Successfully validated the token.
2022-08-01 21:08:02.609 +04:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2022-08-01 21:08:02.619 +04:00 [DBG] Authorization was successful.
2022-08-01 21:08:02.622 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.SearchController.GetApartment (BookingApi)'
2022-08-01 21:08:02.661 +04:00 [INF] Route matched with {action = "GetApartment", controller = "Search"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetApartment(BookingApi.Models.Request.SearchRequest) on controller BookingApi.Controllers.SearchController (BookingApi).
2022-08-01 21:08:02.664 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 21:08:02.666 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 21:08:02.668 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 21:08:02.671 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 21:08:02.672 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 21:08:02.675 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 21:08:02.886 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 21:08:04.130 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 21:08:04.134 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.SearchController (BookingApi)
2022-08-01 21:08:04.150 +04:00 [DBG] Attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' ...
2022-08-01 21:08:04.155 +04:00 [DBG] Attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' using the name '' in request data ...
2022-08-01 21:08:04.157 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 21:08:04.166 +04:00 [DBG] Connection id "0HMJJS1E821D6", Request id "0HMJJS1E821D6:00000003": started reading request body.
2022-08-01 21:08:04.168 +04:00 [DBG] Connection id "0HMJJS1E821D6", Request id "0HMJJS1E821D6:00000003": done reading request body.
2022-08-01 21:08:04.181 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.SearchRequest'
2022-08-01 21:08:04.183 +04:00 [DBG] Done attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 21:08:04.185 +04:00 [DBG] Done attempting to bind parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 21:08:04.186 +04:00 [DBG] Attempting to validate the bound parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest' ...
2022-08-01 21:08:04.229 +04:00 [DBG] Done attempting to validate the bound parameter 'searchRequest' of type 'BookingApi.Models.Request.SearchRequest'.
2022-08-01 21:08:10.345 +04:00 [DBG] Compiling query expression: 
'DbSet<Apartment>()
    .Where(x => x.City == __city_0)'
2022-08-01 21:08:10.802 +04:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Apartment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Apartment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Apartment.Address (string) Required, 1], [Property: Apartment.City (string), 2], [Property: Apartment.Description (string), 3], [Property: Apartment.DistanceToCenter (int) Required, 4], [Property: Apartment.From (DateTime) Required, 5], [Property: Apartment.HostId (int) Required FK Index, 6], [Property: Apartment.IsAvailable (bool) Required, 7], [Property: Apartment.NumbOfBeds (int) Required, 8], [Property: Apartment.Photo (string), 9], [Property: Apartment.To (DateTime) Required, 10] }
        SELECT a.Id, a.Address, a.City, a.Description, a.DistanceToCenter, a.From, a.HostId, a.IsAvailable, a.NumbOfBeds, a.Photo, a.To
        FROM Apartments AS a
        WHERE a.City == @__city_0), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Apartment>, 
    Booking.PersistanceDB.Context.BookingContext, 
    False, 
    False, 
    True
)'
2022-08-01 21:08:10.905 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 21:08:10.968 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (58ms).
2022-08-01 21:08:10.993 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:08:11.435 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:08:11.455 +04:00 [DBG] Executing DbCommand [Parameters=[@__city_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[City] = @__city_0
2022-08-01 21:08:11.553 +04:00 [INF] Executed DbCommand (103ms) [Parameters=[@__city_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[Address], [a].[City], [a].[Description], [a].[DistanceToCenter], [a].[From], [a].[HostId], [a].[IsAvailable], [a].[NumbOfBeds], [a].[Photo], [a].[To]
FROM [Apartments] AS [a]
WHERE [a].[City] = @__city_0
2022-08-01 21:08:11.622 +04:00 [DBG] Context 'BookingContext' started tracking 'Apartment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 21:08:11.692 +04:00 [DBG] A data reader was disposed.
2022-08-01 21:08:11.703 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 21:08:11.715 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:19:31.729 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 22:19:31.958 +04:00 [DBG] Hosting starting
2022-08-01 22:19:32.020 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 22:19:32.027 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 22:19:32.034 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 22:19:32.042 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 22:19:32.050 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 22:19:32.064 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 22:19:32.068 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:19:32.073 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 22:19:32.076 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:19:32.084 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 22:19:32.089 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 22:19:32.095 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 22:19:32.098 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 22:19:32.348 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 22:19:32.420 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 22:19:32.421 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 22:19:32.423 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 22:19:32.426 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 22:19:32.428 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 22:19:32.430 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 22:19:32.432 +04:00 [INF] Hosting environment: Development
2022-08-01 22:19:32.433 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 22:19:32.435 +04:00 [DBG] Hosting started
2022-08-01 22:19:32.436 +04:00 [DBG] Connection id "0HMJJT9GQI7D7" received FIN.
2022-08-01 22:19:32.454 +04:00 [DBG] Connection id "0HMJJT9GQI7D7" accepted.
2022-08-01 22:19:32.458 +04:00 [DBG] Connection id "0HMJJT9GQI7D7" started.
2022-08-01 22:19:32.488 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:19:32.562 +04:00 [DBG] Connection id "0HMJJT9GQI7D7" stopped.
2022-08-01 22:19:32.570 +04:00 [DBG] Connection id "0HMJJT9GQI7D7" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:19:32.758 +04:00 [DBG] Connection id "0HMJJT9GQI7D8" accepted.
2022-08-01 22:19:32.762 +04:00 [DBG] Connection id "0HMJJT9GQI7D8" started.
2022-08-01 22:19:32.880 +04:00 [DBG] Connection 0HMJJT9GQI7D8 established using the following protocol: "Tls12"
2022-08-01 22:19:32.965 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 22:19:33.016 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 22:19:33.128 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 22:19:33.284 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 22:19:33.291 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 22:19:33.294 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 8.5400ms
2022-08-01 22:19:33.294 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 335.2001ms
2022-08-01 22:19:33.353 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 22:19:33.387 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 33.5136ms
2022-08-01 22:19:33.600 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 22:19:33.752 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 152.3043ms
2022-08-01 22:20:17.923 +04:00 [DBG] Connection id "0HMJJT9GQI7D9" accepted.
2022-08-01 22:20:17.929 +04:00 [DBG] Connection id "0HMJJT9GQI7D9" received FIN.
2022-08-01 22:20:17.930 +04:00 [DBG] Connection id "0HMJJT9GQI7D9" started.
2022-08-01 22:20:17.952 +04:00 [DBG] Connection id "0HMJJT9GQI7DA" accepted.
2022-08-01 22:20:17.956 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:20:17.958 +04:00 [DBG] Connection id "0HMJJT9GQI7DA" started.
2022-08-01 22:20:17.963 +04:00 [DBG] Connection id "0HMJJT9GQI7D9" stopped.
2022-08-01 22:20:17.966 +04:00 [DBG] Connection id "0HMJJT9GQI7D9" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:20:17.971 +04:00 [DBG] Connection 0HMJJT9GQI7DA established using the following protocol: "Tls12"
2022-08-01 22:20:17.987 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Register application/json 104
2022-08-01 22:20:17.991 +04:00 [DBG] POST requests are not supported
2022-08-01 22:20:17.992 +04:00 [DBG] POST requests are not supported
2022-08-01 22:20:18.033 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Register'
2022-08-01 22:20:18.040 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)' with route pattern 'Account/Register' is valid for the request path '/Account/Register'
2022-08-01 22:20:18.044 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:20:18.199 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:20:18.205 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:20:18.271 +04:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BookingApi.Models.Request.AccountRegisterRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:20:18.279 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:20:18.284 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:20:18.289 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:20:18.295 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:20:18.299 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:20:18.305 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:20:18.537 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 22:20:20.004 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:20:20.011 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:20:20.031 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:20:20.036 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' using the name '' in request data ...
2022-08-01 22:20:20.040 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:20:20.049 +04:00 [DBG] Connection id "0HMJJT9GQI7DA", Request id "0HMJJT9GQI7DA:00000002": started reading request body.
2022-08-01 22:20:20.051 +04:00 [DBG] Connection id "0HMJJT9GQI7DA", Request id "0HMJJT9GQI7DA:00000002": done reading request body.
2022-08-01 22:20:20.063 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountRegisterRequest'
2022-08-01 22:20:20.065 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:20:20.067 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:20:20.069 +04:00 [DBG] Attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:20:20.118 +04:00 [DBG] Done attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:20:49.832 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'UserId.Profile'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:20:49.955 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:20:50.490 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 22:20:50.508 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 22:20:50.528 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 22:20:50.637 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:20:51.160 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:20:51.169 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 22:20:51.194 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 22:20:51.306 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:20:51.323 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (8ms).
2022-08-01 22:20:51.366 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:20:51.555 +04:00 [ERR] Failed executing DbCommand (236ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:20:51.591 +04:00 [DBG] Disposing transaction.
2022-08-01 22:20:51.603 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:20:51.620 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:20:51.643 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Booking.PersistanceDB.Context.BookingContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Profile' with unique index 'IX_Profile_Email'. The duplicate key value is (Abo).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee82eedb-6bac-4d67-8238-85024587def6
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Profile' with unique index 'IX_Profile_Email'. The duplicate key value is (Abo).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee82eedb-6bac-4d67-8238-85024587def6
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-08-01 22:20:52.473 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Register (BookingApi) in 34161.8207ms
2022-08-01 22:20:52.478 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:20:52.485 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Profile' with unique index 'IX_Profile_Email'. The duplicate key value is (Abo).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee82eedb-6bac-4d67-8238-85024587def6
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Booking.DataEF.BaseRepository`1.AddAsync(T entity) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\BaseRepository.cs:line 29
   at Booking.DataEF.ProfileRepository.AddUser(Profile user) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\ProfileRepository.cs:line 42
   at Booking.Services.Implementations.ProfileService.RegisterUser(ProfileServiceModel user) in D:\Albert\AltexProject\BookingApi\BookingService\Implementations\ProfileService.cs:line 65
   at BookingApi.Controllers.AccountController.Register(AccountRegisterRequest registerRequest) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\AccountController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 22:20:52.602 +04:00 [DBG] Connection id "0HMJJT9GQI7DA" completed keep alive response.
2022-08-01 22:20:52.624 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:20:52.633 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Register application/json 104 - 500 - text/plain;+charset=utf-8 34646.6041ms
2022-08-01 22:21:18.502 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Register application/json 114
2022-08-01 22:21:18.505 +04:00 [DBG] POST requests are not supported
2022-08-01 22:21:18.506 +04:00 [DBG] POST requests are not supported
2022-08-01 22:21:18.511 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Register'
2022-08-01 22:21:18.514 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)' with route pattern 'Account/Register' is valid for the request path '/Account/Register'
2022-08-01 22:21:18.516 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:21:18.518 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:21:18.519 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:21:18.521 +04:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BookingApi.Models.Request.AccountRegisterRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:21:18.523 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:21:18.526 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:21:18.528 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:21:18.531 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:21:18.533 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:21:18.536 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:21:23.839 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:21:23.843 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:21:23.845 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:21:23.849 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' using the name '' in request data ...
2022-08-01 22:21:23.852 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:21:23.854 +04:00 [DBG] Connection id "0HMJJT9GQI7DA", Request id "0HMJJT9GQI7DA:00000003": started reading request body.
2022-08-01 22:21:23.855 +04:00 [DBG] Connection id "0HMJJT9GQI7DA", Request id "0HMJJT9GQI7DA:00000003": done reading request body.
2022-08-01 22:21:23.857 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountRegisterRequest'
2022-08-01 22:21:23.858 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:21:23.859 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:21:23.861 +04:00 [DBG] Attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:21:23.865 +04:00 [DBG] Done attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:21:26.593 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'UserId.Profile'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:21:26.598 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:21:26.601 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 22:21:26.602 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 22:21:26.605 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 22:21:26.608 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:21:26.615 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:21:26.618 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 22:21:26.621 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 22:21:26.624 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:21:26.626 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 22:21:26.628 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:21:26.656 +04:00 [ERR] Failed executing DbCommand (32ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:21:26.662 +04:00 [DBG] Disposing transaction.
2022-08-01 22:21:26.664 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:21:26.668 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:21:26.672 +04:00 [ERR] An exception occurred in the database while saving changes for context type 'Booking.PersistanceDB.Context.BookingContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Profile' with unique index 'IX_Profile_Email'. The duplicate key value is (Abo@gmail.com).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee82eedb-6bac-4d67-8238-85024587def6
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Profile' with unique index 'IX_Profile_Email'. The duplicate key value is (Abo@gmail.com).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee82eedb-6bac-4d67-8238-85024587def6
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-08-01 22:21:26.974 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Register (BookingApi) in 8437.7321ms
2022-08-01 22:21:26.976 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:21:26.978 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert duplicate key row in object 'dbo.Profile' with unique index 'IX_Profile_Email'. The duplicate key value is (Abo@gmail.com).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__188_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__272_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:ee82eedb-6bac-4d67-8238-85024587def6
Error Number:2601,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Booking.DataEF.BaseRepository`1.AddAsync(T entity) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\BaseRepository.cs:line 29
   at Booking.DataEF.ProfileRepository.AddUser(Profile user) in D:\Albert\AltexProject\BookingApi\Booking.Data.EF\ProfileRepository.cs:line 42
   at Booking.Services.Implementations.ProfileService.RegisterUser(ProfileServiceModel user) in D:\Albert\AltexProject\BookingApi\BookingService\Implementations\ProfileService.cs:line 65
   at BookingApi.Controllers.AccountController.Register(AccountRegisterRequest registerRequest) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\AccountController.cs:line 51
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 22:21:27.023 +04:00 [DBG] Connection id "0HMJJT9GQI7DA" completed keep alive response.
2022-08-01 22:21:27.025 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:21:27.027 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Register application/json 114 - 500 - text/plain;+charset=utf-8 8524.1279ms
2022-08-01 22:21:45.674 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Register application/json 121
2022-08-01 22:21:45.675 +04:00 [DBG] POST requests are not supported
2022-08-01 22:21:45.677 +04:00 [DBG] POST requests are not supported
2022-08-01 22:21:45.680 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Register'
2022-08-01 22:21:45.682 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)' with route pattern 'Account/Register' is valid for the request path '/Account/Register'
2022-08-01 22:21:45.684 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:21:45.687 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:21:45.688 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:21:45.690 +04:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BookingApi.Models.Request.AccountRegisterRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:21:45.692 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:21:45.695 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:21:45.697 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:21:45.700 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:21:45.702 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:21:45.704 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:21:45.718 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:21:45.725 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:21:45.727 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:21:45.731 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' using the name '' in request data ...
2022-08-01 22:21:45.733 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:21:45.736 +04:00 [DBG] Connection id "0HMJJT9GQI7DA", Request id "0HMJJT9GQI7DA:00000004": started reading request body.
2022-08-01 22:21:45.739 +04:00 [DBG] Connection id "0HMJJT9GQI7DA", Request id "0HMJJT9GQI7DA:00000004": done reading request body.
2022-08-01 22:21:45.742 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountRegisterRequest'
2022-08-01 22:21:45.743 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:21:45.746 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:21:45.750 +04:00 [DBG] Attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:21:45.755 +04:00 [DBG] Done attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:21:50.302 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'UserId.Profile'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:21:50.308 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:21:50.315 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 22:21:50.322 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 22:21:50.324 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 22:21:50.327 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:21:50.331 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:21:50.340 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 22:21:50.352 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 22:21:50.359 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:21:50.372 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (12ms).
2022-08-01 22:21:50.383 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:21:50.439 +04:00 [INF] Executed DbCommand (41ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:21:50.524 +04:00 [DBG] The foreign key property 'Profile.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 22:21:50.555 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:21:50.566 +04:00 [DBG] Committing transaction.
2022-08-01 22:21:50.574 +04:00 [DBG] Committed transaction.
2022-08-01 22:21:50.576 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:21:50.582 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:21:50.592 +04:00 [DBG] Disposing transaction.
2022-08-01 22:21:50.621 +04:00 [DBG] An entity of type 'Profile' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:21:50.632 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 22:21:50.645 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 22:21:50.648 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Register (BookingApi) in 4943.8075ms
2022-08-01 22:21:50.655 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:21:50.662 +04:00 [DBG] Connection id "0HMJJT9GQI7DA" completed keep alive response.
2022-08-01 22:21:50.674 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:21:50.681 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Register application/json 121 - 200 0 - 5007.2770ms
2022-08-01 22:23:13.180 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 22:23:13.294 +04:00 [DBG] Hosting starting
2022-08-01 22:23:13.314 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 22:23:13.318 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 22:23:13.325 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 22:23:13.333 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 22:23:13.338 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 22:23:13.349 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 22:23:13.352 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:23:13.356 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 22:23:13.358 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:23:13.365 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 22:23:13.369 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 22:23:13.374 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 22:23:13.376 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 22:23:13.464 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 22:23:13.505 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 22:23:13.507 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 22:23:13.508 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 22:23:13.510 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 22:23:13.511 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 22:23:13.512 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 22:23:13.513 +04:00 [DBG] Connection id "0HMJJTBIMTI5Q" received FIN.
2022-08-01 22:23:13.513 +04:00 [DBG] Connection id "0HMJJTBIMTI5R" received FIN.
2022-08-01 22:23:13.513 +04:00 [INF] Hosting environment: Development
2022-08-01 22:23:13.517 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 22:23:13.518 +04:00 [DBG] Hosting started
2022-08-01 22:23:13.522 +04:00 [DBG] Connection id "0HMJJTBIMTI5Q" accepted.
2022-08-01 22:23:13.522 +04:00 [DBG] Connection id "0HMJJTBIMTI5R" accepted.
2022-08-01 22:23:13.524 +04:00 [DBG] Connection id "0HMJJTBIMTI5Q" started.
2022-08-01 22:23:13.524 +04:00 [DBG] Connection id "0HMJJTBIMTI5R" started.
2022-08-01 22:23:13.538 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:23:13.538 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:23:13.567 +04:00 [DBG] Connection id "0HMJJTBIMTI5R" stopped.
2022-08-01 22:23:13.568 +04:00 [DBG] Connection id "0HMJJTBIMTI5Q" stopped.
2022-08-01 22:23:13.572 +04:00 [DBG] Connection id "0HMJJTBIMTI5Q" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:23:13.572 +04:00 [DBG] Connection id "0HMJJTBIMTI5R" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:23:13.697 +04:00 [DBG] Connection id "0HMJJTBIMTI5S" accepted.
2022-08-01 22:23:13.700 +04:00 [DBG] Connection id "0HMJJTBIMTI5S" started.
2022-08-01 22:23:13.755 +04:00 [DBG] Connection 0HMJJTBIMTI5S established using the following protocol: "Tls12"
2022-08-01 22:23:13.810 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 22:23:13.839 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 22:23:13.949 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 22:23:14.058 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 22:23:14.064 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 22:23:14.065 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 258.3017ms
2022-08-01 22:23:14.070 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 6.3368ms
2022-08-01 22:23:14.141 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 22:23:14.164 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 22.2765ms
2022-08-01 22:23:14.424 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 22:23:14.532 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 107.9476ms
2022-08-01 22:23:29.697 +04:00 [DBG] Connection id "0HMJJTBIMTI5T" accepted.
2022-08-01 22:23:29.699 +04:00 [DBG] Connection id "0HMJJTBIMTI5T" received FIN.
2022-08-01 22:23:29.700 +04:00 [DBG] Connection id "0HMJJTBIMTI5T" started.
2022-08-01 22:23:29.700 +04:00 [DBG] Connection id "0HMJJTBIMTI5U" accepted.
2022-08-01 22:23:29.703 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:23:29.704 +04:00 [DBG] Connection id "0HMJJTBIMTI5U" started.
2022-08-01 22:23:29.707 +04:00 [DBG] Connection id "0HMJJTBIMTI5T" stopped.
2022-08-01 22:23:29.709 +04:00 [DBG] Connection id "0HMJJTBIMTI5T" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:23:29.714 +04:00 [DBG] Connection 0HMJJTBIMTI5U established using the following protocol: "Tls12"
2022-08-01 22:23:29.723 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62
2022-08-01 22:23:29.726 +04:00 [DBG] POST requests are not supported
2022-08-01 22:23:29.728 +04:00 [DBG] POST requests are not supported
2022-08-01 22:23:29.756 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 22:23:29.762 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 22:23:29.764 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:23:29.794 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:23:29.798 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:23:29.837 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:23:29.841 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:23:29.843 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:23:29.845 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:23:29.847 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:23:29.850 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:23:29.854 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:23:29.982 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 22:23:30.958 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:23:30.970 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:23:30.978 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:23:30.983 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 22:23:30.992 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:23:31.001 +04:00 [DBG] Connection id "0HMJJTBIMTI5U", Request id "0HMJJTBIMTI5U:00000002": started reading request body.
2022-08-01 22:23:31.004 +04:00 [DBG] Connection id "0HMJJTBIMTI5U", Request id "0HMJJTBIMTI5U:00000002": done reading request body.
2022-08-01 22:23:31.012 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 22:23:31.014 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:23:31.016 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:23:31.018 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:23:31.042 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:23:31.160 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __hashPassword_1)'
2022-08-01 22:23:31.385 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__hashPassword_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 22:23:31.441 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:23:31.476 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (30ms).
2022-08-01 22:23:31.491 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:23:31.721 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:23:31.738 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:23:31.811 +04:00 [INF] Executed DbCommand (79ms) [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:23:31.835 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:23:31.839 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:23:31.847 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:23:31.851 +04:00 [ERR] Exception of type 'System.Exception' was thrown.
2022-08-01 22:23:31.860 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 2001.783ms
2022-08-01 22:23:31.862 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:23:31.866 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Exception of type 'System.Exception' was thrown.
   at BookingApi.Controllers.AccountController.Login(AccountLoginRequest loginRequest) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\AccountController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 22:23:31.898 +04:00 [DBG] Connection id "0HMJJTBIMTI5U" completed keep alive response.
2022-08-01 22:23:31.903 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:23:31.907 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62 - 500 - text/plain;+charset=utf-8 2184.4550ms
2022-08-01 22:24:20.059 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 22:24:20.229 +04:00 [DBG] Hosting starting
2022-08-01 22:24:20.287 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 22:24:20.293 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 22:24:20.300 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 22:24:20.307 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 22:24:20.315 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 22:24:20.326 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 22:24:20.330 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:24:20.336 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 22:24:20.339 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:24:20.349 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 22:24:20.353 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 22:24:20.360 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 22:24:20.362 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 22:24:20.585 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 22:24:20.651 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 22:24:20.652 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 22:24:20.653 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 22:24:20.655 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 22:24:20.656 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 22:24:20.657 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 22:24:20.659 +04:00 [INF] Hosting environment: Development
2022-08-01 22:24:20.660 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 22:24:20.661 +04:00 [DBG] Hosting started
2022-08-01 22:24:21.123 +04:00 [DBG] Connection id "0HMJJTC6RM8BU" received FIN.
2022-08-01 22:24:21.123 +04:00 [DBG] Connection id "0HMJJTC6RM8BT" received FIN.
2022-08-01 22:24:21.127 +04:00 [DBG] Connection id "0HMJJTC6RM8BU" accepted.
2022-08-01 22:24:21.127 +04:00 [DBG] Connection id "0HMJJTC6RM8BT" accepted.
2022-08-01 22:24:21.132 +04:00 [DBG] Connection id "0HMJJTC6RM8BU" started.
2022-08-01 22:24:21.132 +04:00 [DBG] Connection id "0HMJJTC6RM8BT" started.
2022-08-01 22:24:21.156 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:24:21.156 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:24:21.226 +04:00 [DBG] Connection id "0HMJJTC6RM8BU" stopped.
2022-08-01 22:24:21.226 +04:00 [DBG] Connection id "0HMJJTC6RM8BT" stopped.
2022-08-01 22:24:21.230 +04:00 [DBG] Connection id "0HMJJTC6RM8BT" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:24:21.230 +04:00 [DBG] Connection id "0HMJJTC6RM8BU" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:24:21.480 +04:00 [DBG] Connection id "0HMJJTC6RM8BV" accepted.
2022-08-01 22:24:21.485 +04:00 [DBG] Connection id "0HMJJTC6RM8BV" started.
2022-08-01 22:24:21.557 +04:00 [DBG] Connection 0HMJJTC6RM8BV established using the following protocol: "Tls12"
2022-08-01 22:24:21.662 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 22:24:21.752 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 22:24:21.887 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 22:24:22.036 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 22:24:22.042 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 22:24:22.045 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 7.3298ms
2022-08-01 22:24:22.046 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 388.4381ms
2022-08-01 22:24:22.101 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 22:24:22.135 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 34.4329ms
2022-08-01 22:24:22.380 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 22:24:22.545 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 165.0779ms
2022-08-01 22:29:28.640 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 22:29:28.930 +04:00 [DBG] Hosting starting
2022-08-01 22:29:28.981 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 22:29:28.987 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 22:29:29.007 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 22:29:29.022 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 22:29:29.037 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 22:29:29.054 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 22:29:29.058 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:29:29.063 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 22:29:29.067 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:29:29.075 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 22:29:29.081 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 22:29:29.089 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 22:29:29.091 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 22:29:29.392 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 22:29:29.452 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 22:29:29.454 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 22:29:29.455 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 22:29:29.456 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 22:29:29.457 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 22:29:29.459 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 22:29:29.460 +04:00 [INF] Hosting environment: Development
2022-08-01 22:29:29.461 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 22:29:29.462 +04:00 [DBG] Hosting started
2022-08-01 22:29:29.517 +04:00 [DBG] Connection id "0HMJJTF2ONTQN" accepted.
2022-08-01 22:29:29.517 +04:00 [DBG] Connection id "0HMJJTF2ONTQO" accepted.
2022-08-01 22:29:29.519 +04:00 [DBG] Connection id "0HMJJTF2ONTQN" started.
2022-08-01 22:29:29.519 +04:00 [DBG] Connection id "0HMJJTF2ONTQO" started.
2022-08-01 22:29:30.871 +04:00 [DBG] Connection id "0HMJJTF2ONTQP" accepted.
2022-08-01 22:29:30.874 +04:00 [DBG] Connection id "0HMJJTF2ONTQP" started.
2022-08-01 22:29:31.018 +04:00 [DBG] Connection 0HMJJTF2ONTQP established using the following protocol: "Tls12"
2022-08-01 22:29:31.154 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 22:29:31.241 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 22:29:31.417 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 22:29:31.664 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 22:29:31.670 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 22:29:31.675 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 10.5505ms
2022-08-01 22:29:31.675 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 531.6575ms
2022-08-01 22:29:31.731 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 22:29:31.785 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 53.8764ms
2022-08-01 22:29:31.880 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 22:29:32.038 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 158.0144ms
2022-08-01 22:29:37.894 +04:00 [DBG] Connection id "0HMJJTF2ONTQP" received FIN.
2022-08-01 22:29:37.917 +04:00 [DBG] Connection id "0HMJJTF2ONTQP" sending FIN because: "The client closed the connection."
2022-08-01 22:29:37.931 +04:00 [DBG] Connection id "0HMJJTF2ONTQP" is closed. The last processed stream ID was 7.
2022-08-01 22:29:37.946 +04:00 [DBG] Connection id "0HMJJTF2ONTQP" stopped.
2022-08-01 22:29:39.553 +04:00 [DBG] Authentication of the HTTPS connection timed out.
2022-08-01 22:29:39.553 +04:00 [DBG] Authentication of the HTTPS connection timed out.
2022-08-01 22:29:39.554 +04:00 [DBG] Connection id "0HMJJTF2ONTQN" stopped.
2022-08-01 22:29:39.554 +04:00 [DBG] Connection id "0HMJJTF2ONTQO" stopped.
2022-08-01 22:29:39.555 +04:00 [DBG] Connection id "0HMJJTF2ONTQN" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:29:39.556 +04:00 [DBG] Connection id "0HMJJTF2ONTQO" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:29:39.929 +04:00 [DBG] Connection id "0HMJJTF2ONTQQ" accepted.
2022-08-01 22:29:39.931 +04:00 [DBG] Connection id "0HMJJTF2ONTQQ" started.
2022-08-01 22:29:39.932 +04:00 [DBG] Connection id "0HMJJTF2ONTQR" accepted.
2022-08-01 22:29:39.936 +04:00 [DBG] Connection id "0HMJJTF2ONTQQ" received FIN.
2022-08-01 22:29:39.937 +04:00 [DBG] Connection id "0HMJJTF2ONTQR" started.
2022-08-01 22:29:39.939 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:29:39.945 +04:00 [DBG] Connection 0HMJJTF2ONTQR established using the following protocol: "Tls12"
2022-08-01 22:29:40.014 +04:00 [DBG] Connection id "0HMJJTF2ONTQQ" stopped.
2022-08-01 22:29:40.016 +04:00 [DBG] Connection id "0HMJJTF2ONTQQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:29:40.026 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62
2022-08-01 22:29:40.030 +04:00 [DBG] POST requests are not supported
2022-08-01 22:29:40.032 +04:00 [DBG] POST requests are not supported
2022-08-01 22:29:40.065 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 22:29:40.070 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 22:29:40.072 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:29:40.176 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:29:40.180 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:29:40.216 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:29:40.220 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:29:40.222 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:29:40.224 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:29:40.228 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:29:40.230 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:29:40.233 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:29:40.471 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 22:29:41.624 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:29:41.631 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:29:41.650 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:29:41.654 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 22:29:41.656 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:29:41.663 +04:00 [DBG] Connection id "0HMJJTF2ONTQR", Request id "0HMJJTF2ONTQR:00000002": started reading request body.
2022-08-01 22:29:41.665 +04:00 [DBG] Connection id "0HMJJTF2ONTQR", Request id "0HMJJTF2ONTQR:00000002": done reading request body.
2022-08-01 22:29:41.672 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 22:29:41.674 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:29:41.675 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:29:41.676 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:29:41.712 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:30:27.504 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __hashPassword_1)'
2022-08-01 22:30:27.915 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__hashPassword_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 22:30:28.015 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:30:28.092 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (79ms).
2022-08-01 22:30:28.137 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:30:28.590 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:30:28.611 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:30:28.720 +04:00 [INF] Executed DbCommand (113ms) [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:30:28.753 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:30:28.765 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:30:28.779 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:30:34.072 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 53835.4283ms
2022-08-01 22:30:34.076 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:30:34.080 +04:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Exception of type 'System.Exception' was thrown.
   at Booking.Services.Implementations.ProfileService.AuthenticateUser(String email, String password) in D:\Albert\AltexProject\BookingApi\BookingService\Implementations\ProfileService.cs:line 72
   at BookingApi.Controllers.AccountController.Login(AccountLoginRequest loginRequest) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\AccountController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 22:30:34.120 +04:00 [DBG] Connection id "0HMJJTF2ONTQR" completed keep alive response.
2022-08-01 22:30:34.128 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:30:34.136 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62 - 500 - text/plain;+charset=utf-8 54109.8635ms
2022-08-01 22:31:50.237 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 22:31:50.430 +04:00 [DBG] Hosting starting
2022-08-01 22:31:50.481 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 22:31:50.486 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 22:31:50.492 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 22:31:50.500 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 22:31:50.508 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 22:31:50.521 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 22:31:50.524 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:31:50.530 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 22:31:50.533 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:31:50.544 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 22:31:50.550 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 22:31:50.556 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 22:31:50.559 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 22:31:50.833 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 22:31:50.920 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 22:31:50.921 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 22:31:50.922 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 22:31:50.924 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 22:31:50.926 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 22:31:50.944 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 22:31:50.945 +04:00 [INF] Hosting environment: Development
2022-08-01 22:31:50.947 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 22:31:50.948 +04:00 [DBG] Hosting started
2022-08-01 22:31:50.950 +04:00 [DBG] Connection id "0HMJJTGCTIN74" received FIN.
2022-08-01 22:31:50.950 +04:00 [DBG] Connection id "0HMJJTGCTIN75" received FIN.
2022-08-01 22:31:50.965 +04:00 [DBG] Connection id "0HMJJTGCTIN75" accepted.
2022-08-01 22:31:50.965 +04:00 [DBG] Connection id "0HMJJTGCTIN74" accepted.
2022-08-01 22:31:50.967 +04:00 [DBG] Connection id "0HMJJTGCTIN75" started.
2022-08-01 22:31:50.968 +04:00 [DBG] Connection id "0HMJJTGCTIN74" started.
2022-08-01 22:31:50.992 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:31:50.992 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:31:51.055 +04:00 [DBG] Connection id "0HMJJTGCTIN75" stopped.
2022-08-01 22:31:51.060 +04:00 [DBG] Connection id "0HMJJTGCTIN74" stopped.
2022-08-01 22:31:51.065 +04:00 [DBG] Connection id "0HMJJTGCTIN75" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:31:51.065 +04:00 [DBG] Connection id "0HMJJTGCTIN74" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:31:52.138 +04:00 [DBG] Connection id "0HMJJTGCTIN76" accepted.
2022-08-01 22:31:52.140 +04:00 [DBG] Connection id "0HMJJTGCTIN76" started.
2022-08-01 22:31:52.258 +04:00 [DBG] Connection 0HMJJTGCTIN76 established using the following protocol: "Tls12"
2022-08-01 22:31:52.344 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 22:31:52.403 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 22:31:52.540 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 22:31:52.748 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 22:31:52.754 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 22:31:52.761 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 11.7825ms
2022-08-01 22:31:52.761 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 422.7478ms
2022-08-01 22:31:52.862 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 22:31:52.900 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 37.7344ms
2022-08-01 22:31:53.024 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 22:31:53.295 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 270.9561ms
2022-08-01 22:31:55.029 +04:00 [DBG] Connection id "0HMJJTGCTIN77" accepted.
2022-08-01 22:31:55.029 +04:00 [DBG] Connection id "0HMJJTGCTIN77" received FIN.
2022-08-01 22:31:55.032 +04:00 [DBG] Connection id "0HMJJTGCTIN78" accepted.
2022-08-01 22:31:55.032 +04:00 [DBG] Connection id "0HMJJTGCTIN77" started.
2022-08-01 22:31:55.035 +04:00 [DBG] Connection id "0HMJJTGCTIN78" started.
2022-08-01 22:31:55.037 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:31:55.042 +04:00 [DBG] Connection id "0HMJJTGCTIN77" stopped.
2022-08-01 22:31:55.044 +04:00 [DBG] Connection id "0HMJJTGCTIN77" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:31:55.051 +04:00 [DBG] Connection 0HMJJTGCTIN78 established using the following protocol: "Tls12"
2022-08-01 22:31:55.061 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Register application/json 121
2022-08-01 22:31:55.079 +04:00 [DBG] POST requests are not supported
2022-08-01 22:31:55.081 +04:00 [DBG] POST requests are not supported
2022-08-01 22:31:55.112 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Register'
2022-08-01 22:31:55.117 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)' with route pattern 'Account/Register' is valid for the request path '/Account/Register'
2022-08-01 22:31:55.119 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:31:55.198 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:31:55.203 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:31:55.234 +04:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BookingApi.Models.Request.AccountRegisterRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:31:55.237 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:31:55.238 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:31:55.240 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:31:55.242 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:31:55.243 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:31:55.246 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:31:55.405 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 22:31:56.522 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:31:56.530 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:31:56.544 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:31:56.549 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' using the name '' in request data ...
2022-08-01 22:31:56.553 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:31:56.560 +04:00 [DBG] Connection id "0HMJJTGCTIN78", Request id "0HMJJTGCTIN78:00000002": started reading request body.
2022-08-01 22:31:56.562 +04:00 [DBG] Connection id "0HMJJTGCTIN78", Request id "0HMJJTGCTIN78:00000002": done reading request body.
2022-08-01 22:31:56.570 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountRegisterRequest'
2022-08-01 22:31:56.572 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:31:56.574 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:31:56.575 +04:00 [DBG] Attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:31:56.604 +04:00 [DBG] Done attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:31:59.373 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'UserId.Profile'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:31:59.472 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:31:59.486 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 22:31:59.497 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 22:31:59.513 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 22:31:59.624 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:32:00.040 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:32:00.049 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 22:32:00.073 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 22:32:00.196 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:32:00.212 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (10ms).
2022-08-01 22:32:00.249 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:32:00.385 +04:00 [INF] Executed DbCommand (137ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:32:00.447 +04:00 [DBG] The foreign key property 'Profile.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 22:32:00.472 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:32:00.500 +04:00 [DBG] Committing transaction.
2022-08-01 22:32:00.509 +04:00 [DBG] Committed transaction.
2022-08-01 22:32:00.519 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:32:00.535 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:32:00.544 +04:00 [DBG] Disposing transaction.
2022-08-01 22:32:00.569 +04:00 [DBG] An entity of type 'Profile' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:32:00.583 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 22:32:00.608 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 22:32:00.622 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Register (BookingApi) in 5368.9725ms
2022-08-01 22:32:00.625 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:32:00.632 +04:00 [DBG] Connection id "0HMJJTGCTIN78" completed keep alive response.
2022-08-01 22:32:00.639 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:32:00.647 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Register application/json 121 - 200 0 - 5586.2099ms
2022-08-01 22:32:28.073 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62
2022-08-01 22:32:28.074 +04:00 [DBG] POST requests are not supported
2022-08-01 22:32:28.075 +04:00 [DBG] POST requests are not supported
2022-08-01 22:32:28.078 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 22:32:28.080 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 22:32:28.082 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:32:28.083 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:32:28.084 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:32:28.088 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:32:28.090 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:32:28.092 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:32:28.093 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:32:28.096 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:32:28.098 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:32:28.100 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:32:28.149 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:32:28.152 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:32:28.154 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:32:28.156 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 22:32:28.159 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:32:28.162 +04:00 [DBG] Connection id "0HMJJTGCTIN78", Request id "0HMJJTGCTIN78:00000003": started reading request body.
2022-08-01 22:32:28.165 +04:00 [DBG] Connection id "0HMJJTGCTIN78", Request id "0HMJJTGCTIN78:00000003": done reading request body.
2022-08-01 22:32:28.168 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 22:32:28.170 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:32:28.171 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:32:28.173 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:32:28.176 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:32:30.886 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __hashPassword_1)'
2022-08-01 22:32:31.336 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__hashPassword_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 22:32:31.435 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:32:31.437 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2022-08-01 22:32:31.439 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:32:31.442 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:32:31.444 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:32:31.455 +04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:32:31.481 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:32:31.482 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:32:31.483 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:32:31.600 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 3500.6374ms
2022-08-01 22:32:31.602 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:32:31.605 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Booking.Services.Exceptions.ObjectNotFoundException: Cannot Find User
   at Booking.Services.Implementations.ProfileService.AuthenticateUser(String email, String password) in D:\Albert\AltexProject\BookingApi\BookingService\Implementations\ProfileService.cs:line 72
   at BookingApi.Controllers.AccountController.Login(AccountLoginRequest loginRequest) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\AccountController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 22:32:31.637 +04:00 [DBG] Connection id "0HMJJTGCTIN78" completed keep alive response.
2022-08-01 22:32:31.638 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:32:31.640 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62 - 500 - text/plain;+charset=utf-8 3566.4849ms
2022-08-01 22:50:34.004 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 22:50:34.171 +04:00 [DBG] Hosting starting
2022-08-01 22:50:34.248 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 22:50:34.255 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 22:50:34.279 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 22:50:34.296 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 22:50:34.323 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 22:50:34.343 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 22:50:34.351 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:50:34.361 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 22:50:34.366 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:50:34.377 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 22:50:34.384 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 22:50:34.393 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 22:50:34.395 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 22:50:34.662 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 22:50:34.754 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 22:50:34.754 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 22:50:34.755 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 22:50:34.756 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 22:50:34.759 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 22:50:34.760 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 22:50:34.761 +04:00 [INF] Hosting environment: Development
2022-08-01 22:50:34.762 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 22:50:34.763 +04:00 [DBG] Hosting started
2022-08-01 22:50:34.973 +04:00 [DBG] Connection id "0HMJJTQRSV90H" accepted.
2022-08-01 22:50:34.976 +04:00 [DBG] Connection id "0HMJJTQRSV90H" started.
2022-08-01 22:50:34.996 +04:00 [DBG] Connection id "0HMJJTQRSV90H" received FIN.
2022-08-01 22:50:35.015 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:50:35.168 +04:00 [DBG] Connection id "0HMJJTQRSV90H" stopped.
2022-08-01 22:50:35.171 +04:00 [DBG] Connection id "0HMJJTQRSV90H" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:50:35.348 +04:00 [DBG] Connection id "0HMJJTQRSV90I" accepted.
2022-08-01 22:50:35.357 +04:00 [DBG] Connection id "0HMJJTQRSV90I" started.
2022-08-01 22:50:35.363 +04:00 [DBG] Connection id "0HMJJTQRSV90J" accepted.
2022-08-01 22:50:35.380 +04:00 [DBG] Connection id "0HMJJTQRSV90J" started.
2022-08-01 22:50:35.425 +04:00 [DBG] Connection id "0HMJJTQRSV90I" received FIN.
2022-08-01 22:50:35.447 +04:00 [DBG] Connection 0HMJJTQRSV90I established using the following protocol: "Tls12"
2022-08-01 22:50:35.447 +04:00 [DBG] Connection 0HMJJTQRSV90J established using the following protocol: "Tls12"
2022-08-01 22:50:35.472 +04:00 [DBG] Connection id "0HMJJTQRSV90I" is closed. The last processed stream ID was 0.
2022-08-01 22:50:35.475 +04:00 [DBG] Connection id "0HMJJTQRSV90I" sending FIN because: "The client closed the connection."
2022-08-01 22:50:35.482 +04:00 [DBG] Connection id "0HMJJTQRSV90I" stopped.
2022-08-01 22:50:35.530 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 22:50:35.582 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 22:50:35.716 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 22:50:35.944 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 22:50:35.951 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 424.4236ms
2022-08-01 22:50:36.012 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 22:50:36.021 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 8.4499ms
2022-08-01 22:50:36.026 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 22:50:36.054 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 27.8607ms
2022-08-01 22:50:36.308 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 22:50:36.453 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 145.6245ms
2022-08-01 22:52:25.579 +04:00 [DBG] Connection id "0HMJJTQRSV90K" accepted.
2022-08-01 22:52:25.586 +04:00 [DBG] Connection id "0HMJJTQRSV90K" received FIN.
2022-08-01 22:52:25.589 +04:00 [DBG] Connection id "0HMJJTQRSV90K" started.
2022-08-01 22:52:25.608 +04:00 [DBG] Connection id "0HMJJTQRSV90L" accepted.
2022-08-01 22:52:25.611 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:52:25.611 +04:00 [DBG] Connection id "0HMJJTQRSV90L" started.
2022-08-01 22:52:25.615 +04:00 [DBG] Connection id "0HMJJTQRSV90K" stopped.
2022-08-01 22:52:25.619 +04:00 [DBG] Connection id "0HMJJTQRSV90K" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:52:25.624 +04:00 [DBG] Connection 0HMJJTQRSV90L established using the following protocol: "Tls12"
2022-08-01 22:52:25.639 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62
2022-08-01 22:52:25.643 +04:00 [DBG] POST requests are not supported
2022-08-01 22:52:25.645 +04:00 [DBG] POST requests are not supported
2022-08-01 22:52:25.687 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 22:52:25.693 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 22:52:25.697 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:52:25.815 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:52:25.823 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:52:25.872 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:52:25.877 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:52:25.879 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:52:25.880 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:52:25.882 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:52:25.884 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:52:25.888 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:52:26.152 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 22:52:27.587 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:52:27.593 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:52:27.615 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:52:27.622 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 22:52:27.626 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:52:27.637 +04:00 [DBG] Connection id "0HMJJTQRSV90L", Request id "0HMJJTQRSV90L:00000002": started reading request body.
2022-08-01 22:52:27.639 +04:00 [DBG] Connection id "0HMJJTQRSV90L", Request id "0HMJJTQRSV90L:00000002": done reading request body.
2022-08-01 22:52:27.647 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 22:52:27.649 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:52:27.651 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:52:27.652 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:52:27.702 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:52:31.283 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __hashPassword_1)'
2022-08-01 22:52:31.788 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__hashPassword_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 22:52:31.900 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:52:31.975 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (75ms).
2022-08-01 22:52:32.006 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:52:32.488 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:52:32.512 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:52:32.639 +04:00 [INF] Executed DbCommand (134ms) [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:52:32.678 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:52:32.691 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:52:32.706 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:52:32.840 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 6947.7972ms
2022-08-01 22:52:32.845 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:52:32.853 +04:00 [ERR] An unhandled exception has occurred while executing the request.
Booking.Services.Exceptions.ObjectNotFoundException: Cannot Find User
   at Booking.Services.Implementations.ProfileService.AuthenticateUser(String email, String password) in D:\Albert\AltexProject\BookingApi\BookingService\Implementations\ProfileService.cs:line 72
   at BookingApi.Controllers.AccountController.Login(AccountLoginRequest loginRequest) in D:\Albert\AltexProject\BookingApi\BookingApi\Controllers\AccountController.cs:line 30
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2022-08-01 22:52:32.900 +04:00 [DBG] Connection id "0HMJJTQRSV90L" completed keep alive response.
2022-08-01 22:52:32.908 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:52:32.914 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62 - 500 - text/plain;+charset=utf-8 7275.0203ms
2022-08-01 22:52:40.358 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Register application/json 121
2022-08-01 22:52:40.359 +04:00 [DBG] POST requests are not supported
2022-08-01 22:52:40.360 +04:00 [DBG] POST requests are not supported
2022-08-01 22:52:40.364 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Register'
2022-08-01 22:52:40.366 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)' with route pattern 'Account/Register' is valid for the request path '/Account/Register'
2022-08-01 22:52:40.368 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:52:40.370 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:52:40.372 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:52:40.377 +04:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BookingApi.Models.Request.AccountRegisterRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:52:40.381 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:52:40.383 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:52:40.385 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:52:40.388 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:52:40.389 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:52:40.391 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:52:40.444 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:52:40.447 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:52:40.449 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:52:40.451 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' using the name '' in request data ...
2022-08-01 22:52:40.453 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:52:40.455 +04:00 [DBG] Connection id "0HMJJTQRSV90L", Request id "0HMJJTQRSV90L:00000003": started reading request body.
2022-08-01 22:52:40.456 +04:00 [DBG] Connection id "0HMJJTQRSV90L", Request id "0HMJJTQRSV90L:00000003": done reading request body.
2022-08-01 22:52:40.459 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountRegisterRequest'
2022-08-01 22:52:40.460 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:52:40.461 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:52:40.463 +04:00 [DBG] Attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:52:40.465 +04:00 [DBG] Done attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:52:44.436 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'UserId.Profile'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:52:44.531 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:52:44.544 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 22:52:44.550 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 22:52:44.566 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 22:52:44.599 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:52:44.603 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:52:44.608 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 22:52:44.628 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 22:52:44.715 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:52:44.716 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 22:52:44.719 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:52:44.728 +04:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:52:44.779 +04:00 [DBG] The foreign key property 'Profile.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 22:52:44.792 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:52:44.803 +04:00 [DBG] Committing transaction.
2022-08-01 22:52:44.812 +04:00 [DBG] Committed transaction.
2022-08-01 22:52:44.821 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:52:44.822 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:52:44.829 +04:00 [DBG] Disposing transaction.
2022-08-01 22:52:44.851 +04:00 [DBG] An entity of type 'Profile' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:52:44.858 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 22:52:44.867 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 22:52:44.869 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Register (BookingApi) in 4478.3108ms
2022-08-01 22:52:44.872 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:52:44.874 +04:00 [DBG] Connection id "0HMJJTQRSV90L" completed keep alive response.
2022-08-01 22:52:44.875 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:52:44.877 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Register application/json 121 - 200 0 - 4518.8438ms
2022-08-01 22:53:29.841 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62
2022-08-01 22:53:29.845 +04:00 [DBG] POST requests are not supported
2022-08-01 22:53:29.848 +04:00 [DBG] POST requests are not supported
2022-08-01 22:53:29.849 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 22:53:29.851 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 22:53:29.856 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:53:29.859 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:53:29.861 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:53:29.862 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:53:29.864 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:53:29.865 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:53:29.867 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:53:29.872 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:53:29.873 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:53:29.875 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:53:29.892 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:53:29.898 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:53:29.899 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:53:29.902 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 22:53:29.904 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:53:29.906 +04:00 [DBG] Connection id "0HMJJTQRSV90L", Request id "0HMJJTQRSV90L:00000004": started reading request body.
2022-08-01 22:53:29.907 +04:00 [DBG] Connection id "0HMJJTQRSV90L", Request id "0HMJJTQRSV90L:00000004": done reading request body.
2022-08-01 22:53:29.908 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 22:53:29.909 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:53:29.911 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:53:29.913 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:53:29.916 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:53:55.804 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:53:55.806 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 22:53:55.807 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:53:55.809 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:53:55.810 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:53:55.845 +04:00 [INF] Executed DbCommand (35ms) [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:53:55.873 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:53:55.875 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:53:55.876 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:53:55.877 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:54:05.040 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 22:54:05.046 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 22:54:05.047 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 22:54:05.049 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 22:54:05.051 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 22:54:05.053 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 22:54:05.061 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 35186.2659ms
2022-08-01 22:54:05.063 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:54:05.066 +04:00 [DBG] Connection id "0HMJJTQRSV90L" completed keep alive response.
2022-08-01 22:54:05.067 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:54:05.068 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62 - 200 - application/json;+charset=utf-8 35227.3016ms
2022-08-01 22:54:20.704 +04:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-08-01 22:54:20.836 +04:00 [DBG] Hosting starting
2022-08-01 22:54:20.866 +04:00 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-08-01 22:54:20.871 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74607914-250c-4ef9-92bc-e41fb656f379.xml'.
2022-08-01 22:54:20.878 +04:00 [DBG] Reading data from file 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys\key-74c0097c-79d0-40fc-a7a6-07ef07a4f70a.xml'.
2022-08-01 22:54:20.889 +04:00 [DBG] Found key {74607914-250c-4ef9-92bc-e41fb656f379}.
2022-08-01 22:54:20.896 +04:00 [DBG] Found key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a}.
2022-08-01 22:54:20.906 +04:00 [DBG] Considering key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} with expiration date 2022-09-17 09:24:28Z as default key.
2022-08-01 22:54:20.910 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:54:20.915 +04:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-08-01 22:54:20.918 +04:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-08-01 22:54:20.924 +04:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-08-01 22:54:20.930 +04:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-08-01 22:54:20.936 +04:00 [DBG] Using key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} as the default key.
2022-08-01 22:54:20.938 +04:00 [DBG] Key ring with default key {74c0097c-79d0-40fc-a7a6-07ef07a4f70a} was loaded during application startup.
2022-08-01 22:54:21.031 +04:00 [DBG] Using development certificate: CN=localhost (Thumbprint: C941459ABC5F4E53AFC6B719D581A1F0B943316D)
2022-08-01 22:54:21.081 +04:00 [INF] Now listening on: https://localhost:7058
2022-08-01 22:54:21.083 +04:00 [INF] Now listening on: http://localhost:5058
2022-08-01 22:54:21.084 +04:00 [DBG] Loaded hosting startup assembly BookingApi
2022-08-01 22:54:21.086 +04:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2022-08-01 22:54:21.087 +04:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2022-08-01 22:54:21.089 +04:00 [INF] Application started. Press Ctrl+C to shut down.
2022-08-01 22:54:21.090 +04:00 [INF] Hosting environment: Development
2022-08-01 22:54:21.091 +04:00 [INF] Content root path: D:\Albert\AltexProject\BookingApi\BookingApi\
2022-08-01 22:54:21.092 +04:00 [DBG] Hosting started
2022-08-01 22:54:21.157 +04:00 [DBG] Connection id "0HMJJTSVA5BDJ" received FIN.
2022-08-01 22:54:21.168 +04:00 [DBG] Connection id "0HMJJTSVA5BDK" reset.
2022-08-01 22:54:21.170 +04:00 [DBG] Connection id "0HMJJTSVA5BDJ" accepted.
2022-08-01 22:54:21.170 +04:00 [DBG] Connection id "0HMJJTSVA5BDK" accepted.
2022-08-01 22:54:21.173 +04:00 [DBG] Connection id "0HMJJTSVA5BDJ" started.
2022-08-01 22:54:21.174 +04:00 [DBG] Connection id "0HMJJTSVA5BDK" started.
2022-08-01 22:54:21.189 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:54:21.189 +04:00 [DBG] Failed to authenticate HTTPS connection.
Microsoft.AspNetCore.Connections.ConnectionResetException: An existing connection was forcibly closed by the remote host.
 ---> System.Net.Sockets.SocketException (10054): An existing connection was forcibly closed by the remote host.
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.Internal.SocketConnection.DoReceive()
   --- End of inner exception stack trace ---
   at System.IO.Pipelines.Pipe.GetReadResult(ReadResult& result)
   at System.IO.Pipelines.Pipe.ReadAsync(CancellationToken token)
   at System.IO.Pipelines.Pipe.DefaultPipeReader.ReadAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.DuplexPipeStream.ReadAsyncInternal(Memory`1 destination, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:54:21.216 +04:00 [DBG] Connection id "0HMJJTSVA5BDJ" stopped.
2022-08-01 22:54:21.253 +04:00 [DBG] Connection id "0HMJJTSVA5BDK" stopped.
2022-08-01 22:54:21.259 +04:00 [DBG] Connection id "0HMJJTSVA5BDJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:54:21.260 +04:00 [DBG] Connection id "0HMJJTSVA5BDK" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:54:21.320 +04:00 [DBG] Connection id "0HMJJTSVA5BDL" accepted.
2022-08-01 22:54:21.322 +04:00 [DBG] Connection id "0HMJJTSVA5BDL" started.
2022-08-01 22:54:21.376 +04:00 [DBG] Connection 0HMJJTSVA5BDL established using the following protocol: "Tls12"
2022-08-01 22:54:21.429 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/index.html - -
2022-08-01 22:54:21.458 +04:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-08-01 22:54:21.575 +04:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2022-08-01 22:54:21.685 +04:00 [DBG] Response markup was updated to include browser refresh script injection.
2022-08-01 22:54:21.690 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/index.html - - - 200 - text/html;charset=utf-8 265.7008ms
2022-08-01 22:54:21.795 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - -
2022-08-01 22:54:21.795 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/_vs/browserLink - -
2022-08-01 22:54:21.805 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_framework/aspnetcore-browser-refresh.js - - - 200 11990 application/javascript;+charset=utf-8 9.9754ms
2022-08-01 22:54:21.837 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 41.9511ms
2022-08-01 22:54:22.089 +04:00 [INF] Request starting HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - -
2022-08-01 22:54:22.215 +04:00 [INF] Request finished HTTP/2 GET https://localhost:7058/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 126.4713ms
2022-08-01 22:54:55.618 +04:00 [DBG] Connection id "0HMJJTSVA5BDM" accepted.
2022-08-01 22:54:55.620 +04:00 [DBG] Connection id "0HMJJTSVA5BDM" started.
2022-08-01 22:54:55.621 +04:00 [DBG] Connection id "0HMJJTSVA5BDN" accepted.
2022-08-01 22:54:55.623 +04:00 [DBG] Connection id "0HMJJTSVA5BDM" received FIN.
2022-08-01 22:54:55.623 +04:00 [DBG] Connection id "0HMJJTSVA5BDN" started.
2022-08-01 22:54:55.626 +04:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.<FillHandshakeBufferAsync>g__InternalFillHandshakeBufferAsync|189_0[TIOAdapter](TIOAdapter adap, ValueTask`1 task, Int32 minSize)
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](TIOAdapter adapter)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](TIOAdapter adapter, Boolean receiveFirst, Byte[] reAuthenticationData, Boolean isApm)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2022-08-01 22:54:55.631 +04:00 [DBG] Connection id "0HMJJTSVA5BDM" stopped.
2022-08-01 22:54:55.632 +04:00 [DBG] Connection id "0HMJJTSVA5BDM" sending FIN because: "The Socket transport's send loop completed gracefully."
2022-08-01 22:54:55.633 +04:00 [DBG] Connection 0HMJJTSVA5BDN established using the following protocol: "Tls12"
2022-08-01 22:54:55.642 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Register application/json 121
2022-08-01 22:54:55.645 +04:00 [DBG] POST requests are not supported
2022-08-01 22:54:55.647 +04:00 [DBG] POST requests are not supported
2022-08-01 22:54:55.677 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Register'
2022-08-01 22:54:55.683 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)' with route pattern 'Account/Register' is valid for the request path '/Account/Register'
2022-08-01 22:54:55.686 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:54:55.718 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:54:55.723 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:54:55.761 +04:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(BookingApi.Models.Request.AccountRegisterRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:54:55.764 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:54:55.766 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:54:55.768 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:54:55.771 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:54:55.773 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:54:55.775 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:54:55.899 +04:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-08-01 22:54:56.830 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:54:56.837 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:54:56.844 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:54:56.849 +04:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' using the name '' in request data ...
2022-08-01 22:54:56.852 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:54:56.858 +04:00 [DBG] Connection id "0HMJJTSVA5BDN", Request id "0HMJJTSVA5BDN:00000002": started reading request body.
2022-08-01 22:54:56.860 +04:00 [DBG] Connection id "0HMJJTSVA5BDN", Request id "0HMJJTSVA5BDN:00000002": done reading request body.
2022-08-01 22:54:56.866 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountRegisterRequest'
2022-08-01 22:54:56.867 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:54:56.869 +04:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:54:56.871 +04:00 [DBG] Attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest' ...
2022-08-01 22:54:56.893 +04:00 [DBG] Done attempting to validate the bound parameter 'registerRequest' of type 'BookingApi.Models.Request.AccountRegisterRequest'.
2022-08-01 22:54:57.042 +04:00 [DBG] 'BookingContext' generated a temporary value for the property 'UserId.Profile'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:54:57.120 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:54:57.127 +04:00 [DBG] SaveChanges starting for 'BookingContext'.
2022-08-01 22:54:57.133 +04:00 [DBG] DetectChanges starting for 'BookingContext'.
2022-08-01 22:54:57.146 +04:00 [DBG] DetectChanges completed for 'BookingContext'.
2022-08-01 22:54:57.201 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:54:57.440 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:54:57.444 +04:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-08-01 22:54:57.458 +04:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-08-01 22:54:57.526 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:54:57.535 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (4ms).
2022-08-01 22:54:57.559 +04:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:54:57.638 +04:00 [INF] Executed DbCommand (83ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 450), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 8000) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [Profile] ([Description], [Email], [FirstName], [LastName], [Password], [Photo])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
SELECT [UserId]
FROM [Profile]
WHERE @@ROWCOUNT = 1 AND [UserId] = scope_identity();
2022-08-01 22:54:57.673 +04:00 [DBG] The foreign key property 'Profile.UserId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2022-08-01 22:54:57.689 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:54:57.695 +04:00 [DBG] Committing transaction.
2022-08-01 22:54:57.702 +04:00 [DBG] Committed transaction.
2022-08-01 22:54:57.706 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:54:57.712 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:54:57.715 +04:00 [DBG] Disposing transaction.
2022-08-01 22:54:57.730 +04:00 [DBG] An entity of type 'Profile' tracked by 'BookingContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:54:57.735 +04:00 [DBG] SaveChanges completed for 'BookingContext' with 1 entities written to the database.
2022-08-01 22:54:57.744 +04:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2022-08-01 22:54:57.751 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Register (BookingApi) in 1971.4031ms
2022-08-01 22:54:57.754 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Register (BookingApi)'
2022-08-01 22:54:57.757 +04:00 [DBG] Connection id "0HMJJTSVA5BDN" completed keep alive response.
2022-08-01 22:54:57.761 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:54:57.765 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Register application/json 121 - 200 0 - 2122.2012ms
2022-08-01 22:55:05.949 +04:00 [INF] Request starting HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62
2022-08-01 22:55:05.951 +04:00 [DBG] POST requests are not supported
2022-08-01 22:55:05.952 +04:00 [DBG] POST requests are not supported
2022-08-01 22:55:05.955 +04:00 [DBG] 1 candidate(s) found for the request path '/Account/Login'
2022-08-01 22:55:05.957 +04:00 [DBG] Endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)' with route pattern 'Account/Login' is valid for the request path '/Account/Login'
2022-08-01 22:55:05.959 +04:00 [DBG] Request matched endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:55:05.960 +04:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-08-01 22:55:05.962 +04:00 [INF] Executing endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:55:05.966 +04:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookingApi.Models.Request.AccountLoginRequest) on controller BookingApi.Controllers.AccountController (BookingApi).
2022-08-01 22:55:05.969 +04:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-08-01 22:55:05.972 +04:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2022-08-01 22:55:05.973 +04:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-08-01 22:55:05.975 +04:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-08-01 22:55:05.977 +04:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-08-01 22:55:05.978 +04:00 [DBG] Executing controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:55:06.027 +04:00 [INF] Entity Framework Core 6.0.7 initialized 'BookingContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:6.0.7' with options: None
2022-08-01 22:55:06.030 +04:00 [DBG] Executed controller factory for controller BookingApi.Controllers.AccountController (BookingApi)
2022-08-01 22:55:06.032 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:55:06.033 +04:00 [DBG] Attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' using the name '' in request data ...
2022-08-01 22:55:06.035 +04:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-08-01 22:55:06.037 +04:00 [DBG] Connection id "0HMJJTSVA5BDN", Request id "0HMJJTSVA5BDN:00000003": started reading request body.
2022-08-01 22:55:06.038 +04:00 [DBG] Connection id "0HMJJTSVA5BDN", Request id "0HMJJTSVA5BDN:00000003": done reading request body.
2022-08-01 22:55:06.041 +04:00 [DBG] JSON input formatter succeeded, deserializing to type 'BookingApi.Models.Request.AccountLoginRequest'
2022-08-01 22:55:06.042 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:55:06.043 +04:00 [DBG] Done attempting to bind parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:55:06.045 +04:00 [DBG] Attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest' ...
2022-08-01 22:55:06.047 +04:00 [DBG] Done attempting to validate the bound parameter 'loginRequest' of type 'BookingApi.Models.Request.AccountLoginRequest'.
2022-08-01 22:55:06.140 +04:00 [DBG] Compiling query expression: 
'DbSet<Profile>()
    .SingleOrDefault(x => x.Email == __email_0 && x.Password == __hashPassword_1)'
2022-08-01 22:55:06.347 +04:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Profile>(
    asyncEnumerable: new SingleQueryingEnumerable<Profile>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Profile.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Profile.Description (string), 1], [Property: Profile.Email (string) Index, 2], [Property: Profile.FirstName (string) Required, 3], [Property: Profile.LastName (string) Required, 4], [Property: Profile.Password (string) Required, 5], [Property: Profile.Photo (string) Ansi, 6] }
            SELECT TOP(2) p.UserId, p.Description, p.Email, p.FirstName, p.LastName, p.Password, p.Photo
            FROM Profile AS p
            WHERE (p.Email == @__email_0) && (p.Password == @__hashPassword_1)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Profile>, 
        Booking.PersistanceDB.Context.BookingContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-08-01 22:55:06.411 +04:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-08-01 22:55:06.412 +04:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2022-08-01 22:55:06.413 +04:00 [DBG] Opening connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:55:06.416 +04:00 [DBG] Opened connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:55:06.417 +04:00 [DBG] Executing DbCommand [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:55:06.425 +04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 450), @__hashPassword_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [p].[UserId], [p].[Description], [p].[Email], [p].[FirstName], [p].[LastName], [p].[Password], [p].[Photo]
FROM [Profile] AS [p]
WHERE ([p].[Email] = @__email_0) AND ([p].[Password] = @__hashPassword_1)
2022-08-01 22:55:06.437 +04:00 [DBG] Context 'BookingContext' started tracking 'Profile' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-08-01 22:55:06.441 +04:00 [DBG] A data reader was disposed.
2022-08-01 22:55:06.442 +04:00 [DBG] Closing connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:55:06.443 +04:00 [DBG] Closed connection to database 'Booking' on server '(localdb)\MSSQLLocalDB'.
2022-08-01 22:55:06.559 +04:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-08-01 22:55:06.563 +04:00 [DBG] No information found on request to perform content negotiation.
2022-08-01 22:55:06.564 +04:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-08-01 22:55:06.565 +04:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-08-01 22:55:06.568 +04:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-08-01 22:55:06.569 +04:00 [INF] Executing OkObjectResult, writing value of type 'Booking.Services.Models.Users.UserIdWithTokenSerModel'.
2022-08-01 22:55:06.574 +04:00 [INF] Executed action BookingApi.Controllers.AccountController.Login (BookingApi) in 595.3332ms
2022-08-01 22:55:06.575 +04:00 [INF] Executed endpoint 'BookingApi.Controllers.AccountController.Login (BookingApi)'
2022-08-01 22:55:06.577 +04:00 [DBG] Connection id "0HMJJTSVA5BDN" completed keep alive response.
2022-08-01 22:55:06.578 +04:00 [DBG] 'BookingContext' disposed.
2022-08-01 22:55:06.580 +04:00 [INF] Request finished HTTP/1.1 POST https://localhost:7058/Account/Login application/json 62 - 200 - application/json;+charset=utf-8 630.4325ms
